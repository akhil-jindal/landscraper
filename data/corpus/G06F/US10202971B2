Peristaltic pump 
US-10202971-B2
Deka Products Limited Partnership
2019-02-12
https://patents.google.com/patent/US10202971B2/en
CROSS REFERENCE TO RELATED APPLICATIONS
This application is a Continuation Application of U.S. patent application Ser. No. 14/873,515, filed Oct. 2, 2015 and entitled System, Method and Apparatus for Infusing Fluid, now U.S. Publication No. US-2016-0097382-A1, published Apr. 7, 2016, which is a Continuation Application of U.S. patent application Ser. No. 13/725,790, filed Dec. 21, 2012 and entitled System, Method and Apparatus for Infusing Fluid, now U.S. Pat. No. 9,677,555, Issued Jun. 13, 2017, which claims priority to and the benefit of the following:
    U.S. Provisional Patent Application Ser. No. 61/578,649, filed Dec. 21, 2011 and entitled System, Method, and Apparatus for Infusing Fluid; U.S. Provisional Patent Application Ser. No. 61/578,658, filed Dec. 21, 2011 and entitled System, Method, and Apparatus for Estimating Liquid Delivery; U.S. Provisional Patent Application Ser. No. 61/578,674, filed Dec. 21, 2011 and entitled System, Method, and Apparatus for Dispensing Oral Medications; U.S. Provisional Patent Application Ser. No. 61/679,117, filed Aug. 3, 2012 and entitled System, Method, and Apparatus for Monitoring, Regulating, or Controlling Fluid Flow; and U.S. Provisional Patent Application Ser. No. 61/651,322, filed May 24, 2012 and entitled System, Method, and Apparatus for Electronic Patient Care, each of which is hereby incorporated herein by reference in its entirety. U.S. patent application Ser. No. 13/725,790, filed Dec. 21, 2012 and entitled System, Method and Apparatus for Infusing Fluid, now U.S. Pat. No. 9,677,555, Issued Jun. 13, 2017, is also a Continuation-In-Part Application of the following: U.S. patent application Ser. No. 13/333,574, filed Dec. 21, 2011 and entitled System, Method, and Apparatus for Electronic Patient Care, now U.S. Publication No. US-2012-0185267-A1, published Jul. 19, 2012, and PCT Application Serial No. PCT/US11/66588, filed Dec. 21, 2011 and entitled System, Method, and Apparatus for Electronic Patient Care, both of which are hereby incorporated herein by reference in their entireties. U.S. patent application Ser. No. 14/873,515, is also a Continuation-In-Part Application of the following: U.S. patent application Ser. No. 13/723,238, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Clamping, now U.S. Pat. No. 9,759,369, Issued Sep. 12, 2017; U.S. patent application Ser. No. 13/723,235, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Dispensing Oral Medications, now U.S. Pat. No. 9,400,873, Issued Jul. 26, 2016; U.S. patent application Ser. No. 13/724,568, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Estimating Liquid Delivery, now U.S. Pat. No. 9,295,778, Issued Mar. 29, 2016; U.S. patent application Ser. No. 13/723,239, filed Dec. 21, 2012, and entitled System, Method, and Apparatus for Electronic Patient Care, now U.S. Publication No. US-2013-0297330-A1, published Nov. 7, 2013; U.S. patent application Ser. No. 13/723,242, filed Dec. 21, 2012, and entitled System, Method, and Apparatus for Electronic Patient Care, now U.S. Publication No. US-2013-0317753-A1, published Nov. 28, 2013; U.S. patent application Ser. No. 13/723,244, filed Dec. 21, 2012, and entitled System, Method, and Apparatus for Monitoring, Regulating, or Controlling Fluid Flow, now U.S. Pat. No. 9,151,646, Issued Oct. 6, 2015; U.S. patent application Ser. No. 13/723,251, filed Dec. 21, 2012, and entitled System, Method, and Apparatus for Estimating Liquid Delivery, now U.S. Pat. No. 9,636,455, Issued May 2, 2017; and U.S. patent application Ser. No. 13/723,253, filed Dec. 21, 2012, and entitled System, Method, and Apparatus for Electronic Patient Care, now U.S. Publication No. US-2013-0191513-A1, published Jul. 25, 2013. U.S. patent application Ser. No. 14/873,515, may also be related to one or more of the following U.S. patent applications filed on even date herewith, all of which are hereby incorporated herein by reference in their entireties: PCT Application Serial No. PCT/US12/71131, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Dispensing Oral Medications; PCT Application Serial No. PCT/US12/71490, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Infusing Fluid; PCT Application Serial No. PCT/US12/71142, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Monitoring, Regulating, or Controlling Fluid Flow; and PCT Application Serial No. PCT/US12/71112, filed Dec. 21, 2012 and entitled System, Method, and Apparatus for Estimating Liquid Delivery.   
BACKGROUND
Relevant Field
The present disclosure relates to infusing fluid. More particularly, the present disclosure relates to a system, method and apparatus for infusing fluid into a patient, e.g., using a pump.
Description of Related Art
Providing patient care in a hospital generally necessitates the interaction of numerous professionals and caregivers (e.g., doctors, nurses, pharmacists, technicians, nurse practitioners, etc.) and any number of medical devices/systems needed for treatment of a given patient. Despite the existence of systems intended to facilitate the care process, such as those incorporating electronic medical records (âEMRâ) and computerized provider order entry (âCPOEâ), the process of providing comprehensive care to patients including ordering and delivering medical treatments, such as medications, is associated with a number of non-trivial issues.
Peristaltic pumps are used in a variety of applications such as medical applications, especially fluid transfer applications that would benefit from isolation of fluid from the system and other fluids. Some peristaltic pumps work by compressing or squeezing a length of flexible tubing. A mechanical mechanism pinches a portion of the tubing and pushes any fluid trapped in the tubing in the direction of rotation. There are rotary peristaltic pumps and finger peristaltic pumps.
Rotary peristaltic pumps typically move liquids through flexible tubing placed in an arc-shaped raceway. Rotary peristaltic pumps are generally made of two to four rollers placed on a roller carrier driven rotationally by a motor. A typical rotary peristaltic pump has a rotor assembly with pinch rollers that apply pressure to the flexible tubing at spaced locations to provide a squeezing action on the tubing against an occlusion bed. The occlusion of the tubing creates increased pressure ahead of the squeezed area and reduced pressure behind that area, thereby forcing a liquid through the tubing as the rotor assembly moves the pinch rollers along the tubing. In order to operate, there must always be an occlusion zone; in other words, at least one of the rollers is always pressing on the tube.
Finger peristaltic pumps are made of a series of fingers moving in cyclical fashion to flatten a flexible tube against a counter surface. The fingers move essentially vertically, in wave-like fashion, forming a zone of occlusion that moves from upstream to downstream. The last fingerâthe furthest downstreamâraises up when the first fingerâthe furthest upstreamâpresses against the counter surface. The most commonly used finger pumps are linear, meaning that the counter surface is flat and the fingers are parallel. In this case, the fingers are controlled by a series of cams arranged one behind another, each cam cooperating with a finger. These cams are placed helically offset on a shared shaft driven rotationally by a motor. There are also rotary-finger peristaltic pumps, which attempt to combine the advantages of roller pumps with those of finger pumps. In this type of pump, the counter surface is not flat, but arc-shaped, and the fingers are arranged radially inside the counter surface. In this case, a shared cam with multiple knobs placed in the center of the arc is used to activate the fingers.
SUMMARY
A peristaltic pump, and related system method are provided. The peristaltic pump includes a cam shaft, first and second pinch-valve cams, first and second pinch-valve cam followers, a plunger cam, a plunger-cam follower, a tube receiver, and a spring-biased plunger. The first and second pinch-valve cams are coupled to the cam shaft. The first and second pinch-valve cam followers each engage the first and second pinch-valve cams, respectively. The plunger cam is coupled to the cam shaft. The plunger-cam follower engages the plunger cam. The tube receiver is configured to receive a tube. The spring-biased plunger is coupled to the plunger-cam follower such that the expansion of the plunger cam along a radial angle intersecting the plunger-cam follower as the cam shaft rotates pushes the plunger cam follower towards the plunger and thereby disengages the spring-biased plunger from the tube. A spring coupled to the spring-biased plunger biases the spring-biased plunger to apply the crushing force to the tube.
In some embodiments, a slide occluder includes an RFID tag and the infusion pump includes an RFID interrogator. A processor associated with (or in) the infusion pump interrogates the RFID tag to determine if the slide occluder is authorized for use. For example, the RFID tag may have an encryption key and/or authorized identification value.
In some embodiments, a cam profile for an infusion pump may be shaped such that rotation in any direction causes forward flow.
In some embodiments, an infusion pump may include a downstream occluder to create a smooth fluid flow to the patient.
In some embodiments, the infusion pump may automatically prime, e.g., the tube may have an RFID tag and/or a barcode that may be read by the pump, which the pump uses to estimate a priming volume of the downstream tube automatically (for fluid flow estimation, etc.)
In some embodiments, an infusion pump includes a resistive element that is compressed against a tube. The infusion pump estimates the fluid pressure in accordance with the resistance.
In some embodiments, the infusion pump includes a temperature sensor to estimate the temperature of the fluid within the tube. The infusion pump may correct for the temperature of the tube and/or fluid in its fluid flow calculation (e.g., the delta fluid estimation described below).
In some embodiments, a display on a pump UI will display instructions how to install the slide occluder (e.g., when the ID in an RFID tag in an occluder is an unauthorized ID, for example).
In some embodiments, an electronics module is attachable to an infusion pump to control the pump. The electronics module may include an RF transceiver, a battery, and a control component.
In some embodiment of the present disclosure, a peristaltic pump includes a cam shaft, first and second pinch-valve cams, first and second pinch-valve cam followers, a plunger cam, a plunger-cam follower, a tube receiver, a spring-biased plunger, a position sensor, and a processor. The first and second pinch-valve cams are operatively coupled to the cam shaft. The first and second pinch-valve cam followers are configured to engage the first and second pinch-valve cams. The plunger cam is coupled to the cam shaft. The plunger-cam follower is configured to engage the plunger cam. The tube receiver is configured to receive a tube. The spring-biased plunger is coupled to the plunger-cam follower such that expansion of the plunger cam along a radial angle intersecting the plunger-cam follower as the cam shaft rotates pushes the plunger cam to disengage the spring-biased plunger from the tube. A spring is coupled to the spring-biased plunger to bias the spring-biased plunger to apply the crushing force to the tube. The position sensor is operatively coupled to the spring-biased plunger configured to determine a position of the spring-biased plunger. The processor is coupled to the position sensor and is configured to estimate fluid flow of fluid within the tube utilizing the position using the position sensor.
The pump may include an angle sensor operatively coupled to the cam shaft configured to determine an angle of rotation of the cam shaft.
The processor determines the first static region by identifying a peak movement of the plunger as measured by the position sensor and identifies the second static region to be after the identified peak. The processor may determine the first static region by identifying the first static region within a predetermined range of angles as indicated by the angle sensor. The processor may determine the second static region by identifying the second static region within a second predetermined range of angles as indicated by the angle sensor. The processor may determine the first and second static regions by measuring position sensor at predetermined angles as indicated by the angle sensor.
The processor may compare a first static region measured by the position sensor to a second static region measured by the position sensor to estimate the fluid flow. The processor may determine the first static region by identifying a peak of the movement of the position sensor and identifying the first static region after the identified peak. The processor may determine the second static region by identifying an end of the first static region.
In some embodiments, the pump also includes a balancer cam, a balancer-cam follower, and a balancer spring configured to apply a force against the balancer-cam follower and thereby apply a force from the balancer-cam follower to the balancer cam. The balancer cam may be shaped to reduce a peak torque of the cam shaft as the cam shaft rotates around its axis of rotation.
The pump may also include an electric motor operatively coupled to the cam shaft to apply a rotational torque to the cam shaft. The electric motor may be a stepper motor, a DC motor, a brushless DC motor, a brushed DC motor, an AC motor, a polyphase induction motor, an electric motor with at least one permanent magnet coupled to a stator or a rotor, and an induction motor.
In another embodiment of the present disclosure, a pump includes: a first layer; and a second layer at least partially disposed adjacent to the first layer defining an inlet fluid path, a bubble chamber, and an outlet fluid path. The inlet fluid path is in fluid communication with the bubble chamber and the outlet fluid path is in fluid communication with the bubble chamber. The pump also includes an assembly having a variable-volume chamber, a reference chamber, and an acoustic port in operative communication with the variable-volume and reference chambers such that the variable-volume chamber includes an opening disposed around the bubble chamber on at least one of the first and a second layers.
The pump may include a plunger positioned to engage the bubble chamber.
The pump may include source of pressure and a fluid port coupled to the reference chamber such that the source of pressure is in fluid communication with the fluid port to apply at least one of a negative pressure and a positive pressure thereto.
In some embodiments, the pump also includes: (1) a reference speaker disposed within the reference chamber; a reference microphone disposed within the reference chamber; and a variable-volume microphone disposed within the variable-volume chamber.
The pump may include a processor in operative communication with the reference speaker, and the reference and variable-volume microphones. The processor may be configured to control the speaker to generate a plurality of frequencies and sense the frequencies through the reference and variable-volume microphones to estimate a volume of the variable volume using the sensed frequencies from the reference and variable-volume microphones. The processor may be further configured to estimate a flow rate of the pump using the estimated volume of the variable volume.
In another embodiment of the present disclosure, a flow rate meter includes: (1) a first layer; (2) a second layer at least partially disposed adjacent to the first layer defining an inlet fluid path, a bubble chamber, and an outlet fluid path, wherein the inlet fluid path is in fluid communication with the bubble chamber and the outlet fluid path is in fluid communication with the bubble chamber; (3) an assembly having a variable-volume chamber, a reference chamber, and an acoustic port in operative communication with the variable-volume and reference chambers, wherein the variable-volume chamber includes an opening disposed around the bubble chamber on at least one of the first and a second layers; (4) a reference speaker disposed within the reference chamber; (5) a reference microphone disposed within the reference chamber; (6) a variable-volume microphone disposed within the variable-volume chamber; and (7) a processor in operative communication with the reference speaker, and the reference and variable-volume microphones. The processor is configured to control the speaker to generate a plurality of frequencies and sense the frequencies through the reference and variable-volume microphones. The processor is further configured to estimate a volume of the variable volume using the sensed frequencies from the reference and variable-volume microphones. The processor is further configured to estimate a flow rate using the estimated volume of the variable volume.
In yet another embodiment of the present disclosure, a peristaltic pump includes a housing a motor, a cam shaft, a plunger, a pivot shaft, a plunger, a bias member, a position sensor, and a processor. The cam shaft is operatively coupled to the motor such that rotation of the motor rotates the cam shaft. The plunger cam is coupled to the cam shaft for rotation therewith. The pivot shaft is operatively coupled to the housing. The plunger is pivotally coupled to the pivot shaft, the plunger having a cam follower configured to engage the plunger cam of the cam shaft. The plunger is configured to pivot to a first position to compress a tube and to a second position away from the tube. The bias member is configured to bias the plunger to the first position to compress the tube. The position sensor coupled to the plunger to measure a position of the plunger. The processor is coupled to the position sensor to estimate a volume of fluid discharged from the tube when the bias member causes the plunger to move towards the first position.
The plunger and plunger cam may be configured to compress the tube using only a force of the bias member. The plunger cam may be configured to only retract the plunger to the second position. The plunger may be configured to engage the plunger cam such that the plunger cam does not force the plunger against the tube. The plunger may be any suitable shape, such as an L-shape or a U-shape, among other shapes.
The pump may further include an inlet valve and an outlet valve. The inlet valve, the outlet valve, the plunger and the plunger cam may be configured to compress the tube while the inlet and outlet valves are closed such that the processor can measure a first position of the plunger using the position sensor. The inlet valve, the outlet valve, the plunger and the plunger cam may be configured to open the outlet valve after the first position of the plunger is measured to discharge fluid out of the tube through the outlet valve. The processor may be configured to measure a second position of the plunger using the position sensor after the outlet valve is opened. The processor may compare the first measured position to the second measured position to determine an amount of fluid discharged through the outlet valve. The inlet valve and the outlet value may be spring biased against the tube.
The inlet valve may include an inlet-valve cam follower configured to interface an inlet-valve cam coupled to the cam shaft. The outlet valve may include an outlet-valve cam follower configured to interface an outlet-valve cam coupled to the cam shaft.
In another embodiment of the present disclosure, a pump includes a housing, a door, a carrier, and a lever. The housing has a first slot. The door is pivotally coupled to the housing and has a platen configured to receive a tube. The door is configured to have a closed position and an open position. The door includes a second slot. The carrier has a pivot defining first and second portions pivotally coupled together. The first portion is slidingly disposed within the first slot of the housing, and the second portion is slidingly disposed within the second slot of door. The lever handle is pivotally coupled to the door and is operatively coupled to the carrier.
In some embodiments, when the door is open, the first portion of the carrier is disposed within the first slot and the second portion of the carrier is disposed within the second slot, and the first and second portions of the carrier are disposed orthogonal to each other away from a pivot point when the door is open.
The peristaltic pump may be configured such that when the door is shut, the first and second portions of the carrier are positioned adjacent to each other such that the carrier is slidable within the first and second slots as the lever handle moves.
The second portion may be configured to receive a slide occluder coupled to the tube in the occluded position when the door is in the open position. The door and lever handle may be configured such that when the door is in the closed position, movement of the lever handle moves the first and second portions of the carrier towards the first slot to thereby move the slide occluder into the unoccluded position.
In some embodiments, a plunger is configured to compress the tube in the platen when the door is closed. The lever handle is operatively coupled to the plunger to lift the plunger away from the tube when the lever handle is in an open position and to actuate the plunger towards the tube when the lever handle is in a closed position.
The second portion may be configured to receive a slide occluder coupled to the tube in the occluded position when the door is in the open position. In some embodiments, the door may includes a leaf spring such that the door is configured to latch onto the housing when the door is in the closed position and the lever handle is pivoted against the door such that the leaf spring compresses the door against the housing.
In some additional embodiment, a pump includes: (1) a motor means for rotating; (2) a cam means coupled to the motor means for rotating; (3) a plunger means for compressing against a tube; and (4) a volume measurement means for estimating a volume of fluid discharged through the tube.

BRIEF DESCRIPTION OF THE DRAWINGS
These and other aspects will become more apparent from the following detailed description of the various embodiments of the present disclosure with reference to the drawings wherein:
 FIG. 1 shows block diagram of a system for infusing liquid in accordance with an embodiment of the present disclosure;
 FIG. 2 shows a block diagram of an infusion site monitor of the system of FIG. 1 in accordance with an embodiment of the present disclosure;
 FIG. 3 shows a block diagram of a pump for infusing liquid of the system of FIG. 1 in accordance with an embodiment of the present disclosure;
 FIG. 4 shows a drip-chamber holder receiving a drip chamber, and the drip-chamber holder includes a flow meter and a free-flow detector in accordance with an embodiment of the present disclosure;
 FIG. 5 shows the drip-chamber holder of FIG. 4 with the door open in accordance with an embodiment of the present disclosure;
 FIG. 6 shows a block diagram of another drip-chamber holder in accordance with another embodiment of the present disclosure;
 FIG. 7 shows a ray diagram illustrating the diameter of a blur circle to illustrate aspects of the cameras of the drip-chamber holder of FIGS. 4 and 5 in accordance with an embodiment of the present disclosure;
 FIG. 8 is a graphic illustrating the blur circle as calculated for a variety of lens-to-focal plane separations and lens-to-image separations for the cameras of the drip-chamber holder of FIGS. 4 and 5 in accordance with an embodiment of the present disclosure;
 FIG. 9 is a graphic illustrating the blur circle divided by pixel size when a 20 millimeter focal length lens of the cameras of the drip-chamber holder of FIGS. 4 and 5 is used in accordance with an embodiment of the present disclosure;
 FIG. 10 is a graphic illustrating the blur circle divided by pixel size when a 40 millimeter focal length lens of the cameras of the drip-chamber holder of FIGS. 4 and 5 is used in accordance with an embodiment of the present disclosure;
 FIG. 11 shows a table illustrating the corresponding fields of view about the optical axis for the corners of the two configurations of FIGS. 9 and 10 in accordance with an embodiment of the present disclosure;
 FIG. 12 is a block diagram of an imaging system of the cameras of the drip-chamber holder of FIGS. 4 and 5 in accordance with an embodiment of the present disclosure;
 FIG. 13 is a graphic illustration of an image captured by the camera of the system of FIG. 12 in accordance with an embodiment of the present disclosure;
 FIG. 14 is a block diagram of an imaging system of the cameras of the drip-chamber holder of FIGS. 4 and 5 in accordance with an embodiment of the present disclosure;
 FIG. 15 is a graphic illustration of an image captured by the camera of FIG. 14 when a free flow condition exists in accordance with an embodiment of the present disclosure;
 FIG. 16 is a graphic illustration of an image captured by the camera of FIG. 14 for use as a background image in accordance with an embodiment of the present disclosure;
 FIG. 17 is a graphic illustration of an image captured by the camera when drops are being formed within the drip chamber of FIG. 14 in accordance with an embodiment of the present disclosure;
 FIG. 18 is a graphic illustration of an image captured by the camera of FIG. 14 for use as a background image in accordance with an embodiment of the present disclosure;
 FIG. 19 is a graphic illustration of a difference between the images of FIGS. 17 and 18 with additional processing in accordance with an embodiment of the present disclosure;
 FIG. 20 is a graphic representation of the image processing performed using FIGS. 17-19 to determine if a free flow condition exists in accordance with an embodiment of the present disclosure;
 FIG. 21 is a graphic illustration of an image captured by the camera when a free flow condition exists thereby forming a stream within the drip chamber of FIG. 14 in accordance with an embodiment of the present disclosure;
 FIG. 22 is a graphic illustration of an image captured by the camera of FIG. 14 for use as a background image in accordance with an embodiment of the present disclosure;
 FIG. 23 is a graphic illustration of a difference between the images of FIGS. 20 and 21 with some additional processing for use in detecting a free flow condition in accordance with an embodiment of the present disclosure;
 FIG. 24 is a graphic representation of the image processing performed using FIGS. 21-23 to determine if a free flow condition exists in accordance with an embodiment of the present disclosure;
 FIG. 25 illustrates a template for pattern matching to determine if a free flow condition exits using FIGS. 17-19 or FIGS. 21-23 in accordance with an embodiment of the present disclosure;
 FIG. 26 is a graphic illustration of a difference between a reference image and an image containing a steam processed with edge detection and line detection for use in detecting a free flow condition in accordance with an embodiment of the present disclosure;
 FIG. 27 is a graphic illustration of an image captured by the camera when a free flow condition exists thereby forming a stream within the drip chamber of FIG. 14 in accordance with an embodiment of the present disclosure;
 FIG. 28 is a block diagram of an imaging system for use with the drip-chamber holder of FIGS. 4-5 or FIG. 6 having a back pattern with stripes and a light source shining on the stripes from an adjacent location to a camera in accordance with an embodiment of the present disclosure;
 FIG. 29 is a block diagram of an imaging system for use with the drip-chamber holder of FIGS. 4-5 or FIG. 6 having a back pattern with stripes and a light source shining on the stripes from behind the back pattern relative to an opposite end to a camera in accordance with an embodiment of the present disclosure;
 FIG. 30 shows an image from the camera of FIG. 29 when a drop distorts the back pattern of FIG. 26 in accordance with an embodiment of the present disclosure;
 FIG. 31 is a block diagram of an imaging system for use with the drip-chamber holder of FIGS. 4-5 or FIG. 6 having a back pattern with a checkerboard pattern and a light source shining on the stripes from behind the back pattern relative to an opposite end to a camera in accordance with an embodiment of the present disclosure;
 FIG. 32 shows an image from the camera of FIG. 31 when a drop distorts the back pattern of FIG. 26 in accordance with an embodiment of the present disclosure;
 FIG. 33 shows a block diagram of an air detector using a camera in accordance with an embodiment of the present disclosure;
 FIG. 34 shows a matching template for use in air detection in accordance with an embodiment of the present disclosure;
 FIG. 35 illustrates an image captured by the camera of system of FIG. 33 for detecting that no tube is within a cavity in accordance with an embodiment of the present disclosure;
 FIG. 36 illustrates an image captured by the camera of the system of FIG. 33 for detecting air bubbles in accordance with an embodiment of the present disclosure;
 FIG. 37 illustrates an image captured by the camera of the system of FIG. 33 for detecting blood in accordance with an embodiment of the present disclosure;
 FIG. 38 illustrates the image of FIG. 37 that has undergone image processing for detecting a threshold amount of red for detecting blood in accordance with an embodiment of the present disclosure;
 FIG. 39 shows an infiltration detector in accordance with an embodiment of the present disclosure;
 FIG. 40 shows a graphic illustrating the optical absorption of oxygenated and de-oxygenated hemoglobin in accordance with an embodiment of the present disclosure;
 FIG. 41 shows another infiltration detector in accordance with another embodiment of the present disclosure;
 FIG. 42 shows a perspective view of an occluder in accordance to an embodiment of the present disclosure;
 FIG. 43 shows a side view of the occluder of FIG. 42 in accordance to an embodiment of the present disclosure;
 FIG. 44 shows a side view of the occluder of FIG. 42 in operation in accordance to an embodiment of the present disclosure;
 FIG. 45 shows a side view of a valve for use in a cassette in accordance with an embodiment of the present disclosure;
 FIG. 46 shows a top view of the valve of FIG. 45 in accordance with an embodiment of the present disclosure;
 FIG. 47 shows another side view of the valve of FIG. 45 installed within a cassette in accordance with an embodiment of the present disclosure;
 FIG. 48 shows a sliding valve having an inclined plane to provide sealing in accordance with an embodiment of the present disclosure;
 FIG. 49 shows a side view of the sliding valve of FIG. 48 in accordance with an embodiment of the present disclosure;
 FIG. 50 shows the mount of the sliding valve of FIGS. 48-49 in accordance with an embodiment of the present disclosure;
 FIGS. 51-55 show a vent for a reservoir in accordance with an embodiment of the present disclosure;
 FIGS. 56-58 illustrate the stages of a flow meter in accordance with an embodiment of the present disclosure;
 FIG. 59 shows a diagram of a disposable portion of a flow meter in accordance with an embodiment of the present disclosure;
 FIGS. 60-62 show several views of a single-sided disposable portion of a flow meter in accordance with an embodiment of the present disclosure;
 FIGS. 63-65 show several views of a double-sided disposable portion of a flow meter in accordance with an embodiment of the present disclosure;
 FIGS. 66-68 show several views of a three-layer, opposite-sided, disposable portion of a flow meter in accordance with an embodiment of the present disclosure;
 FIG. 69 shows a top view of another disposable portion of a flow meter in accordance with another embodiment of the present disclosure;
 FIG. 70 shows a flow rate meter including a full acoustic volume sensing (âAVSâ) clam shell assembly and a single-sided disposable portion in accordance with an embodiment of the present disclosure;
 FIG. 71 shows a side view of flow rate meter including a double-sided AVS assembly with integral perimeter seal valves in accordance with an embodiment of the present disclosure;
 FIG. 72 shows a side view of another flow rate meter including a single-sided AVS assembly with surrounding AVS chambers in accordance with another embodiment of the present disclosure;
 FIG. 73 shows a side view of yet another flow rate meter including two piston valves in accordance with another embodiment of the present disclosure;
 FIG. 74 shows a flow rate meter having top and bottom AVS assemblies which provide a semi-continuous flow in accordance with an embodiment of the present disclosure;
 FIG. 75 shows a flow rate meter having two in-line AVS assemblies in accordance with an embodiment of the present disclosure;
 FIG. 76 shows a membrane pump having a negative pressure source in accordance with an embodiment of the present disclosure;
 FIG. 77 shows a membrane pump having negative and positive pressure sources in accordance with an embodiment of the present disclosure;
 FIG. 78 shows a optical-sensor based flow rate meter in accordance with an embodiment of the present disclosure;
 FIG. 79 shows a pressure-controlled membrane pump in accordance with an embodiment of the present disclosure;
 FIGS. 80-82 show a diagram of a legend for use in conjunction with FIGS. 79 and 83-98 in accordance with an embodiment of the present disclosure;
 FIG. 83 shows a flow-controlled membrane pump in accordance with an embodiment of the present disclosure;
 FIG. 84 shows a state diagram of the operation of the flow-controlled membrane pump of FIG. 83 in accordance with an embodiment of the present disclosure;
 FIG. 85 shows the flow-controlled membrane pump of FIG. 83 illustrating the operation of the valves when in the Idle state of the state diagram of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 86 shows a more detailed view of the idle state of the state diagram of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIGS. 87-88 show the flow-controlled membrane pump of FIG. 83 in use during the positive pressure valve leak test state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 89 shows a more detailed view of the positive pressure valve leak test state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIGS. 90-91 show the flow-controlled membrane pump of FIG. 83 in use during the negative pressure valve leak test state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 92 shows a more detailed view of the negative pressure valve leak test state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 93 shows the flow-controlled membrane pump of FIG. 83 in use during the fill state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 94 shows a more detailed view of the fill state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 95 shows the flow-controlled membrane pump of FIG. 83 in use during an AVS measurement in accordance with an embodiment of the present disclosure;
 FIG. 96 shows a more detailed view of the AVS measurement state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 97 shows the flow-controlled membrane pump of FIG. 83 in use during the emptying state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 98 shows a more detailed view of the emptying state of FIG. 84 in accordance with an embodiment of the present disclosure;
 FIG. 99 shows a membrane pump having an elastic membrane that is flush with a disposable portion and applies a force to a liquid in accordance with an embodiment of the present disclosure;
 FIGS. 100-101 show two embodiments of lung pumps in accordance with embodiments of the present disclosure;
 FIGS. 102-104 show several gaskets for sealing a lung pump in accordance with additional embodiments of the present disclosure;
 FIG. 105 shows another lung pump in accordance with another embodiment of the present disclosure;
 FIGS. 106-112 illustrate the operation of a piston pump while performing various checks in accordance with an embodiment of the present disclosure;
 FIGS. 113 and 114 illustrate a piston pump in accordance with another embodiment of the present disclosure;
 FIGS. 115 and 116 show two views of a cassette having several membrane pumps of FIGS. 113 and 114 in accordance with an embodiment of the present disclosure;
 FIG. 117 shows a cassette having a membrane pump and volcano valves in accordance with an embodiment of the present disclosure;
 FIG. 118 shows a roller mechanism of a cassette-based pump in accordance with an embodiment of the present disclosure;
 FIG. 119 shows the fluid paths of a cassette-based pump for use with the roller mechanism of FIG. 118 in accordance with an embodiment of the present disclosure;
 FIG. 120 shows the fluid paths of a cassette-based pump for use with the roller mechanism of FIG. 118 in accordance with an embodiment of the present disclosure;
 FIG. 121 shows the stages of an infiltration test using a roller in accordance with an embodiment of the present disclosure;
 FIG. 122 shows the stages of an infiltration test using a piston in accordance with an embodiment of the present disclosure;
 FIGS. 123 and 124 show a cell-base reservoir in accordance with an embodiment of the present disclosure;
 FIGS. 125 and 126 show a tube-based reservoir in accordance with an embodiment of the present disclosure;
 FIG. 127 shows several stages illustrating a method for operating a plunger pump in conjunction with an AVS assembly in accordance with an embodiment of the present disclosure;
 FIG. 128 shows several stages illustrating a method for operating a plunger pump in conjunction with an AVS assembly in accordance with another embodiment of the present disclosure;
 FIG. 129 shows several stages illustrating a method for using a plunger pump having an AVS assembly in accordance with an embodiment of the present disclosure;
 FIG. 130 shows several stages illustrating a method for using a plunger pump having an AVS assembly in accordance with an embodiment of the present disclosure;
 FIG. 131 shows several stages illustrating a method for using a plunger pump having an AVS assembly in accordance with an embodiment of the present disclosure;
 FIG. 132 shows a plunger pump with an actuator inside the variable volume for use with a standard IV set tubing in accordance with an embodiment of the present disclosure;
 FIG. 133 shows several views of a cam-driven linear peristaltic pump having pinch valves and a plunger inside a variable volume in accordance with an embodiment of the present disclosure;
 FIG. 134 shows a plunger pump for use within a standard IV set tubing with an actuator outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 135 shows several views of a cam-driven linear peristaltic pump having pinch valves and a plunger inside a variable volume with a corresponding cam mechanism outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 136 shows a plunger pump having a plunger inside a variable volume with an actuator outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 137 shows a cam-driven linear peristaltic pump having a plunger inside a variable volume with a corresponding cam mechanism outside of the variable volume and pinch valves on the housing of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 138 shows a plunger pump having a plunger inside a variable volume and pinch valves outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 139 shows several views of a cam-driven linear peristaltic pump having a plunger inside a variable volume with a corresponding cam mechanism and pinch valves outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 140 illustrates occlusion detection using a plunger pump having an AVS assembly and a spring-biased pinching mechanism inside the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 141 shows a pump with a spring-loaded plunger within a variable volume of an AVS assembly with an actuated plunger outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 142 shows a linear peristaltic pump with pinch valves and a cam shaft disposed within a variable volume of an AVS assembly having spring-biased pinching mechanism disposed therein, and a plunger and a pinch valve outside of the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 143 shows a linear peristaltic pump with pinch valves and a plunger disposed outside of a variable volume of an AVS assembly in accordance with an embodiment of the present disclosure;
 FIG. 144 shows a the stages of a plunger pump having a an optical sensor or camera to measure the volume within a tube residing within a chamber in accordance with an embodiment of the present disclosure;
 FIG. 145 shows a plunger pump having a chamber having an optical sensor to estimate fluid volume of a tube having a spring-biased pinch mechanism around the tube and a plunger and pinch valves in accordance with an embodiment of the present disclosure;
 FIG. 146 shows a plunger pump having a chamber with an optical sensor to estimate fluid volume of a tube having a spring-biased pinch mechanism around the tube and a plunger and pinch valves outside the chamber in accordance with an embodiment of the present disclosure;
 FIG. 147 shows several views of a plunger pump having an AVS assembly with pinch valve disposed within the variable volume of the AVS assembly, and a plunger and pinch valve disposed outside the variable volume in accordance with an embodiment of the present disclosure;
 FIG. 148 shows an two cross-sectional views of the plunger pump of FIG. 147 in accordance with an embodiment of the present disclosure;
 FIG. 149 shows an alternative two cross-sectional views of the plunger pump of FIG. 147 in accordance with an embodiment of the present disclosure;
 FIG. 150 illustrates the stages during normal operation of a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIG. 151 illustrates the stages for detecting an occlusion for a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIG. 152 illustrates the stages for leakage detection for a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIG. 153 illustrates the stages for detecting a failed valve and/or bubble dection for a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIG. 154 illustrates the stages for empty reservoir detection and/or upstream occlusion detection for a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIG. 155 illustrates the stages for free-flow prevention for a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIG. 156 illustrates the stages for a negative pressure valve check for a plunger pump having a spring-biased plunger in accordance with an embodiment of the present disclosure;
 FIGS. 157-158 show views of a plunger pump having a cam shaft 671 that traverses the variable volume of an AVS assembly in accordance with an embodiment of the present disclosure;
 FIGS. 159-162 illustrate several cam profiles in accordance with several embodiments of the present disclosure;
 FIG. 163 illustrates a peristaltic pump having a plunger and a pinch valves outside of an AVS chamber with two pinch valves on the interface of the ACS chamber in accordance with an embodiment of the present disclosure;
 FIG. 164 illustrates several stages of operation of the peristaltic pump of FIG. 163 in accordance with an embodiment of the present disclosure;
 FIG. 165 illustrates a peristaltic pump having two plungers external to an AVS chamber in accordance with an embodiment of the present disclosure;
 FIG. 166 illustrate several stages of the peristaltic pump of FIG. 165 in accordance with an embodiment of the present disclosure;
 FIG. 167 illustrates a peristaltic pump having a plunger with a linear sensor in accordance with an embodiment of the present disclosure;
 FIG. 168 illustrates a graphic of data from the linear sensor of the peristaltic pump of FIG. 167 in accordance with an embodiment of the present disclosure;
 FIG. 169 illustrates the stages of the peristaltic pump of FIG. 169 in accordance with an embodiment of the present disclosure;
 FIG. 170 illustrates the detection of an occlusion condition vis-Ã -vis a non-occluded condition in accordance with an embodiment of the present disclosure;
 FIG. 171 illustrates the detection of a valve leak vis-Ã -vis a full-valve-sealing condition in accordance with an embodiment of the present disclosure;
 FIG. 172 illustrates the detection of a too much air in the tube or a valve fail vis-Ã -vis a proper operation in accordance with an embodiment of the present disclosure;
 FIG. 173 shows a block diagram that illustrates the electronics of a peristaltic pump in accordance with another embodiment of the present disclosure;
 FIG. 174 shows a block diagram that illustrates the electronics of a peristaltic pump in accordance with another embodiment of the present disclosure;
 FIG. 175 shows a perspective view of peristaltic pump in accordance with an embodiment of the present disclosure;
 FIGS. 176-180 show data from several AVS sweeps in accordance with an embodiment of the present disclosure;
 FIGS. 181, 182A-182C, and 183A-183C show several side views of a cam mechanism of the peristaltic pump of FIG. 175 in accordance with an embodiment of the present disclosure;
 FIG. 184 shows a sectional view of the pinch valves and plunger of the peristaltic pump of FIG. 175 in accordance with an embodiment of the present disclosure;
 FIG. 185 show two views of a plunger with flexible fingers to grip a tube in accordance with an embodiment of the present disclosure;
 FIG. 186 shows an embodiment of a cam mechanism of a peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 187 shows an embodiment of a cam mechanism of a peristaltic pump in accordance with an embodiment of the present disclosure;
 FIGS. 188-189 and 190A-190C show several views of a peristaltic pump in accordance with the present disclosure;
 FIGS. 191-195 show several views of a peristaltic pump in accordance with an additional embodiment of the present disclosure;
 FIGS. 196A-196B illustrate torque on a cam shaft of a peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 197 illustrates a cam profile for several cams for a peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 198 shows various feedback modes of a peristaltic pumps in accordance with an embodiment of the present disclosure;
 FIG. 199 shows a graph illustrating data of a linear sensor used to estimate fluid flow in accordance with an embodiment of the present disclosure;
 FIGS. 200-206 show several perspective views of a peristaltic pump having a angular members interfacing into a cam in accordance with an embodiment of the present disclosure;
 FIGS. 207-221 illustrate the operation of a slide occluder of the peristaltic pump of FIGS. 200-206 in accordance with an embodiment of the present disclosure;
 FIG. 222-223 shows a two views of a peristaltic pump in accordance with an embodiment of the present disclosure;
 FIGS. 224-238 shows several views of the peristaltic pump of FIGS. 222-223 illustrating the operation of the slide occluder in accordance with an embodiment of the present disclosure;
 FIGS. 239-245 show several view of the peristaltic pump of FIGS. 222-238 in accordance with an embodiment of the present disclosure;
 FIGS. 246-250 show several views of an integrated cam and motor in for use in an peristaltic pump disclosed herein in accordance with another embodiment of the present disclosure;
 FIGS. 251-254 illustrate a camera sensor for use for measuring the position of a plunger and pinch valves of a peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 255 illustrates a peristaltic pump having L-shaped cam followers in an exploded view of the mechanical elements from the top of the pump;
 FIGS. 256A-256B illustrate the peristaltic pump having L-shaped cam followers in an exploded view of the mechanical elements from the bottom of the pump;
 FIG. 257 illustrates the peristaltic pump having L-shaped cam followers with a door open in an isometric view of the mechanical elements from the top of the pump;
 FIG. 258 illustrates the peristaltic pump having L-shaped cam followers in an exploded view showing the PCB, pump body, door, and a motor with a gear head;
 FIG. 259 illustrates the slide occluder inserted into the open door of the peristaltic pump having L-shaped cam followers;
 FIG. 260 illustrates the peristaltic pump having L-shaped cam followers with the door open and some elements removed to reveal the cam-shaft, pump and valves;
 FIG. 261 illustrates the insertion of the slide occluder into the open door of the peristaltic pump having L-shaped cam followers;
 FIGS. 262-263 shows an alternative door with the door half of an alternative split carriage;
 FIG. 264 illustrates the door, a lever and a slide carriage of the peristaltic pump having L-shaped cam followers in an exploded view;
 FIG. 265 illustrates the peristaltic pump having L-shaped cam followers with the door open in an isometric view of the mechanical elements from the bottom of the pump;
 FIG. 266 illustrates a cam-shaft of the peristaltic pump having L-shaped cam followers in an isometric view;
 FIG. 267 illustrates the plunger cam follower of the peristaltic pump having L-shaped cam followers in an isometric view from the front;
 FIG. 268 illustrates the plunger cam follower of the peristaltic pump having L-shaped cam followers in an isometric view from the back;
 FIG. 269 illustrates the valve cam follower of the peristaltic pump having L-shaped cam followers in an isometric view from a first side;
 FIG. 270 illustrates the valve cam follower of the peristaltic pump having L-shaped cam followers in an isometric view from a second side;
 FIG. 271 illustrates a outlet cam of the peristaltic pump having L-shaped cam followers in an orthographic view;
 FIG. 272 illustrates a pump cam of the peristaltic pump having L-shaped cam followers in an orthographic view;
 FIG. 273 illustrates a intake cam of the peristaltic pump having L-shaped cam followers in an orthographic view;
 FIG. 274 illustrates the plunger and valve cam followers of the peristaltic pump having L-shaped cam followers in an exploded view;
 FIG. 275 illustrates retainers for the springs on the cam followers of the peristaltic pump having L-shaped cam followers in an isometric view;
 FIG. 276 shows a cross-section of the pump including sections of the cam, plunger and platen;
 FIG. 277 shows a cross-sectional view of the plunger compressing the infusion tube against the platen;
 FIG. 278 illustrates the housing, cam shaft and cam followers of the peristaltic pump having L-shaped cam followers in an exploded view;
 FIG. 279 illustrates the upper and lower housing of the peristaltic pump having L-shaped cam followers in an isometric view;
 FIG. 280 illustrates the assembled upper and lower housing of the peristaltic pump having L-shaped cam followers in isometric views
 FIG. 281 illustrates the assembled upper and lower housing of the peristaltic pump having L-shaped cam followers in isometric views
 FIG. 282 illustrates the peristaltic pump having L-shaped cam followers with PCB removed to reveal magnets on the plunger and corresponding sensors on PCB;
 FIG. 283 illustrates the insertion of the slide occluder into the open door of the peristaltic pump having L-shaped cam followers;
 FIG. 284 illustrates the slide occluder inserted into the open door of the peristaltic pump having L-shaped cam followers;
 FIG. 285 illustrates the split-carriage in the open position;
 FIG. 286 illustrates the split-carriage in the closed position;
 FIG. 287 illustrates the peristaltic pump having L-shaped cam followers with the door partially closed and some elements removed to reveal the slide occluder in the closed split-carriage;
 FIG. 288 illustrates the multi-part link between the split carriage and the lever in an isometric view;
 FIG. 289 illustrates the peristaltic pump having L-shaped cam followers with the door closed and some elements removed to reveal the slide occluder in the closed split-carriage;
 FIGS. 290-293 illustrate four steps of closing the door of the peristaltic pump having L-shaped cam followers;
 FIG. 294 illustrates a lever on the door engaging a pin on the body of the peristaltic pump having L-shaped cam followers;
 FIG. 295 illustrates a spring element in the door of the peristaltic pump having L-shaped cam followers;
 FIG. 296 illustrates two latch hooks of the lever on the door of the peristaltic pump having L-shaped cam followers;
 FIG. 297 shows a vertical cross-sectional view of the peristaltic pump with L-shaped cam followers;
 FIG. 298 shows a horizontal cross-sectional view of the peristaltic pump with L-shaped cam followers;
 FIG. 299 illustrates a spring-pin engaging a detent on the lever latch hook in the closed position within the door of the peristaltic pump having L-shaped cam followers;
 FIG. 300 illustrates a spring-pin engaging a detent on the lever latch hook in the open position within the door of the peristaltic pump having L-shaped cam followers;
 FIG. 301 illustrates a slide-occluder detection lever displaced by the slide occluder when the door is on the peristaltic pump having L-shaped cam followers;
 FIG. 302 illustrates a latch hook detection lever displaced by the latch hook when the door is on the peristaltic pump having L-shaped cam followers;
 FIGS. 303-306 show several views of a patient bedside system in accordance with an embodiment of the present disclosure;
 FIG. 307 shows a close-up view of a portion of an interface of a clamp that is attachable to a pump shown in FIGS. 303-306 in accordance with an embodiment of the present disclosure;
 FIG. 308 shows another close-up view of another portion of the interface shown in FIG. 301 in accordance with an embodiment of the present disclosure;
 FIG. 309 shows a perspective view of a pump shown in FIGS. 303-306 in accordance with an embodiment of the present disclosure;
 FIG. 310 shows a perspective view of a pump shown in FIGS. 303-306 in accordance with an embodiment of the present disclosure;
 FIG. 311 shows a perspective view of a pump with the graphic user interface shown on the screen in accordance with an embodiment of the present disclosure;
 FIG. 312 shows an example infusion programming screen of the graphic user interface in accordance with an embodiment of the present disclosure;
 FIG. 313 shows an example infusion programming screen of the graphic user interface in accordance with an embodiment of the present disclosure;
 FIG. 314 shows an example infusion programming screen of the graphic user interface in accordance with an embodiment of the present disclosure;
 FIG. 315 shows an example infusion programming screen of the graphic user interface in accordance with an embodiment of the present disclosure;
 FIG. 316 shows an example infusion programming screen of the graphic user interface in accordance with an embodiment of the present disclosure;
 FIG. 317 shows an infusion rate over time graphical representation of an example infusion in accordance with an embodiment of the present disclosure;
 FIG. 318 shows an infusion rate over time graphical representation of an example infusion in accordance with an embodiment of the present disclosure;
 FIG. 319 shows an infusion rate over time graphical representation of an example infusion in accordance with an embodiment of the present disclosure;
 FIG. 320 shows an infusion rate over time graphical representation of an example infusion in accordance with an embodiment of the present disclosure;
 FIG. 321 shows an infusion rate over time graphical representation of an example infusion in accordance with an embodiment of the present disclosure;
 FIG. 322 shows an example drug administration library screen of the graphic user interface in accordance with an embodiment of the present disclosure;
 FIG. 323 shows a schematic of a battery powered draw speaker;
 FIG. 324 illustrates an electrical block diagram of peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 325 illustrates the electrical block diagram of FIG. 324 with divisions for use with reference to FIGS. 325A-325G in accordance with an embodiment of the present disclosure;
 FIG. 325A-325G illustrates a detailed electrical block diagram of peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 326 presents a linear encoder signal over cam angle graph in accordance with an embodiment of the present disclosure;
 FIG. 327 illustrates a volume over time graph in accordance with an embodiment of the present disclosure;
 FIG. 328 illustrates a cam shaft angle over volume graph in accordance with an embodiment of the present disclosure;
 FIG. 329 illustrates a possible measured pressure vs. time trace of a delivery line downstream of peristaltic pump in accordance with an embodiment of the present disclosure;
 FIG. 330 is a state diagram in accordance with an embodiment of the present disclosure;
 FIG. 331 is a software block diagram in accordance with an embodiment of the present disclosure;
 FIG. 332 is a software block diagram in accordance with an embodiment of the present disclosure;
 FIG. 333 shows a feedback based control loop to control a motor of an infusion pump in accordance with an embodiment of the present disclosure;
 FIG. 334 shows a process diagram to illustrate the software operation of an infusion pump in accordance with an embodiment of the present disclosure; and
 FIGS. 335-336 shows two dual-band antennas for use with an infusion pump in accordance with an embodiment of the present disclosure.

DETAILED DESCRIPTION
 FIG. 1 shows a block diagram of a system 1 for infusing fluid. System 1 includes fluid reservoirs 2, 3, and 4 for infusing the fluid contained therein into a patient 5. The fluid reservoirs 2, 3, and 4 are gravity fed into drip chambers 7, 8, and 9, respectively. The drip chambers 7, 8, and 8 are respectively fed into flow meters 10, 11, and 12. From the flow meters 10, 11, and 12, the fluid is fed into free-flow detectors 13, 14, and 15, respectively.
System 1 also includes valves 16, 17, and 18 from a respective free-flow detector of the free-flow detectors 13, 14, and 15. Pumps 19, 20, and 21 receive fluid from valves 16, 17, and 18, and combine the fluid using a connector 22. The valves 16, 17, and 18 may be in wireless or wired communication with a respective pump 19, 20, and 21 to control the flow rate and/or discharge profile. For example, the pump 19 may communicate wirelessly with the valve 16 to adjust the opening and closing of the valve 16 to achieve a target flow rate, for example, when the pump 19 runs at a predetermined speed; the valves 16 may be downstream from the pump 19 in some embodiments.
Fluid from the connector 22 is fed into an occlusion detector 23 which is fed into an air detector 24. The occlusion detector 23 can detect when an occlusion exists within tubing of the system 1. The occlusion detector 23 may be a pressure sensor compressed against the tube such that increases beyond a predetermined threshold is indicative of an occlusion. The air detector 24 detects if air is present in the tubing, e.g., when flowing towards the patient 5. Prior to entering into an infusion site monitor 26, the fluid passes through a valve 25.
The monitoring client 6, in some embodiments, monitors operation of the system 1. For example, when an occlusion is detected by occlusion detector 23 and/or air is detected by the air detector 24, the monitoring client 6 may wirelessly communicate a signal to the valve 25 to shut-off fluid flow to the patient 5.
The monitoring client 6 may also remotely send a prescription to a pharmacy. The prescription may be a prescription for infusing a fluid using a fluid pump. The pharmacy may include one or more computers connected to a network (e.g., the internet) to receive the prescription and queue the prescription within the one or more computers. The pharmacy may use the prescription to compound the drug (e.g., using an automated compounding device coupled to the one or more computers or manually by a pharmacist viewing the queue of the one or more computers), pre-fill a fluid reservoir associated with an infusion pump, and/or program the infusion pump (e.g., a treatment regime is programmed into the infusion pump 19) at the pharmacy in accordance with the prescription. The fluid reservoir 2 may be automatically filled by the automated compounding device and/or the infusion pump 19 may be automatically programmed by the automated compounding device. The automated compounding device may generate a barcode, RFID tag 29 and/or data. The information within the barcode, RFID tag 29, and/or data may include the treatment regime, prescription, and/or patient information. The automated compounding device may: attach the barcode to the fluid reservoir 2 and/or the infusion pump 19; attach the RFID tag 29 to the fluid reservoir 2 and/or the infusion pump 19; and/or program the RFID tag 29 or memory within the fluid reservoir 2 or the infusion pump 19 with the information or data. The data or information may be sent to a database (e.g., electronic medical records) that associates the prescription with the fluid reservoir 2 and/or the infusion pump 19, e.g., using a serial number or other identifying information within the barcode, RFID tag 29, or memory.
The infusion pump 19 may have a scanner, e.g., an RFID interrogator that interrogates the RFID tag 29 or a barcode scanner that scans a barcode of the fluid reservoir 2, to determine that it is the correct fluid within the fluid reservoir 2, it is the correct fluid reservoir 2, the treatment programmed into the infusion pump 19 corresponds to the fluid within the fluid reservoir 2 and/or the fluid reservoir 2 and infusion pump 19 are correct for the particular patient (e.g., as determined from a patient's barcode, RFID 27, or other patient identification). For example, the infusion pump 19 may scan the RFID tag 29 of the fluid reservoir 2 and check if the serial number or fluid type encoded within the RFID tag 29 is the same as indicated by the programmed treatment within the infusion pump 19. Additionally or alternatively, the infusion pump 19 may interrogate the RFID tag 29 of the fluid reservoir 2 for a serial number and the RFID tag 27 of the patient 5 for a patient serial number, and also interrogate the electronic medical records to determine if the serial number of the fluid reservoir 19 within the RFID tag 29 matches a patient's serial number within the RFID tag 27 as indicated by the electronic medical records. Additionally or alternatively, the monitoring client 6 may scan the RFID tag 29 of the fluid reservoir 2 and an RFID tag of the infusion pump 19 to determine that it is the correct fluid within the fluid reservoir 2, it is the correct fluid reservoir 2, the treatment programmed into the infusion pump 19 corresponds to the fluid within the fluid reservoir 2, and/or the fluid reservoir 2 and infusion pump 19 are correct for the particular patient (e.g., as determined from a patient's barcode, RFID tag 27, electronic medical records, or other patient identification or information). Additionally or alternatively, the monitoring client 6 or the infusion pump 19 may interrogate an electronic medical records database and/or the pharmacy to verify the prescription or download the prescription, e.g., using a barcode serial number on the infusion pump 19 or fluid reservoir 2.
Additionally or alternatively, the flow from the pumps 19, 20, and 21 may be monitored and/or controlled by the monitoring client 6 to ensure safe drug delivery. The monitoring client 6 may scan a RFID tag 27 on a bracelet 28, and also RFID tags 29, 30, and 31 on the fluid reservoirs, 2, 3, and 4, respectively. The monitoring client 6 may download electronic medical records (âEMRâ) associated with the RFID tag 27 on the patient's 5 bracelet, and compare it to one or more prescriptions found in the EMR of the patient 5. If the EMR indicates that the fluid reservoirs 2, 3, and 4 contain the correct medication, a user can input into the monitoring client 6 a command to start pumping fluid through pumps 19, 20, and/or 21 into the patient 5.
The infusion site monitor 26 monitors the site at which the fluid is fed into the patient 5. The infusion site monitor 26 receives the fluid through an input port 408 and feeds the fluid to the patient 5 through an output port 409. As shown in FIG. 2, in some embodiments the infusion site monitor 5 optionally includes an air detector 410, an infiltration detector 32, a pressure sensor 33, a fluid-temperature sensor 34, and/or a patient temperature sensor 35. In some embodiments, the infusion site monitor 26 optionally includes an ambient air temperature sensor 35 and an RFID interrogator 41A.
The infusion site monitor 26 also includes a processor 37 and a memory 38. The memory 38 may include processor executable instructions configured for execution on the processor 37. The processor 37 is in operative communication with the air detector 410, the infiltration detector 32, the pressure sensor 33, the fluid-temperature sensor, the patient temperature sensor 35, the ambient air temperature sensor 36, the RFID interrogator 41A, the user input 39, and the buttons 40; for example, the processor 37 may be coupled to a bus, a parallel communication link, a serial communication link, a wireless communication link, and the like. Referring to FIGS. 1 and 2, information from the various circuitry of 410, 32, 33, 34, 35, 36, 39, 40, and/or 41 may be communicated to the monitoring client 6 via a wired or wireless communication link, e.g., WiFi, USB, serial, WiMax, Bluetooth, Zigbee, and the like.
In FIG. 1, in each of the pumps 19, 20, and 21, or the fluid reservoirs 2, 3, and 4 may include an upstream and/or downstream pressure generating source (e.g., an occluder, speaker, etc) to generate a pressure âsignatureâ that would travel along the line and into the other devices, e.g., pumping, monitoring, or metering devices. These pressure signatures may indicate the pressure in each of the lines, may be used to identify each line and coordinate the flow rates of the lines, and/or may indicate what the measured flow rate of the line should be. The pressure signature may be an ultrasonic signal generated by a piezoelectric ceramic that is modulated to encode information such as digital data or an analog signal, e.g., an acoustic carrier frequency with FM modulation, AM modulation, digital modulation, analog modulation, or the like.
For example, each of the pumps 19, 20, and 21 may transmit sound pressure down the IV line to the infusion site monitor 26 (which may include a transducer to detect these pressure waves) indicating to the infusion site monitor 26 the expected total flow rate therethrough. A flow rate meter 169 (see FIG. 2) may measure the liquid flow rate, and if the measured liquid flow rate deviates by a predetermined amount, the infusion site monitor 26 may issue an alarm and/or alert, e.g., the alarm may signal the valves 16, 17, 18, and 25 to close, and/or the monitoring client 6 may use the information for logging purposes and/or to cause the valves 16, 17, 18, and 25 to close.
Referring again to FIG. 2 and as previously mentioned, the processor 37 is in operative communication with user input 39 and one or more buttons 40. The infusion site monitor 26 may receive various user input 39 to signal the processor 37 to start monitoring treatment of the patient 5. Additionally or alternatively, the infusion site monitor 26 may interrogate the RFID 27 of the patient's 5 bracelet (see FIG. 1) to determine if the infusion site monitor 26 is coupled to the correct patient 5.
The air detector 410 is in operative communication with the processor 37. The air detector 410 can measure, estimate, and/or determine the amount of air entering into the infusion site monitor 26 via the input port 29. In some embodiments, when the processor 37 determines that air within the tube exceeds a predetermined threshold, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal valve 25 to shut off fluid flow to the patient 5. Additionally or alternatively, the processor 37 may communicate an alarm or an alert to the valve 25 or to one or more of the pumps 19, 20, and 21 to stop fluid flow when the air within the tube exceeds the predetermined threshold. The air detector 410 may be an ultrasonic air detector, an impedance-based air detector, and the like.
The infiltration detector 32 is in operative communication with the processor 37. The infiltration detector 32 can measure, estimate, and/or determine the amount of blood entering into the infusion site monitor 26 via the output port 30 during an infiltration test. In some embodiments, when the processor 37 determines that blood within the tube is less than a predetermined threshold during an infiltration test, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal the valve 25 to shut off fluid flow to the patient 5. Additionally or alternatively, the processor 37 may communicate an alarm or an alert to the valve 25 or to one or more of the pumps 19, 20, and 21 to stop fluid flow when the infiltration tests determines that an infiltration has occurred. The infiltration test may include reversing one or more of the pumps 19, 20, and/or 21 to determine if blood does flow into the infusion site monitor 26. When an infiltration has occurred, blood will not easily flow into the infusion site monitor 26. Thus, when fluid is pulled from the patient 5, blood should enter into the tube 41 with a predetermined minimum amount of backward pumping when no infiltration has occurred. The infiltration detector 32 may be CCD based, camera based, optical based, and the like.
The pressure sensor 33 is in operative communication with the processor 37. The pressure sensor 33 can measure, estimate, and/or determine the amount of pressure entering, exiting and/or flowing through the infusion site monitor 26 via the ports 29 and 30. In some embodiments, when the processor 37 determines that pressure in the tube exceeds a predetermined threshold and/or is below a predetermined threshold, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal valve 25 to shut off fluid flow to the patient 5. The pressure sensor 33 may be a resistive element that changes in resistance as a force is applied to the resistive element, the resistive element is stretched, and/or the resistive element is pulled. The resistive element may be wrapped around the tube 41 such that as the pressure of the fluid causes the tube 41 to expand, the resistance of the resistive element is measured and is associated with a pressure within the tube, e.g., the resistance may be measured and a look-up table may be used to look up an estimated pressure within the tube 41. In some embodiments, when the processor 37 determines that pressure within the tube is greater than a predetermined maximum value or less than predetermined minimum value, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal the valve 25 to shut off fluid flow to the patient 5. Additionally or alternatively, the processor 37 may communicate an alarm or an alert to the valve 25 or to one or more of the pumps 19, 20, and 21 to stop fluid flow when the processor 37 receives from the pressure sensor 33 to a measured pressure within the fluid line 41 greater than a predetermined maximum value or less than predetermined minimum value.
The fluid-temperature sensor 34 is in operative communication with the processor 37. The fluid-temperature sensor 34 can measure, estimate, and/or determine the temperature of the fluid within the tube 41. In some embodiments, when the processor 37 determines that temperature of the fluid within the tube 41 exceeds a predetermined threshold and/or is below a predetermined threshold, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal valve 25 to shut off fluid flow to the patient 5. In some embodiments, a user may override the alarm or alert, e.g., using a touch screen of the monitoring client 6. Additionally or alternatively, the processor 37 may communicate an alarm or an alert to the valve 25 or to one or more of the pumps 19, 20, and 21 to stop fluid flow when the processor 37 receives a estimated temperature of the fluid within the tube 41 indicating the fluid is above a predetermined threshold and/or is below a predetermined threshold. The fluid-temperature sensor 34 may utilize a temperature sensitive material, a positive temperature-coefficient material, a negative temperature-coefficient material, or other temperature sensor technology.
The patient temperature sensor 35 is in operative communication with the processor 37. The patient temperature sensor 35 can measure, estimate, and/or determine the temperature of the patient 5 (see FIG. 1). The temperature of the patient 5 may be used to determine the condition of the patient, compliance with a temperature affecting medication, or effect of a temperature affecting medication. The temperature of the patient 5 (a patient-condition parameter) may be communicated to the monitoring client 6 (see FIG. 1). In some embodiments, when the processor 37 determines that the temperature of the patient 3 exceeds a predetermined threshold or is below a predetermined threshold, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal valve 25 to shut off fluid flow to the patient 5, send an alert to a remote communicator, and/or notify a caregiver of the condition via an internal speaker 42 or vibration motor 43 within the infusion site monitor 26. Additionally or alternatively, the processor 37 may communicate an alarm or an alert to the valve 25 or to one or more of the pumps 19, 20, and 21 to stop fluid flow when the processor 37 receives an estimated temperature from the patient temperature sensor 35 that exceeds a predetermined threshold or is below a predetermined threshold. The patient temperature sensor 35 may utilize a temperature sensitive material, a positive temperature-coefficient material, a negative temperature-coefficient material, or other temperature sensor technology.
The ambient air temperature sensor 36 is in operative communication with the processor 37. The ambient air temperature sensor 36 can measure, estimate, and/or determine the temperature of the ambient air within the infusion site monitor 26, or in other embodiments, the temperate of the air outside of the infusion site monitor 26. An excessive ambient air temperature may be an indication of an electronic component failure, in some specific embodiments. In some embodiments, when the processor 37 determines that the temperature from the ambient air temperature sensor 36 exceeds a predetermined threshold or is below a predetermined threshold, the processor 37 communicates an alarm or alert to the monitoring client 6 (see FIG. 1) which can signal valve 25 to shut off fluid flow to the patient 5. Additionally or alternatively, the processor 37 may communicate an alarm or an alert to the valve 25 or to one or more of the pumps 19, 20, and 21 to stop fluid flow when the processor 37 receives an estimated temperature from the ambient temperature sensor 36 that exceeds a predetermined threshold or is below a predetermined threshold. The ambient air temperature sensor 36 may utilize a temperature sensitive material, a positive temperature-coefficient material, a negative temperature-coefficient material, or other temperature sensor technology.
Referring to the drawings, FIG. 3 shows a block diagram of a pump for infusing liquid of the system of FIG. 1 in accordance with an embodiment of the present disclosure. Although the pump 19 of FIG. 3 is described as being pump 19 of FIG. 1, the pump 19 of FIG. 3 may be one or more of the pumps 19, 20, and 21 of FIG. 1, or may be included within any sufficient pump disclosed herein.
Pump 19 includes a processor 37 coupled to a memory 38. The processor 37 is in operative communication with the memory 38 to receive processor executable instructions configured for execution on the processor 37. In some embodiments, the processor 37 is, optionally, in operative communication with the user input 39, the air detector 410, the fluid temperature sensor 34, valves 47, 49, 51 and 52, a flow meter 48, an actuator 54, an air filter 50, a drain chamber 53, and/or a pressure sensor 33.
The pump includes an actuator 54 which operates on fluid contained within tubing 56 flowing through the pump. The actuator 54 may directly operate on the tube 56, or may actuate against one or more membranes contained within the actuator 54. In some embodiments, the valves 47 and 49 cooperate with the actuator 54 to pump fluid, e.g., liquid, from the input port 44 to the output port 45 through the tube 56. In some embodiments of the present disclosure, the pump 19 contains no internal tubing and interfaces to external tubing.
The air filter 50 filters out air from the tube 56. In alternative embodiments, the air filter 50 is upstream from the air detector 410. Valve 52 can activate to allow air to enter in from the tube 56 into a drain chamber 53 via a diversion tube 57.
Referring to the drawings, FIGS. 4 and 5 show a drip-chamber holder 58 receiving a drip chamber 59. As described infra, the drip-chamber holder 58 includes a free-flow detector in accordance with an embodiment of the present disclosure. Additionally, alternatively, or optionally, the drip-chamber holder 58 may include a flow-rate meter in accordance with some embodiments of the present disclosure. FIG. 4 shows the drip chamber holder 58 with a shut door 62, and FIG. 5 shows the drip-chamber holder 58 with an open door 62. The drip chamber holder 58 may include the drip chamber 7, the flow meter 10, and the freeflow detector 13 of FIG. 1 integrated together, or some combination thereof. The drip chamber holder 58 includes a start button 60 and a stop button 61. The drip-chamber holder may include a valve to stop fluid from flowing therethrough or may signal another valve, e.g., valve 16 of FIG. 1, to stop the fluid from flowing.
The drip-chamber holder 58 optionally includes cameras 63 and 64 that can estimate fluid flow and/or detect free flow conditions. Although the drip-chamber holder 58 includes two cameras (e.g., 63 and 64), only one of the cameras 64 and 64 may be used in some embodiments. The cameras 63 and 64 can image a drop while being formed within the drip chamber 59 and estimate its size. The size of the drop may be used to estimate fluid flow through the drip chamber 59. For example, in some embodiments of the present disclosure, the cameras 63 and 64 use an edge detection algorithm to estimate the outline of the size of a drop formed within the drip chamber 59; a processor therein (see processor 90 of FIGS. 12 of 14, for example) may assume the outline is uniform from every angle of the drop and can estimate the drop's size from the outline. In the exemplary embodiment shown in FIGS. 4 and 5, the two cameras 63 and 64 may average together the two outlines to estimate the drop's size. The cameras 63 and 64 may use a reference background pattern to facilitate the recognition of the size of the drop as described herein.
In another embodiment of the present disclosure, the cameras 63 and 64 image the fluid to determine if a free flow condition exists. The cameras 63 and 64 may use a background pattern to determine if the fluid is freely flowing (i.e., drops are not forming and the fluid streams through the drip chamber 59). Although the drip-chamber holder 58 includes two cameras (e.g., 63 and 64), only one of the cameras 64 and 64 may be used in some embodiments to determine if a free flow condition exists
Additionally or alternatively, in some embodiments of the present disclosure, another camera 65 monitors the fluid line 66 to detect the presence of one or more bubbles within the fluid line. In alternative embodiments, other bubble detectors may be used in place of the camera 65. In yet additional embodiments, no bubble detection is used in the drip-chamber holder 58.
 FIG. 6 shows a block diagram of another drip-chamber holder 67 in accordance with another embodiment of the present disclosure. The drip-chamber holder 67 includes an optical drip counter 68 that receives fluid from an IV bag 69. In alternative embodiments, the optical drip counter 68 is a camera, is a pair of cameras, is a capacitive drip counter, and the like. The drip-chamber holder 67 is coupled to a tube 70 coupled to a holder clamp 71 that is controlled by a motor 72. The motor 72 may be coupled to a lead screw mechanism 73 to control a roller clamp 74.
The motor 72 may be a servo-motor and may be used to adjust the flow rate through the tube 70. That is, the drip-chamber holder 67 may also function as a flow meter and regulator. For example, a processor 75 within the drip-chamber holder 67 may adjust the motor 72 such that a desired flow rate is achieved as measured by the optical drip counter 68. The processor 75 may implement a control algorithm using the optical drip counter 68 as feedback, e.g., a proportional-integral-derivative (âPIDâ) control loop with the output being to the motor 72 and the feedback being received from the optical drip counter 68.
In alternative embodiments, the motor 72, the lead screw mechanism 73, and the roller clamp 74 may be replaced and/or supplemented by an actuator that squeezes the tube 70 (e.g., using a cam mechanism or linkage driven by a motor) or may be replaced by any sufficient roller, screw, or slider driven by a motor.
The drip-chamber holder 67 may also include a display, e.g., the display 76 as shown on the drip-chamber holder 58 of FIGS. 4 and 5. The display may be used to set the target flow rate, display the current flow rate, and/or may provide a button, e.g., a touch screen button, to stop the flow rate (or a button 61 as shown in FIGS. 4 and 5 may be used to stop fluid flow).
Referring again to FIG. 4, in some specific embodiments of the present disclosure, the cameras 63 and/or 64 may be a camera cube manufactured by OmniVision of 4275 Burton Drive, Santa Clara, Calif. 95054; for example, the camera cube may be one manufactured for phone camera applications. In some embodiments of the present disclosure, the cameras 63 and/or 64 may use a fixed focus and have a depth of field (âDOFâ) from 15 centimeters to infinity.
The cameras 63 and 64 may each have the blur circle of a point imaged in the range of one of the cameras 63 and/or 64 entirely contained within the area of a single pixel. In an exemplary embodiment, the focal length of the camera lenses of cameras 63 and 64 may be 1.15 millimeters, the F# may be 3.0, and the aperture of the lenses of cameras 63 and 64 may be 0.3833 millimeter. A first order approximation to the optical system of one or more of the cameras 63 and 64 may be made using matrix equations, where every ray, r, is represented as the vector described in Equation (1) as follows:







r
=


{

h
Î¸

}

.





(
1
)







In Equation (1) above, h is the height of the ray at the entrance to the camera system of cameras 63 and/or 64, and Î¸ is the angle of the ray. Referring to FIG. 7, when imaging a hypothetical point at a distance dim from the lens of one of the cameras 63 or 64 (which has focal length f) and the lens is a distance dfp from the focal plane, the corresponding matrix, Mcam, describing the camera (e.g., one or both of the cameras 63 and/or 64) is described by Equation (2) as follows:








M
cam

=


[



1



d
fp





0


1



]

Â·

[



1


0





-

1
f




1



]

Â·


[



1



d
im





0


1



]

.






(
2
)







To find the place on the focal plane, fp, where the ray strikes, a matrix multiplication as described in Equation (3) as follows may be used:








{


h
fp


Î¸
fp


}

=


M
cam

Â·


{


h
im


Î¸
im


}

.






(
3
)







As illustrated in FIG. 7, the diameter of the blur circle, Dblur, is shown as approximately the distance between the two points illustrated in FIG. 7. This distance is found by tracing rays from the point dim away from the lens on the optical axis to the edges of the lens and then to the focal plane. These rays are given by the vectors shown in (4) as follows:








{



0





(


Â±

tan

-
1



â¢


D
lens


2
*

d
im




)




}

.




(
4
)







As shown in FIG. 8, the blur circle, Dblur, is calculated and shown for a variety of lens-to-focal plane separations and lens-to-image separations. A contour map 77 is also shown in FIG. 8. The x-axis shows the distance in microns between the focal plane and a point located a focal length away from the lens of one of the cameras 63 and/or 64. The y-axis shows the distance in meters between the lens and the point being imaged. The values creating the contour map 77 is the blur size divided by the pixel size; therefore anything about 1 or less is sufficient for imaging. As shown in FIG. 8, the focal plane is located a focal length and an additional 5 micrometers away from the lens.
The cameras 63 and/or 64 may utilize a second lens. For example, one or more of the cameras 63 and/or 64 may utilize a second lens to create a relatively larger depth of field and a relatively larger field of view. The depth of field utilizing two lenses can be calculated using the same analysis as above, but with the optical matrix modified to accommodate for the second lens and the additional distances, which is shown in Equation (5) as follows:





 

â¢

(
5
)








M
sys

=


[



1



d
fp





0


1



]

Â·

[



1


0





-

1

f
cam





1



]

Â·

[



1



d
lens





0


1



]

Â·

[



1


0





-

1

f
lens





1



]

Â·


[



1



d
im





0


1



]

.






 FIGS. 9 and 10 illustrate the field changes with the separation between the lens and the camera and the corresponding change in the focus of the camera. FIGS. 9 and 10 show the blur circle divided by the pixel size. FIG. 9 shows the blur circle divided by pixel size when a 20 millimeter focal length lens is used. FIG. 10 shows the blur circle divided by pixel size when a 40 millimeter focal length lens is used. The corresponding fields of views about the optical axis for the corners of the two configurations of FIGS. 9 and 10 are shown in the table in FIG. 11.
As shown in FIG. 11, in some embodiments, the cameras 63 and 64 of FIGS. 4 and 5 may utilize a 40 mm to 60 mm focal length lens; this configuration may include placing one or more of the cameras 43 and 64 about 2 inches from the focus. In other embodiments of the present disclosure, other configurations may be used including those not shown in FIG. 11.
For example, the following analysis shows how the depth of field can be set for one or more of the cameras 63 and 65: using a lens of focal length, f, a distance, z, from the focal plane, and a distance, d, from a point in space; a matrix of the system is shown in Equation (6) as follows:







M
=


[



1


z




0


1



]

Â·

[



1


0





-

1
f




1



]

Â·


[



1


d




0


1



]

.






(
6
)







Equation (6) reduces to Equation (7) as follows:







M
=


[



1


z




0


1



]

Â·


[



1


d





-

1
f





1
-

d
f





]

.






(
7
)







Equation (7) reduces to Equation (8) as follows:







M
=


[




1
-

z
f





d
+
z
-

dz
f







-

1
f





1
-

d
f





]

.





(
8
)







Considering the on-axis points, all of the heights will be zero. The point on the focal plane where different rays will strike is given by (9) as follows:








(

d
+
z
-

dz
f


)

â¢

Î¸
.





(
9
)







As shown above in (9), 0 is the angle of the ray. The point in perfect focus is given by the lens maker's equation given in Equation (10) as follows:








1
f

=


1
z

+


1
d

.






(
10
)







Equation (10) may be rearranged to derive Equation (11) as follows:







d
=


1


1
f

-

1
z



=


fz

z
-
f


.






(
11
)







Inserting d from Equation (11) into (9) to show the striking point results in Equation (12) as follows:









[


fz

z
-
f


+
z
-



fz

z
-
f


â¢
z

f


]

â¢
Î¸

=






f
2

â¢
z

+

fz
2

-


f
2

â¢
z

-

fz
2



f
â¡

(

z
-
f

)



â¢
Î¸

=
0.





(
12
)







All rays leaving this point strike the focal plane at the optical axis. As shown in Equation (13), the situation when the cameras 63 and/or 65 are shifted by a distance Î´ from the focus is described as follows:









[


fz

z
-
f


+
Î´
+
z
-



[


fz

z
-
f


+
Î´

]

â¢
z

f


]

â¢
Î¸

=






f
2

â¢
z

+

fz
â¢

 

â¢
Î´

-


f
2

â¢
Î´

-

fz
2

-


f
2

â¢
z

-

fz
2

-

Î´
â¢

 

â¢

z
2


+

f
â¢

 

â¢
Î´
â¢

 

â¢
z



f
â¡

(

z
-
f

)



â¢
Î¸

=




fz
-

f
2

-

z
2

+
fz


f
â¡

(

z
-
f

)



â¢
Î´Î¸

=



-



(

z
-
f

)

2


f
â¡

(

z
-
f

)




â¢
Î´Î¸

=



f
-
z

f

â¢

Î´Î¸
.









(
13
)







Equation (13) shows that by properly positioning the lens of the cameras 63 and 64 with respect to the focal plane, we can change the depth of field. Additionally, the spot size depends upon the magnitude of the angle Î¸. This angle depends linearly on the aperture of the vision system created by the cameras 63 and/or 64.
Additionally or alternatively, in accordance with some embodiments of the present disclosure, cameras 63 and 64 may be implemented by adjusting for various parameters, including: the distance to the focus as it affects compactness, alignment, and sensitivity of the vision system to the environment; the field of view of the system; and the lens-focal plane separation as it affects the tolerances on alignment of the system and the sensitivity of the system to the environment.
 FIG. 12 is a block diagram of an imaging system 78 of the cameras of the drip-chamber holder of FIGS. 4 and 5 in accordance with an embodiment of the present disclosure. Although the camera 63 of FIGS. 4 and 5 will described with reference to FIG. 12, camera 64 may also utilize the configuration described in FIG. 12.
 FIG. 12 shows an imaging system 78 including a camera 63, a uniform back light 70 to shine light at least partially through the drip chamber 59, and an infrared (âIRâ) filter 80 that receives the light from the uniform back light 79. System 78 also includes a processor 90 that may be operatively coupled to the camera 63 and/or the uniform back light 79.
The uniform back light 79 may be an array of light-emitting diodes (âLEDsâ) having the same or different colors, a light bulb, a window to receive ambient light, an incandescent light, and the like. In alternative embodiments, the uniform back light 79 may be replaced by one or more point-source lights.
The processor 90 may modulate the uniform back light 79 with the camera 63. For example, the processor 90 may activate the uniform back light 79 for a predetermined amount of time and signal the camera 63 to capture at least one image, and thereafter signal the uniform back light 79 to turn off. The one or more images from the camera 63 may be processed by the microprocessor to estimate the flow rate and/or detect free flow conditions. For example, in one embodiment of the present disclosure, system 78 monitors the size of the drops being formed within the drip chamber 59, and counts the number of drops that flow through the drip chamber 59 within a predetermined amount of time; the processor 90 may average the periodic flow from the individual drops over a period of time to estimate the flow rate. For example, if X drops each having a volume Y flow through the drip chamber in a time Z, the flow rate may be calculated as (X*Y)/Z.
Additionally or alternatively, the system 78 may determine when the IV fluid is streaming through the drip chamber 59 (i.e. during a free flow condition). The uniform back light 79 shines through the drip chamber 59 to provide an image of the drip chamber 59 to the camera 63. The camera 59 can capture one or more images of the drip chamber 59.
Other orientations of the system 78 may be used to account for the sensitivity and/or orientation of the uniform back light 79, the camera 63, the characteristics of the light from the uniform back light 79, and the ambient light. In some embodiments of the present disclosure, the processor 90 implements an algorithm that utilizes a uniformity of the images collected by the camera 63 facilitated by the uniform back light 79. For example, consistent uniform images may be captured by the camera 63 when a uniform back light 79 is utilized.
Ambient lighting may cause inconsistencies in the images received from the camera 63, such as that caused by direct solar illumination. Therefore, in some embodiments of the present disclosure, an IR filter 80 is optionally used to filter out some of the ambient light effects. For example, the IR filter 80 may be a narrow-band infrared light filter placed in front of the camera 63; and the uniform back light 79 may emit light that is about the same wavelength as the center frequency of the passband of the filter 80. The IR filter 80 and the uniform back light 79 may have a center frequency of about 850 nanometers. In alternative embodiments, other optical frequencies, bandwidths, center frequencies, or filter types may be utilized in the system 78.
 FIG. 13 is a graphic illustration of an image 81 captured by the camera 63 of the system of FIG. 12, in accordance with an embodiment of the present disclosure. The image 81 shows condensation 82 and a stream 83 caused by a free flow condition. Using edge detection may be used to determine the position of the stream 83 and/or the condensation 82, in some embodiments. Additionally or alternatively, a background image or pattern may be used as described infra.
 FIG. 14 is a block diagram of an imaging system 84 of the cameras of the drip-chamber holder of FIGS. 4 and 5 in accordance with an embodiment of the present disclosure. Although the camera 63 of FIGS. 4 and 5 will described with reference to FIG. 14, camera 64 may also utilize the configuration described in FIG. 14.
System 84 includes an array of lines 85 that are opaque behind the drip chamber 59. The array of lines 85 may be used in the detection of a free flow condition of the system 84. The free flow detection algorithm may use the presence or absence of drops for determining whether or not a streaming condition, (e.g., a free flow condition) exists. Referring now to FIG. 15, a graphic illustration of an image 86 is shown as captured by the camera 63 of FIG. 14 when a free flow condition exists in the drip chamber 59 in accordance with an embodiment of the present disclosure.
The image 86 illustrates the condition in which the drip chamber 59 experiences a free flow condition and shows that the stream of fluid 87 acts as a positive cylindrical lens. That is, as shown in FIG. 15, the array of lines 85 as captured in an image by the camera 63 show a reversed line pattern 88 from the array of lines 85 as compared to a non-free-flow condition.
In some embodiments of the present disclosure, an illumination of about 850 nanometers of optical wavelength may be used to create the image 86. Some materials may be opaque in the visible spectrum and transparent in the near IR at about 850 nanometers and therefore may be used to create the array of lines 85. The array of lines 85 may be created using various rapid prototyping plastics. For example, the array of lines 85 may be created using a rapid prototype structure printed with an infrared opaque ink or coated with a metal for making the array of lines 85. Additionally or alternatively, in some embodiments of the present disclosure, another method of creating the array of lines 85 is to create a circuit board with the lines laid down in copper. In another embodiment, the array of lines 85 is created by laying a piece of ribbon cable on the uniform back light 79; the wires in the ribbon cable are opaque to the infrared spectrum, but the insulation is transparent and the spacing of the wires may be used for the imagining by the camera 63 (see FIG. 14). In yet additional embodiments, a piece of thin electric discharge machined metal may be utilized. Metal is opaque and the spaces of the material may very finely controlled during manufacturer to allow the IR light to pass through the spaces.
The processor 90 implements an algorithm to determine when a free flow condition exists. The processor 90 may be in operative communication with a computer readable medium 91 (e.g., a non-transitory computer readable medium) to receive one or more instructions to implement the algorithm to determine if a free flow condition exists. The one or more instructions from the computer readable medium 91 are configured for execution by the processor 90.
Referring again to FIG. 14, blood may be used by the system 84. For example, system 84 may determine when a free flow condition of blood exists when utilizing the camera 63, the IR filter 80, and the uniform back light 79 configured, for example, for use using optical light having a wavelength of 850 nanometers or 780 nanometers, e.g., when using bovine blood. The blood may appear opaque compared to the imagery taken using water as the fluid.
The following algorithm implemented by the processor 90 and received from the computer readable medium 91 may be used to determine when a free flow condition exists: (1) establish a background image 89 (see FIG. 16); and (2) subtract the background image 89 from the current image. Additional processing may be performed on the resulting image.
In some embodiments of the present disclosure, the background image 89 of FIG. 16 may be dynamically generated by the processor 90. The dynamic background image may be used to account for changing conditions, e.g. condensation or splashes 82 on the surface of the drip chamber (see FIG. 13). For example, in one specific embodiment, for each new image captured by the camera (e.g., 63 of FIG. 14), the background image has each pixel multiplied by 0.96 and the current image (e.g., the most recently captured image) has a respective pixel multiplied by 0.04, after which the two values are added together to create a new value for a new background image for that respective pixel; this process may be repeated for all of the pixels. In yet another example, in one specific embodiment, if a pixel of the new image is at a row, x, and at a column, y, the new background image at row, x, and column, y, is the value of the previous background image at row, x, and column, y, multiplied by 0.96, which is added to the value of the pixel at row, x, and column, y of the new image multiplied by 0.04.
When the system 84 has no water flowing through the drip chamber 59 (see FIG. 14), the resulting subtraction should be almost completely black, i.e., low pixel magnitudes, thereby facilitating the algorithm to determine that the drip chamber 59 has no water flowing therethrough.
 FIG. 17 shows an image 92 from the camera 63 when there is a drop within the drip chamber 59 (see FIG. 14). FIG. 18 shows a background image 93 used by the system 84. When the system 83 has a drop as shown in image 92 of FIG. 17, the system 84 of FIG. 14 has a few high contrast-spots where the image of the array of lines is warped by the lensing of the droplet as illustrated by an image 94 of FIG. 19. Image 94 of FIG. 19 is generated by taking, for each respective pixel, the absolute value of the subtraction of the image 92 of FIG. 92 from image 93 of FIG. 18, and converting each respective pixel to a white pixel if the value is above a predetermined threshold or otherwise converts the pixel to a black pixel when the value is below the predetermined threshold. Each white pixel within the image 94 of FIG. 19 is a result of there being a difference for that pixel location between the images 92 and 93 that is greater than a predetermined threshold.
For example, consider three respective pixels of FIGS. 17, 18, and 19 having a location of row, x, and column, y. To determine the pixel of row x and column y for the image 94 of FIG. 19, the pixel at row x and column y of image 92 of FIG. 17 is subtracted from the pixel at row x and column y of image 92 of FIG. 18, then the absolute value of the result of the subtraction is taken; and if the absolute value of the result is above a predetermined threshold (e.g., above a grayscale value of 128, for example), the pixel at the location of row x and column y of image 94 of FIG. 19 is white, otherwise the pixel at the location of row x and column y of image 94 of FIG. 19 is black.
When it is determined that a few high contrast-spot exists within image 94 of FIG. 19, the processor 90 of system 84 (see FIG. 14) determines that drops are being formed within the drip chamber 59 and no free flow condition exists. The images of the drops may be utilized to determine their size to estimate a flow rate as described herein.
 FIG. 20 is a graphic representation of some image processing that may be performed using FIGS. 17-19 to determine if a free flow condition exists in accordance with an embodiment of the present disclosure. Referring to FIGS. 20 and 19, all of the white pixels for each row are summed together, and are illustrated in FIG. 20 as results 183. The y-axis represents the row number, and the x-axis represents the number of white pixels determined for each respective row.
Referring now to only FIG. 20, as previously mentioned, the number of white pixels for each row is summed together and is illustrated as results 183, which are used to determine if or when a free flow condition exists. In some specific embodiments, the processor 90 of system 84 (see FIG. 14) determines that a free flow condition exists when a predetermined number of contiguous values of the summed rows of the results 183 exist above a threshold 184. For example, within the results 183, a plurality of rows represented generally by 185 have a total value above the threshold 184. When greater than a predetermined number of contiguous summed rows are determined to exist within the results 183, a free flow condition is determined to exist by the processor 90 of FIG. 14. For example, as shown in FIG. 20, the plurality of contiguous rows 185 are below the predetermined number of contiguous summed rows and therefore a free flow condition is determined to not exist.
 FIG. 21 shows an image 95 showing a stream as captured by the camera 63 of FIG. 14 when a free flow condition exists. FIG. 22 shows a background image 96. FIG. 23 shows an image 97 formed by the absolute value of the difference between the image 96 of FIG. 22 and the image 95 from FIG. 21 when the absolute value is converted either to a white pixel (when the absolute value of the difference is above a threshold) or to a black pixel (when the absolute value of the difference is below the threshold). As shown in FIG. 23, high-contrast spots caused by the reverse orientation of the lines in the stream run from top to bottom are detectable by the processor 90. The processor 90 of FIG. 14 can use the image 97 to determine if a free flow condition exists using the algorithm described above.
That is, as shown in FIG. 24, results 186 are shown having a contiguous range 187 of the results 186 that are above a threshold 188. Because the contiguous range 187 of summed rows is greater than a predetermined threshold number of contiguous values above the threshold 188, a free flow condition is determined to exist by the processor 90 (see FIG. 14). That is, the contiguous range of the results 186 above the threshold 188 is greater than a predetermined threshold range of contiguous values; therefore, the processor 90 determines that a free flow condition exists when using the results 186 of FIG. 24.
In yet an additional embodiment of the present disclosure, the intensity, the intensity squared, or other function may be used to produce the results 183 and and/or 186. In yet an additional embodiment, one or more data smoothing functions may be used to smooth the results 183 and/or 186, such as a spline function, cubic spline function, B-spline function, Bezier spline function, polynomial interpolation, moving averages, or other data smoothing functions.
For example, an image of the camera 63 of FIG. 14, e.g., image 95 of FIG. 21, may be subtracted from a background image, e.g., the image 96 of FIG. 22, to obtain intensity values. For example, a pixel of row x and column y of FIG. 21 may be subtracted from a pixel of row x and column y of the image 96 of FIG. 22 to create an intensity value at row x and column y; this may be repeated for all pixel locations to obtain all of the intensity values. The intensity values of each row may be summed together to obtain the results 183 and/or 186, such that the processor 90 may determine that a free flow condition exists when the summed rows of the intensity values has a contiguous range of summed rows above a threshold. In some embodiments, the intensity values are converted to an absolute value of the intensity values, and the summed rows of the absolute values of the intensity values are used to determine if a contiguous range of summed rows of the absolute values is above a threshold range of contiguous values. Additionally or alternatively, the intensity may be squared and then the processor 90 may sum the squared intensity rows and determine if a contiguous range of summed rows of the intensity squared values exists beyond a threshold range of contiguous values to determine if a free flow condition exists. In some embodiments, a predetermined range of contiguous values above a threshold (e.g., min and max ranges) of the summed rows of intensity values or intensity squared values may be used by the processor 90 to determine if a drop of liquid is within the image. For the rows of the intensity values (or the intensity squared values) may be summed together and a range of the summed values may be above a threshold number; if the range of contiguous values is between a minimum range and a maximum range, the processor 90 may determine that the range of contiguous values above a predetermined threshold is from a drop within the field of view of the camera 63. In some embodiments of the present disclosure the summed rows of intensity values or intensity squared values may be normalized, e.g., normalized to have a value between 0 and 1.
The following describes a smoothing function similar to the cubic spline (i.e., the cubic-spline-type function) that may be used on the summed rows of intensity values or the summed rows of the intensity values square prior to the determination by the processor 90 to determine if a free flow condition exits. The cubic-spline-type function may be used to identify blocks as described below which may facilitate the processor's 90 identification of free flow conditions, in some specific embodiments.
The cubic-spline-type function is an analog to the cubic spline, but smoothes a data set rather than faithfully mimicking a given function. Having data sampled on the interval from [0,1] (e.g., the summation along a row of intensity squared or intensity that is normalized) the processor 90 may find the best fit set of cubic functions on the intervals [x0,x1], [x1,x2], . . . , [xNâ1,xN] with and x0=0 and xN=1 where the total function is continuous with continuous derivatives and continuous curvature.
The standard cubic spline definition is illustrated in Equation (14) as follows:

Ï(x)=A i(x)y i +B i(x)y i+1 +C i(x)y i â³+D i(x)y i+1 â³ x i â¤xâ¤x i+1ââ(14),

with the functions Ai, Bi, Ci, Di defined as in the set of Equations (15):











A
i

â¡

(
x
)


=




x

i
+
1


-
x



x

i
+
1


-

x
i



=



x

i
+
1


-
x


Î
i




,


B
i

=



x
-

x
i




x

i
+
1


-

x
i



=


x
-

x
i



Î
i





â¢




â¢




C
i

â¡

(
x
)


=



Î
i
2

6

â¢

(



A
i
3

â¡

(
x
)


-


A
i

â¡

(
x
)



)



,


D
i

=



Î
i
2

6

â¢


(



B
i
3

â¡

(
x
)


-


B
i

â¡

(
x
)



)

.








(
15
)







Equations (14) and (15) guaranty continuity and curvature continuity. The only values which can be freely chosen are the yi, y0â³ and yNâ³. Please note that Equation (16) is chosen as follows:

y 0 â³=y 1â³ââ(16),

i.e., the function is flat at 0 and 1. The remaining yiâ³ must satisfy the following set of Equations (17):

















y
1

-

y
0



Î
0


+



y
1
â³

â¢

Î
0


3


=




y
2

-

y
1



Î
1


-



y
1
â³

â¢

Î
1


3

-



y
2
â³

â¢

Î
1


6












y
2

-

y
1



Î
1


+



y
1
â³

â¢

Î
1


6

+



y
2
â³

â¢

Î
1


3


=




y
3

-

y
2



Î
2


-



y
2
â³

â¢

Î
2


3

-



y
3
â³

â¢

Î
2


6












y
3

-

y
2



Î
2


+



y
2
â³

â¢

Î
2


6

+



y
3
â³

â¢

Î
2


3


=




y
4

-

y
3



Î
3


-



y
3
â³

â¢

Î
3


3

-



y
4
â³

â¢

Î
3


6










â®









y

N
-
2


-

y

N
-
3




Î

N
-
3



+



y

N
-
3

â³

â¢

Î

N
-
3



6

+



y

N
-
2

â³

â¢

Î

N
-
3



3


=




y

N
-
1


-

y

N
-
2




Î

N
-
2



-



y

N
-
2

â³

â¢

Î

N
-
2



3

-



y

N
-
1

â³

â¢

Î

N
-
2



6












y

N
-
1


-

y

N
-
2




Î

N
-
2



+



y

N
-
2

â³

â¢

Î

N
-
2



6

+



y

N
-
1

â³

â¢

Î

N
-
2



3


=




y
N

-

y

N
-
1




Î

N
-
1



-




y

N
-
1

â³

â¢

Î

N
-
1



3

.









(
17
)







The set of Equations (17) can be rewritten as the set of Equations (18) as follows:


















Î
0

+

Î
1


3

â¢

y
1
â³


+



Î
1

6

â¢

y
2
â³



=



y
0


Î
0


-


[


1

Î
0


+

1

Î
1



]

â¢

y
1


+


y
2


Î
1













Î
1

6

â¢

y
1
â³


+




Î
1

+

Î
2


3

â¢

y
2
â³


+



Î
2

6

â¢

y
3
â³



=



y
1


Î
1


-


[


1

Î
1


+

1

Î
2



]

â¢

y
2


+


y
3


Î
2













Î
2

6

â¢

y
2
â³


+




Î
2

+

Î
3


3

â¢

y
3
â³


+



Î
3

6

â¢

y
4
â³



=



y
2


Î
2


-


[


1

Î
2


+

1

Î
3



]

â¢

y
3


+


y
4


Î
3











â®









Î

N
-
4


6

â¢

y

N
-
3

â³


+




Î

N
-
3


+

Î

N
-
2



3

â¢

y

N
-
2

â³


+



Î

N
-
2


6

â¢

y

N
-
1

â³



=



y

N
-
3



Î

N
-
3



-


[


1

Î

N
-
3



+

1

Î

N
-
2




]

â¢

y

N
-
2



+


y

N
-
1



Î

N
-
2














Î

N
-
1


6

â¢

y

N
-
2

â³


+




Î

N
-
2


+

Î

N
-
1



3

â¢

y

N
-
1

â³



=



y

N
-
2



Î

N
-
2



-


[


1

Î

N
-
2



+

1

Î

N
-
1




]

â¢

y

N
-
1



+



y
N


Î

N
-
1



.









(
18
)







In turn, this becomes the matrix Equation (19):









[






Î
0

+

Î
1


3





Î
1

6



0



 



0


0


0






Î
1

6






Î
1

+

Î
2


3





Î
2

6



â¦


0


0


0




0




Î
2

6






Î
2

+

Î
3


3




 



0


0


0





 



â®



 



â±



 



â®



 





0


0


0



 






Î

N
-
4


+

Î

N
-
3



3





Î

N
-
3


6



0




0


0


0


â¦




Î

N
-
3


6






Î

N
-
3


+

Î

N
-
2



3





Î

N
-
2


6





0


0


0



 



0




Î

N
-
2


6






Î

N
-
2


+

Î

N
-
1



3




]

â¢

{




y
1
â³






y
2
â³






y
3
â³





â®





y

N
-
3

â³






y

N
-
2

â³






y

N
-
1

â³




}


=

â


[




1

Î
0






-

1

Î
0



-

1

Î
1






1

Î
1





 



0


0


0




0



1

Î
1






-

1

Î
1



-

1

Î
2





â¦


0


0


0




0


0



1

Î
2





 



0


0


0





 



â®



 



â±



 



â®



 





0


0


0



 




1

Î

N
-
3





0


0




0


0


0


â¦




-

1

Î

N
-
3




-

1

Î

N
-
2







1

Î

N
-
2





0




0


0


0



 




1

Î

N
-
2







-

1

Î

N
-
2




-

1

Î

N
-
1







1

Î

N
-
1






]

â¢

{




y
0






y
1






y
2






y
3





â®





y

N
-
3







y

N
-
2







y

N
-
1







y
N




}







(
19
)







The set of Equations (19) may be rewritten as the set of Equations (20):

Fy dd =Gy 

y dd =F â1 Gy=Hyââ(20).

Choosing the values in the vector y using a least squares criterion on the collected data is shown in Equation (21) as follows:

E=Î£[Ï k âA i  k (Î¾k)y i  k  âB i  k (Î¾k)y i  k  +1 âC i  k (Î¾k)y i  k  â³âD i  k (Î¾k)y i  k â³]2ââ(21).

That is, Equation (21) is the minimum deviation between the data and the spline, i.e., an error function. The y values are chosen to minimize the error as defined in Equation 21; The vector of predicted values can be written as illustrated in Equation (22) as follows:











y
^

=
 
â¢



(


A

{
k
}


+

B

{
k
}



)

â¢
y

+


(


C

{
k
}


+

D

{
k
}



)

â¢

y
dd









=
 
â¢



(


A

{
k
}


+

B

{
k
}



)

â¢
y

+


(


C

{
k
}


+

D

{
k
}



)

â¢
Hy








=
 
â¢


[


A

{
k
}


+

B

{
k
}


+


C

{
k
}


â¢
H

+


D

{
k
}


â¢
H


]

â¢
y







=
 
â¢

Ay
.








(
22
)







The elements of the matrix in brackets of Equation (22) depend upon the x-value corresponding to each data point, but this is a fixed matrix. Thus the final equation can be determined using the pseudo-inverse. In turn, the pseudo-inverse only depends upon the x-locations of the data set and the locations where the breaks in the cubic spline are set. The implication of this is that once the geometry of the spline and the size of the image are selected, the best choice for the y given a set of measured values ym is illustrated in Equation (23) as follows:

y=(A T A)â1 AÂ·y mââ(23).

The cubic spline through the sum intensity-squared function of the image will then be given by Equation (24):

y cs =AÂ·yââ(24).

Because we will want to find the maximum values of the cubic spline, we will also need the derivative of the spline. The cubic spline derivative is given by Equation (25) as follows:












Ï
â²

â¡

(

x
k

)


=
 
â¢




A

i
k

â²

â¡

(

x
k

)


â¢

y

i
k



+



B

i
k

â²

â¡

(

x
k

)


â¢

y


i
k

+
1



+



C

i
k

â²

â¡

(

x
k

)


â¢

y

i
k

â³


+



D

i
k

â²

â¡

(

x
k

)


â¢

y


i
k

+
1

â³









=
 
â¢


-


y

i
k



Î

i
k




+


y


i
k

+
1



Î

i
k



-




Î

i
k


â¢

y

i
k

â³


6

â¢

(


3
â¢


A

i
k

2

â¡

(

x
k

)



-
1

)


+







 
â¢




Î

i
k


â¢

y


i
k

+
1

â³


6

â¢


(


3
â¢


B

i
k

2

â¡

(

x
k

)



-
1

)

.









(
25
)







Equation (25) can be written as Equation (26):











y
cs
â²

=
 
â¢



(


A

{
k
}

â²

+

B

{
k
}

â²


)

â¢
y

+


(


C

{
k
}

â²

+

D

{
k
}

â²


)

â¢

y
dd









=
 
â¢


[


A

{
k
}

â²

+

B

{
k
}

â²

+


C

{
k
}

â²

â¢
H

+


D

{
k
}

â²

â¢
H


]

â¢
y







=
 
â¢


A
â²

â¢

y
.









(
26
)







Once the current values of y are found, the cubic spline, ycs, and its derivative, yâ²cs can be calculated. The cubic spline data may include âblocksâ of data that includes values above a predetermined threshold. A pipe block is formed by the liquid flowing out of the tube into the drip chamber 59 and a pool block is formed as the liquid collects at the gravity end of the drip chamber 59 (see FIG. 14).
The following algorithm may be applied to the cubic spline data: (1) determine the local maxima of the cubic spline data using the derivative information; (2) determine the block surrounding each local maxima by including all points where the cubic spline value is above a threshold value; (3) merge all blocks which intersect; (4) calculate information about the block of data including the center of mass (intensity), the second moment of the mass (intensity), the lower x-value of the block, the upper x-value of the block, the mean value of the original sum of intensity squared data in the block, the standard deviation of the original sum of intensity squared data in the block, and the mean intensity of a high-pass filtered image set in the block; and (5) interpret the collected data to obtain information about when drops occur and when the system is streaming.
The mean intensity of a high-pass filtered image set in the block is used to determine if the block created by each contiguous range of spline data is a result of a high frequency artifact (e.g., a drop) or a low frequency artifact. This will act as a second background filter which tends to remove artifacts such as condensation from the image. That is, all previous images in an image memory buffer (e.g., 30 previous frames, for example) are used to determine if the data is a result of high frequency movement between frames. If the block is a result of low frequency changes, the block is removed, or if it is a result high frequency changes, the block is kept for further analysis. A finite impulse response filter or an infinite impulse response filter may be used.
Each block is plotted over its physical extent with height equal to the mean value of the data within the block. If a block has a mean value of the high-pass filter image less than the threshold, it is an indication that it has been around for several images and thus may be removed.
Free flow conditions may be determined by the processor 90 to exist using the blocks when the pipe block extends nearly to the pool block, the pipe block and the pool block merge together, and/or the summed range of widths of the pool and pipe blocks (or all blocks) is greater than a predetermined threshold, e.g., the total extent of the blocks exceeds 380 pixels in width. The processor 90 may detect a drop when the transition of the pipe block from a larger width to a shorter width occurs as a result of a drop formation in the tube and as the drop leaves the pipe (i.e., tube) opening of the drip chamber 59. The processor 90 may detect this by looking at the ratio of the current pipe block width to the previous image's pipe block width, e.g., an image where the ratio is less than 0.9 while simultaneously is a local minima is may be considered by the processor 90 to be an image formed immediately after a drop has formed.
Various filtering algorithms may be used to detect condensation or other low frequency ratification, such as: If a block has a low mean value in the high-pass filter image, then it may be condensation. This artifact can be removed from consideration. Additionally or alternatively, long blocks (e.g., greater than a predetermined threshold) with a low high-pass mean value are possibly streams, since stream images tend to remain unchanging.
The processor 90 may, in some specific embodiments use the block data to count the drops thereby using the system 84 as a drop counter. The processor 90 may also use width changes in the pool block as a drop disturbs the water to determine if a bubble formed with the drop hit the pool. For example, the processor 90 may determines that a block forms below the pool block, then the processor 90 may determine that a bubble formed when a drop hit the water. The bubble may be filtered out by the processor 90 to determine if a predetermined value of total block ranges indicates that a free flow condition exists.
In some embodiments of the present disclosure, the depth of field of the system 84 may have a narrow depth of field to make the system 84 less sensitive to condensation and droplets on the chamber walls. In some embodiments, a near focus system may be used.
Referring now to FIG. 25, in another embodiment of the present disclosure a template 189 is used to determine if a free flow condition exists. The template 189 is used by the processor 90 of FIG. 14 to determine a pattern match score 190. The image 94 of FIG. 19 may be compared against the pattern 189 (e.g., a difference between a background image and an image captured by the camera 63 of FIG. 14 which is then converted to either a black pixel if the difference is below a threshold value or a white pixel if the difference is above a threshold value). If the pattern match score 190 is above a predetermined threshold, a free flow condition is determined to exist. The template matching may utilize a template matching algorithm as found in Open Source Computer Vision (âOpenCVâ) library. For example, the template 189 may be used with the matchTemplate( ) function call of the OpenCV library using the CV_TM_CCOEFF method or the method of CV_TM_CCOEFF_NORMED. The CV_TM_CCOEFF method uses the pattern matching algorithm illustrated in Equation (27) as follows:
         R â¢  (  x , y  )   =   â   x â²  ,  y â²        â¢  (    T â²  â¡  (   x â²  ,  y â²   )   Â·   I â²  â¡  (   x +  x â²   ,  y +  y â²    )    )    ,     ( 27 )       
where:

Tâ²(xâ²,yâ²)=T(xâ²,yâ²)â1/(wÂ·h)Â·Î£xâ³,yâ³ T(xâ³,yâ³)

Iâ²(x+xâ²,y+yâ²)=I(x+xâ²,y+yâ²)â1/wÂ·h)Â·Î£xâ³,yâ³ I(x+xâ³,y+yâ³)

The I denotes the image, the T denotes the template, and the R denotes the results. The summation is done over the template and/or the image patch, such that: xâ²=0 . . . wâ1 and yâ²=0 . . . hâ1.

The results R can be used to determine how much the template T is matched at a particular location within the image I as determined by the algorithm. The OpenCV template match method of CV_TM_CCOEFF_NORMED uses the pattern matching algorithm illustrated in Equation (28) as follows:








R
â¡

(

x
,
y

)


=




â


x
â²

,

y
â²



 


â¢

(



T
â²

â¡

(


x
â²

,

y
â²


)


Â·


I
â²

â¡

(


x
+

x
â²


,

y
+

y
â²



)



)





â


x
â²

,

y
â²



 


â¢




T
â²

â¡

(


x
â²

,

y
â²


)


2

Â·


â


x
â²

,

y
â²



 


â¢



I
â²

â¡

(


x
+

x
â²


,

y
+

y
â²



)


2






.





(
28
)







In another embodiment of the present disclosure, the template matching algorithm uses a Fast Fourier Transform (âFFTâ). In some embodiments, any of the methods of the matchTemplate( ) function of OpenCV may be used, e.g., CV_TM_SQDIFF, CV_TM_SQDIFF_NORMED, CV_TM_CCORR, and/or CV_TM_CCORR_NORMED.
The CV_TM_SQDIFF uses the pattern matching algorithm illustrated in Equation (29) as follows:








R
â¢

(

x
,
y

)


=


â


x
â²

,

y
â²



 


â¢



(


T
â¡

(


x
â²

,

y
â²


)


-

I
â¡

(


x
+

x
â²


,

y
+

y
â²



)



)

2

.






(
29
)







CV_TM_SQDIFF_NORMED uses the pattern matching algorithm illustrated in Equation (30) as follows:








R
â¡

(

x
,
y

)


=




â


x
â²

,

y
â²



 


â¢


(


T
â¡

(


x
â²

,

y
â²


)


-

I
â¡

(


x
+

x
â²


,

y
+

y
â²



)



)

2





â


x
â²

,

y
â²



 


â¢



T
â¡

(


x
â²

,

y
â²


)


2

Â·


â


x
â²

,

y
â²



 


â¢


I
â¡

(


x
+

x
â²


,

y
+

y
â²



)


2






.





(
30
)







CV_TM_CCORR uses the pattern matching algorithm illustrated in Equation (31) as follows:








R
â¢

(

x
,
y

)


=


â


x
â²

,

y
â²



 


â¢


(


T
â¡

(


x
â²

,

y
â²


)


Â·

I
â¡

(


x
+

x
â²


,

y
+

y
â²



)



)

.






(
31
)







CV_TM_CCORR_NORMED uses the pattern matching algorithm illustrated in Equation (32) as follows:








R
â¡

(

x
,
y

)


=




â


x
â²

,

y
â²



 


â¢

(


T
â¡

(


x
â²

,

y
â²


)


Â·


I
â²

â¡

(


x
+

x
â²


,

y
+

y
â²



)



)





â


x
â²

,

y
â²



 


â¢



T
â¡

(


x
â²

,

y
â²


)


2

Â·


â


x
â²

,

y
â²



 


â¢


I
â¡

(


x
+

x
â²


,

y
+

y
â²



)


2






.





(
32
)







In yet another embodiment of the present disclosure, a template of a grayscale image of a free flow condition is compared to an image taken by the camera 63 of FIG. 14 to determine if a free flow condition exists. In some embodiments, the template matching function within the OpenCV library may be utilized.
Refer now to FIGS. 26 and 27; in yet an additional embodiment of the present disclosure, the algorithm to determine when a free flow condition exists being executed on the processor 90 of FIG. 14 may utilize an algorithm to determine if a template pattern matches an array of pixels utilizing edge detecting followed by line detection. As shown in FIG. 26, an image 98 is formed from an image 99 of FIG. 27, by using edge detected followed by line detection. The resulting lines may be utilized by the processor 90 to determine that a free flow condition exists. As shown in FIG. 26, the feature which shows up after this processing by the processor 90 are lines that have a different slope than the expected 45Â° slope of the background reference image. The lines having the angle of the background image may be filtered out of FIG. 26, in some embodiments. The lines may be detected as edges using a Canny algorithm as found in the OpenCV library with the Hough algorithm to determine the slope of the lines also found in the OpenCV library.
 FIGS. 28-32 illustrate various background patterns that may be used to detect a free flow condition or estimate the size of a drop of liquid. When used with the back patterns of FIGS. 28-32, the cameras 102 mentioned for use in FIGS. 28-32 may be the cameras 63 or 64 of FIG. 4 or 5, the camera of FIG. 6, the camera 63 of FIG. 14 each of which may be coupled to a respective processor for processing the images from the camera, such as processor 75 of FIG. 6 or the processor 90 of FIG. 14.
 FIG. 28 is a block diagram of an imaging system 100 for use with the drip-chamber 104 (e.g., a drip chamber as found in the drip-chamber holder of FIGS. 4-5 or FIG. 6) having a back pattern 101 with stripes and a light source 102 shining on the stripes from an adjacent location to a camera 103 in accordance with an embodiment of the present disclosure. Any drops or free flow streams within the drip chamber 104 distorts the image taken by the camera 103. A processor coupled to the camera 103 (e.g., processor 75 of FIG. 6) can use the distortions of the back pattern 101 as captured by the camera 103 to estimate flow rate and/or detect free flow conditions.
 FIG. 29 is a block diagram of an imaging system 105 for use with the drip-chamber 104 having a back pattern 101 with stripes and a light source 102 shining on the stripes from behind the back pattern 101 relative to an opposite end to a camera 103 in accordance with an embodiment of the present disclosure. FIG. 30 shows an image from the camera 103 of FIG. 29 when a drop distorts the back pattern 101 of FIG. 29 in accordance with an embodiment of the present disclosure. Note that as shown in FIG. 30, the back pattern's 101 stripes are distorted by a drop (or will be distorted by a free flow stream) from the drip chamber 104 as captured in images by the camera 103. This distortion may be used to estimate the drop size, to calculate the flow rate through a fluid-chamber holder, or to determine if a free flow condition exists.
 FIG. 31 is a block diagram of an imaging system for use with the drip-chamber holder of FIGS. 4-5 or FIG. 6 having a back pattern with a checkerboard pattern and a light source shining on the stripes from behind the back pattern relative to an opposite end to a camera in accordance with an embodiment of the present disclosure. FIG. 32 shows an image from the camera of FIG. 31 when a drop distorts the back pattern 107 of FIG. 26 in accordance with an embodiment of the present disclosure. In yet another embodiment, the background may be formed using a plurality of random dots and/or circles.
Referring to FIGS. 28-32, the Lensing of a drop (i.e., the distortion of the back pattern from the view of a camera) may be used to measure the radius of the drop. The radius of the drop is related to the effect it has on the light passing through it. By measuring the change to the calibration grid as seen through the drop, the radius and hence the volume of the drop can be calculated. For example, the magnification of a test grid of known size as seen through the drop could be measured optically and the radius inferred from this measurement. The relationship between the radius and the drop may be calculated and/or may be determined using a lookup table that has been generated empirically.
 FIG. 33 shows a block diagram of an air detector 108 using a camera 109 in accordance with an embodiment of the present disclosure. The air detector 108 may be the air detector 24 of FIG. 1, the air detector 410 of FIG. 2 or FIG. 3, or the air detector 65 of FIG. 5. Additionally or alternatively, in some specific embodiments, the air detector 108 may be formed within the drip-chamber holder 58 and the camera 109 may be the camera 65 of the drip-chamber holder 58 (see FIGS. 4 and 5).
The air detector 108 includes the camera 109, a backlight 110, a processor 584, and a memory 585. The backlight 110 shines light through the tube 111. The camera may optionally include an IR filter on its lens and/or the backlight may be tuned to an infrared wavelength or bandwidth, e.g., to correspond to the IR filter.
The camera 109 may be operatively coupled to one or more processors 584 that are in operative communication with a computer readable memory 585, e.g., RAM, ROM, disk, hard disk, memory, etc. The computer readable memory 585 may include one or more operative instructions configuration for execution by the one or more processor. The one or more operative instructions may implement an algorithm to detect or determine the present of air within the tube 111; for example, by determining or detecting the presence of one or more bubbles within the tube 111.
Additionally or alternatively, the system 108 can be used to detect the status of the tube 111 designed to transport fluid, e.g., in this example IV tubing. The camera 109 may be a digital camera that captures images of the tube 111 that is back-lit with a diffuse light from a backlight 110. The backlight 110 may consist of a clear plastic material edge-lit with a set of LEDs (e.g., as is used on a liquid crystal display). The camera 109 may capture one or more images so that the one or more processors can detect or determine the following: (1) if the tube 111 has been installed in the device; (2) if the tube 111 has been primed (i.e., is full of liquid); (3) if there are bubbles in the tube; and/or (4) the color and opacity of the fluid in the tube.
Referring now to FIGS. 34, 35, and 36 for a description of an exemplary use of the system 108 of FIG. 33. The detection algorithm residing within the memory 585 and executed by the processor 584 (see FIG. 33) uses three template images: one representing no tube installed; another representing a tube installed with clear liquid therein; and another representing a thin vertical slice of a bubble as shown in FIG. 34. The algorithm quantifies how closely each section of the tube 111 matches the bubble template of FIG. 34, the no tube template, or the tube template with liquid therein. The matching algorithm may utilize the OpenCV pattern matching function, matchTemplate( ) described in Equation (14) or Equation (15) above, or an FFT pattern matching algorithm. In yet additional embodiment any of the methods for pattern matching of the matchTemplate( ) of openCV may be used, such as, for example, CV_TM_SQDIFF, CV_TM_SQDIFF_NORMED, CV_TM_CCORR, and/or CV_TM_CCORR_NORMED.
The pattern matching algorithm may scan from one side to the other side, e.g., from left to right. As the processor 584 scans across the image, the pattern matching algorithm tries to match each template to one of the scanned section. If a template matches, and several scans later, no template is matched and finally another template is matched, the processor may interpolate that the later template is the most likely one that should have been matched. For example, when scanning from left to right, in region 191, the template of a tube with liquid therein matches. When transitioning from a side of the bubble 112 from the left, a region 194 on the left side of the bubble within the box 112 may not match any template, and finally, within the box 112, the bubble may match to the air template in region 193; the processor 584 may assume the reason the pattern matching algorithm could not match the intermediate region of 194 with a template is because the bubble's image started to change the camera's view. Therefore, in this example, the region 194 in which no template was determined to match, the processor 584 may assume that the bubble was present. Also note that interpolation may be used in region 195.
If there is a close match (including the interpolation as described above) a bubble can be identified as is shown in the box 112. The size of the bubble in the box 112 can be estimated based on the tube's 111 diameter (either known in advanced or measured by the camera 109 of FIG. 33) and the bubble length found in the template matching algorithm, e.g., as determined by the box 112. The box 112 may model the bubble as a cylinder having the diameter of the tube 111. The bubble information can be compared frame to frame to keep track of how many bubbles have moved through the field of view and their sizes (and thus the total amount of air delivered to a patient may be tracked). The processor 584 may issue an alert or alarm if any bubble exceeds a given size, if the total amount of air passing through the tube 111 exceeds a predetermined threshold, or if the total amount of air passing through the tube 111 exceeds a predetermined threshold within a predetermined amount of time. In some embodiments, the color of the fluid may be used to estimate and/or determine the amount of air dissolved within the liquid within the tube 111.
In some embodiments, the bubble of FIG. 36 may have its shape estimated. For example, edge detection may be used to identify the left and right edges of the bubble to estimate its volume, e.g., Canny edge detection, a first-order edge detection algorithm, a second-order edge detection algorithm, a phase congruency-based edge detection algorithm, and the like. The edge detection algorithm may utilize one found in OpenCV. Additionally or alternatively, the edge detection algorithm may average 5 previous pixels from a side (e.g., the left side) and compare that to an average of the next 5 pixels (e.g., the right side), and when the change exceeds a predetermined threshold, the edge of the bubble may be determined to be present.
Additionally or alternatively, the camera 109 can capture an image with a threshold amount of red liquid within the tube 111 such that the one or more processors 584 determines that blood is present within the tube 111. For example, the system 108 having the camera 109 of FIG. 33 may be used to form the infiltration detector 32 of FIG. 2. One or more of the pumps, e.g., pumps 19, 20, and 21, may be used to create a backpressure to determine if the catheter is properly in the vein. That is, if the catheter is properly within the vein, then a small amount of negative pressure within the tube should draw blood into the tube. As shown in FIG. 37, blood 113 may be captured within an image taken by the camera 109 of FIG. 33, which is then processed to determine that a threshold of red exists. FIG. 38 shows a region 114 determined by the one or more processors, e.g., processor 37 of FIG. 2, that a threshold amount of red color exists. The white pixels depicts that a threshold amount of red has been detected and a black pixel depicts that a threshold amount of red has not been detected for that pixel.
In another embodiment, the pixels are converted to grayscale and then a threshold amount of a dark color may be used to determine that blood exists at each individual pixel. For example, if the pixel is determined to be below a threshold (e.g., closer to black beyond a threshold), that pixel may be determined to be blood and is thereby converted to white while the remaining pixels are converted to black (or in other embodiments, vice versa). For example, the image taken may be in RGB format which is then converted to a grayscale image using the void cvtColor( ) function of the OpenCV library using the CV_RGB2GRAY_color space conversion code. The threshold amount may be 50, 128, or may be dynamically adjusted.
The processor 37 may determine that infiltration has occurred when the infusion site monitor 26 of FIG. 2 receives no blood or less than a predetermined amount of blood within the tube when a predetermined amount of negative pressure is present within the tube, e.g., when running an infusion pump in reverse. The amount of blood may be determined by summing the white pixels within the region 114. The tube may include fiducials to help locate the tube and/or the tube's holder. Additionally or alternatively, fiducials may be used to indicate distance, e.g., the volume of blood in the tube may be correlated with the length of the blood within the tube using the fiducials, for example, to prevent drawing back too much blood during an infiltration test.
 FIG. 39 shows an infiltration detector 115 in accordance with an embodiment of the present disclosure. The infiltration detector 115 of FIG. 39 may be the infiltration detector 32 of FIG. 2. The infiltration detector 115 includes a photodiode coupled to a T-connector 117. The T-connector connects the tube 118 to the tube 119 that feeds liquid into the view 120 via an internal portion of the catheter 121. The infiltration detector 115 also includes an LED 122 that shines light into the skin 124. The photodiode 116 and the LED 122 may be coupled to a processor that implements an algorithm to determine when infiltration has occurred, e.g., processor 37 of the infusion site monitor 26 of FIG. 2. The algorithm may be implemented by an operative set of processor executable instructions (e.g., as stored on a memory 38) configured for execution by the processor (e.g., the processor 37).
Blood entering into the tube 119 and found around the catheter has significant light absorbing properties at specific wavelengths that would minimize the passage of light from the LED 122 through a light path that passes through soft tissue, the vein wall, venous blood, and the fluid in the IV catheter and tubing 119. When infiltration has occurred, fluid should surround the internal portion of the catheter 121 (e.g., 18 Gauge), and the amount of light from the LED 122 to the photodiode 116 is reduced from optical absorption caused by the blood. This is in contrast to an infiltrated state where IV fluid surrounding the catheter 121 minimally absorbs or attenuates the same light wavelength absorbed by venous blood and therefore allows a larger intensity of light to pass from the LED 122, through the soft tissue, extravasated fluid, and then into the catheter 121 and IV tubing 119 to the light detector, e.g., the photodiode 116.
The photodiode 116 may be disposed such that it could receive any light passing through a catheter 121 and the tube 119. The T-connector 117 is configured to allow fluid to simultaneously pass into the catheter 121 from tube 118 via tube 119, and allow light from the tube 119 to be diverted into the photodiode 116.
The LED 122 emits light at a wavelength that is attenuated by the hemoglobin in the blood and is positioned to illuminate the surface of the skin 124 near the open end of the catheter 121. When the catheter 121 is properly placed within the vein 126, the attenuation of the illumination from the LED 122 by blood reduces the amount of light that reaches the photodiode 116. Additionally, when the catheter 121 is no longer positioned within the vein 126 (e.g., which occurs when an infiltration occurs), the illumination from the LED 122 passes into the catheter 121 and through the tube 119 to be detected by the photodiode 116.
 FIG. 40 shows a graphic 127 illustrating the optical absorption of oxygenated and de-oxygenated hemoglobin in accordance with an embodiment of the present disclosure. The graphic 127 shows that both oxygenated and de-oxygenated hemoglobin have strong absorption in the 530-590 nanometer range and the 400-450 nanometer range. Referring again to FIG. 39, in some embodiments of the present disclosure, the LED 122 and the photodiode 116 may be configured to emit and absorb, respectively, 405 nanometers, 470 nanometers, 530 nanometers, 590 nanometers and 625 nanometers optical wavelengths. In some embodiments, the photodiode 116 may be a silicon photo-detector with measurable response from 400 nanometers to 1000 nanometers.
Referring now to FIG. 41, another infiltration detector 128 in accordance with another embodiment of the present disclosure is shown. The infiltration detector 128 includes a laser 129 to further illuminate the vein 126. The photodiode 116 is placed at the end of a syringe 130, which includes a wrapping of copper tape to minimize stray light. The LED 122, the laser 129 (e.g., a laser pointer), or both may be used to illuminate the end of the catheter 121. The LED 122 may emit light having wavelengths about 625 nanometers, and the laser 129 may emit light red wavelengths.
In some embodiments of the present disclosure, the catheter 121 and/or the tube 119 includes a stainless steel needle (e.g., 18 gauge) having connectors wrapped in aluminum foil. In yet additional embodiments of the present disclosure, the LED 122 and/or the laser 129 may be modulated to enhance detection by the photodiode 116.
The syringe 130 may be used to apply a negative pressure to the tube 119. The processor 37 of FIG. 2 may be coupled to the photodiode 116 and a position sensor of the syringe 130 to determine if an infiltration has occurred. If, after the syringe 130 (either manually of via an automatic actuator) is pulled back as sufficient amount of distance and no blood is detected by the photodiode 116 (e.g., from spectral absorption by the blood), the processor 37 may issue an alert and/or alarm to indicate that an infiltration has occurred.
In another embodiment, a small fiber optic disposed through the catheter 121 or needle illuminates the area at the tip of the catheter 121, e.g., the LED 122 is coupled to the fiber optic cable to guide light into the vein 126. Additionally or alternatively, a pulse oximeter over the IV site may be used to automatically measure a baseline profile of absorption to detect changes caused by an infiltration, e.g., using the processor 37.
It yet additional embodiments, a fluorescent coating is optionally applied to the tip of the needle of the catheter 121 that is excitable by light in a wavelength significantly absorbed by venous blood. For example, colored light which is absorbed by hemoglobin would not be detectable when the catheter 121 is properly located in the vein. When the catheter 121 was located outside of the vein, this light would not be absorbed and would become detectable by the photodiode 116. The fluorescent coating will emit less when the exciting light is absorbed by the hemoglobin, and the emitted light may also be absorbed by the hemoglobin.
For example, the emitted light from the fluorescent coating may be different than the exciting light, e.g., from the LED 122, and the photodiode 116 may include a filter to filter out the exciting light from the LED 122 and to receive the light being emitted from the excited fluorescent coating. In some embodiments, the fluorescent coating may fluoresce when a black light is applied. Additionally or alternatively, the LED 122 may be modulated.
 FIG. 42 shows a perspective view of an occluder 131 in accordance with an embodiment of the present disclosure. FIG. 43 shows a side view of the occluder 131, and FIG. 44 shows a side view of the occluder 131 in operation. Referring now to all of FIGS. 42, 43, and 44, the occluder 131 includes occluder edges 132 and a pivot 133. The occluder 131 may include a spring (not shown) to force the occlude edges 132 against a tube 135. Additionally or alternatively, the occluder 131 may include an actuator 134 to actuate the occluder 131 against the tube 134.
The occluder 131 may be used within a peristaltic pump such that when a door is opened for positioning the tube 135, the occluder 131 is opened for placing the tube 135 within the region of the occluder edges 132. When the door is opened again, the occluder 131 may transition from an open to a relaxed state by action of the actuator 134 to occlude the tube 135.
 FIG. 45 shows a side view of a valve 136 for use in a cassette in accordance with an embodiment of the present disclosure; FIG. 46 shows a top view of the valve 136; and FIG. 47 shows another side view of the valve 136 installed within a cassette in accordance with an embodiment of the present disclosure. As is easily seen in FIG. 45, a path 137 illustrates the flow of fluid. In FIG. 46, the exit orifice 138 and reentry orifice 139 are visible. FIG. 47 shows a membrane 140 when the valve 136 is installed in a cassette. The membrane 140 may be set to compress again the valve 136 and may be 0.032 inches thick. The membrane 140 may use an UV-cured adhesive. The membrane 140 prevents the fluid from flowing in the wrong direction, e.g., opposite to that of the path 137 as shown in FIG. 45. When the fluid attempts to flow in the wrong direction, the suction force presses the membrane 140 against the exit orifice 138 preventing fluid from flowing from the reentry orifice 139 to the exit orifice 138. Additionally or alternatively, a plunger coupled to an actuator may be used to compress the membrane 140 to further close the valve 136. In yet an additional embodiment of the present disclosure, a positive or negative pressure may be applied to the top of the membrane 140 to control the valve 136.
 FIG. 48 shows a sliding valve 141 having an inclined plane to provide sealing in accordance with an embodiment of the present disclosure. The sliding valve 141 includes a sealing surface 142 and a mounting surface 143. As seen from FIG. 49 which shows a side view of the sliding valve 141, the sliding valve 141 includes spring arches 144, and a wedge 145 to create a downward force to seal the port 146 of the mount 147 as shown in FIG. 50.
A downward force on the spring arches 144 causes the sliding valve 141 to slide away from the mounting surfaces 143 exposing the valve port 146. When released, the spring arches 144 force the sealing arm 148 towards the mounting surfaces 143, and the downward force wedges 145 make contact with a molded counterpart in the mount 147 and force the sealing surface 142 onto the valve sealing surface port 146.
 FIGS. 51-55 show a vent 149 for a reservoir 150 in accordance with an embodiment of the present disclosure. The vent 149 may be used on the fluid reservoirs 2, 3, or 4 in FIG. 1, may be used on the air filter 50 or with the drain chamber 53 of the pump 19 as shown in FIG. 3. The vent includes a septum 151, an air permeable filter 151, and a tube 153. In some embodiments of the present disclosure, a reservoir 150 of an infusate is rigid, e.g., a rigid IV bag or other fluid reservoir for a fluid pumping device. The reservoir 150 may include a vent 149 to allow fluid flow out of a rigid reservoir 150 while venting the fluid reservoir 150 with an air permeable filter 152. In some embodiments, the vent 152 may not be impermeable to water vapor. However, by placing an oil plug 154 inline between the fluid reservoir 150 and the air filter 152, infusate 155 losses are reduced because the oil 154 prevents the infusate from evaporating through the oil plug 154.
The oil plug 154 is created by placing the septum 151 upstream of the reservoir 150 in a relatively narrow cross-sectioned section of the reservoir 150 as shown in FIGS. 51, 52, 53, 54, and 55. As shown in FIG. 52, oil 154 is injected through the septum 151 through a filing needle 156 before injecting the infusate 155 (as shown sequentially in FIGS. 53 and 54). An amount of oil 154 is left in between the air filter 152 and the infusate 155 at the end of the fill. As air is drawn into the reservoir 150 through the air filter 152, as shown in FIG. 55, the oil 154 advances with the infusate 155 preventing evaporative losses.
Additionally or alternatively, in some embodiments, the oil plug 154 is pre-loaded into the tube 153 in between the septum 156 and the air filter 152; for example, as would be the case if the fill procedure began as shown in FIG. 52.
 FIGS. 56-58 illustrate the stages of a flow meter 157 in accordance with an embodiment of the present disclosure. FIG. 56 illustrates a first stage, FIG. 57 illustrates a second stage, and FIG. 58 illustrates a third stage. The stages of FIGS. 56-58 may be implemented as a method in accordance with an embodiment of the present disclosure. A pump disclosed herein may be coupled upstream via the input port 162 and/or an infusion pump may be coupled to the output port 163 downstream to create a fluid from the input port 162 through the flow meter 157 to the output port 163.
The flow meter 157 includes a chamber 158 divided by a membrane 159. The membrane 159 divides the chamber 158 into a first section 160 and a second section 161. The flow meter 157 includes an input port 162 and an output port 163. The flow meter 157 includes first 164, second 167, third 166, and fourth 165 valves. The input port 162 is in fluid communication with the first section 160 via the first valve 164 and the second section 161 via the fourth valve 165. The output port 163 is in fluid communication with the first section 160 via the third valve 166 and the second section 161 via the second valve 167. The chamber 158 may be spherically shaped or cylindrically shaped. The chamber 158 may be rigid, e.g., the chamber 158 may be made out of a plastic, metal, or other rigid or semi-rigid material.
The flow from the input port 162 to the output port 163 may be monitored by use of the flexible membrane 159. The passage of fluid may be controlled via actuation of the first valve 164, the second valve 167, the third valve 166, and the fourth valve 165. To fill the second section 161 of the chamber 158 and empty the first section 160 of the chamber 158, the first valve 164 and the second valve 167 are closed while the third valve 166 and the fourth valve 165 are opened. This pushes the diaphragm or membrane 159 to the top side of the chamber 159 as shown in FIG. 57. As illustrated in FIG. 58, this process can be reversed to fill the first section 160 and empty the second section 161 by opening the first valve 164 and second valve 167 while closing the third valve 166 and fourth valve 165. Because the volume of the chamber 158 is known, the volume of fluid flowing through the input port 162 to the output port 163 can be estimated by the movement of the membrane because it is expected that the membrane 159 will become flush against the inner surface of the chamber 158.
To determine when the membrane 159 (i.e., diaphragm) has reached the top or bottom of the chamber 158, a pressure sensor could be added to the input valve 162. When the membrane 159 reaches the end of the travel, the flow from the input port 162 will be occluded and the pressure will increase. At this point, the valves can be switched (as shown in FIG. 58) and the process continued on the opposite chamber.
In some embodiments of the present disclosure, the valves 164, 165, 166, and 167 may be mechanically toggled. The input port 162 pressure could potentially be used to mechanically toggle a switch that alternately opens and closes the two pair of valves in each state as illustrated by FIGS. 56-57, or FIG. 58. For example, the inlet pressure could expand a spring-loaded diaphragm which pushes on a latching mechanism that controls the valves 164, 165, 166, and 167.
Additionally or alternately, in some embodiments, the chamber 158 may be made of a clear material (polycarbonate, topaz, etc.) and the diaphragm 159 out of an opaque material, and a camera may be used to observe the chamber 158 and detect when the diaphragm 159 has reached the end of its travel. In yet another embodiment, a âtargetâ image may be placed on the diaphragm 159 and a pair of stereo cameras (not shown) could detect when this target has reached the chamber 158 housing edge and is viewable. For example, there may be a camera to view the first section 160 from the outside and another camera to view the second section 161 from the outside.
 FIG. 59 shows a diagram of a disposable portion 168 of a flow rate meter in accordance with an embodiment of the present disclosure. The disposable portion 168 may be part of the flow meter 10, 11, or 12 of FIG. 1, the flow meter 169 of FIG. 2 for use within the infusion site monitor 26, or may be the flow meter 48 of FIG. 3 for use with the pump 19 (in some embodiments, the flow meter 48 is coupled to the tube 56). In yet additional embodiments, the disposable portion 168 is part of an integrated flow rate meter and membrane pump. The disposable portion 168 may interface with an upper clam-shell Acoustic Volume Sensing (AVS) assembly and a lower clam-shell AVS assembly (e.g., the upper clam-shell AVS assembly 192 and the lower clam-shell AVS assembly 193 of FIG. 70 as described below). Acoustic volume sensing is described in greater depth in the section of the detailed description tilted âACOUSTIC VOLUME SENSINGâ
The disposable portion 168 includes inlet tubing 170, an inlet occlude release collar 171, an inlet Duck-bill occluding valve 172, a disposable body 173, fluid tracks 174 and 181, an AVS chamber 175 (described below), an air purge and spectral analysis window 176, and an outlet assembly 177. The outlet assembly 177 includes an occluding valve 178, a release collar 179, and an outlet tubing 180.
The duck-bill valves 172 and 178 may be actuated open by deforming the duck-bill (pinching the slot) when AVS clam-shells (see FIG. 70) are closed over the AVS fluid chamber 175, and/or there may be separate components on the tubing set to open the valves 172 and 178 manually (e.g. sliding an oval ring over the duck bill to open it, etc.).
The AVS chamber 175 may be utilized to measure the fluid flowing through the disposable portion 168. That is, the AVS system described below can measured the volume of fluid within the AVS chamber 175. The flow rate may be communicated by a processor to the monitoring client 6, e.g., via a wired or wireless connection. The measurement taken from the AVS chamber 175 may be operatively communicated to a processor, e.g., the processor 37 of the infusion site monitor 26 of FIG. 2 or the processor 38 of the pump 19 of FIG. 3 to control the measurement of fluid flowing through the AVS chamber 175.
Referring to FIGS. 1 and 59, the disposable portion 168 may be used (with the full clam-shell AVS assembly described below) to control the flow of the pumps 19, 20, and/or 21 (directly or via a control system within the monitoring client 6) or may be used to indicate when a predetermined amount of fluid has been fed into the patient 5, in which case a signal is sent to the pumps 19, 20, and/or 21 to stop fluid flow (directly or via a control system within the monitoring client 6). In some embodiments, the disposable portion 168, when used as a flow meter with the full clam-shell AVS assembly, can be used to run a pump in a fixed volume mode with a variable fill and/or empty time, can be used to run in a variable volume with a fixed and/or variable fill or empty time, or can be run in a fixed measurement interval, etc. Additionally or alternatively, the disposable portion 168 may detect error conditions or run-away conditions (e.g., fluid is flowing beyond a predetermined threshold), which may cause the flow rate meter using the disposable portion 168 to issue an alarm or alert, e.g., directly or to the monitoring client 6. The alarm or alert may be used to cause one or more of the valves 16, 17, 18, and/or 25 to prevent additional fluid flow.
Referring again to FIG. 59, the disposable portion 168 may be formed by two or more sheets of barrier film or layers of barrier film and a rigid plastic sheet that are heat sealed together. The disposable portion 168 may be used with (or is part of) the disposable portion 194 of FIGS. 60-62, the disposable portion 201 of FIGS. 63-65, the disposable portion 208 of FIGS. 66-68, and the disposable portion 220 of FIG. 69. The fluid tracks may be incorporated into the film and/or the rigid plastic (e.g. they may be thermally formed or simply an area of the film that is not heat sealed). For example, the rigid portion may define the fluid tracks 174 and 181, and the AVS chamber 175; and a flexible layer may be placed over the rigid sheet such that the flexible layer is generally flat when in an unpressured state over the rigid layer.
For example, the disposable portion 168 may be formed from three layers using a rigid plastic sheet with a barrier film/membrane on either side that contains fluid tracks routed on one (or both) sides connected by through hole(s) in the rigid plastic sheet (e.g., a âviaâ).
The AVS chamber 175 may be incorporated into the film and/or the rigid plastic (e.g. thermally formed or simply an area of the film that is not heat sealed; that is, the chamber expands with the elastomeric potential when filled). The fluid may be routed into the AVS chamber 175 via fluid tracks in the film/membrane, e.g., when using the three layer design. For example, the AVS chamber 175 may be fed by holes in the AVS chamber 175 with the fluid tracks 174 and 181 on the opposite side. In some embodiments, these holes are part of a valving system that works on the fluid tracks on the opposite side. The tubes 170 and 180 may interface into the fluid tracks 174. The tubes 170 and 180 include normally closed occluding valves 172 and 178, respectively. Additionally or alternatively, in some embodiments of the present disclosure, the occluding valves 172 and/or 178 may be one-way valves.
The air purge and spectral analysis window 176 may be transparent for spectral imaging and/or analysis of the composition of the fluid contained therein. For example, the spectral analysis window 176 may be used by a camera to detect blood therein or to determine the spectral absorption or reflection of the material therein which is compared to a database to determine the likely composition of the fluid and/or a concentration of a material.
The air purge 176 may include a micorporous hydrophobic membrane that has one side in contact with the infused fluid and the other side is exposed to atmosphere air. The micorporous hydrophobic membrane may be located, in some specific embodiments, in a pressurized section of the flow path. The air purge and spectral analysis window 176 may include an integral air bubble trap to prevent free flow of bubbles and/or pressure may drives trapped bubbles across the membrane while fluid passes past the trap, etc.
The disposable portion 168 may optionally include several alignment features 182, which may be ink markers, holes, indentations, or other alignment feature(s). The disposable portion 168 may be constructed using stamping, vacuum forming and heat sealing, and can use materials known to be compatible with infusion fluids (e.g. IV bag materials, polycarbonates, Topaz, etc.).
 FIGS. 60-62 show several views of a single-sided disposable portion 194 of a flow meter in accordance with an embodiment of the present disclosure. FIG. 60 shows a side view of the disposable portion 194 of a flow meter, FIG. 61 shows a top view of the disposable portion 194 of the flow meter, and FIG. 62 shows an end view of the disposable portion 194 of the flow meter.
The disposable portion 194 includes a one or more film layers 195 that define a fluid space 196 with a bottom film 197 that may be rigid (in some embodiments the bottom film 197 is semi-rigid or flexible). As is easily seen in FIG. 61, the film 195 also forms an AVS chamber 198. As seen in FIG. 62, the AVS chamber 198 is positioned to measure the fluid flowing into and out of the AVS chamber 198 via the fluid track 199. The fluid track 199 interfaces with the AVS chamber 198 allowing it to expand as fluid enters into the AVS chamber 198 from the fluid track 199. The fluid track 199 may hold a volume of, in some specific embodiments, 0.025 cc allowing for 300 milliliters per hour maximum flow rate. The layers 195 are head bonded along length 200.
As shown in FIG. 62, the fluid track 199 formed by the layer 195 is visible and the AVS chamber 198 is also visible; however, the layer 195, in some embodiments, transitions from the fluid track 199 to the AVS chamber 199 when transitioning from the left side of the disposable portion 194 to the right side as shown in FIG. 61. For example, in FIG. 62, the fluid track layer 199 is relatively proximal (along a length 284 of FIG. 61) to the AVS chamber 198 (which is along a length 285 of FIG. 62), which is distal in the view shown in FIG. 62.
 FIGS. 63-65 show several views of a double-sided disposable portion 201 of a flow meter in accordance with an embodiment of the present disclosure. The disposable portion 201 includes one or more top films 202 with one or more bottom films 203 that together define a fluid space 204. Either one of the films 202 and/or 203 may be rigid, semi-rigid, flexible, or elastic. In additional specific embodiments, a rigid, planar layer may be positioned between the layers 202 and 203 (not depicted) with the layers 202 and 203 being flexible.
As is easily seen in FIG. 64, the films 202 and 203 form an AVS chamber 205. As is easily seen FIG. 65, the AVS chamber 205 can measure fluid received from a fluid track 206. Also, fluid may leave the AVS chamber 205 via the fluid track 206. As also shown in FIG. 65, the heat sealed and/or bonded interface 207 is shown. As mentioned, in some embodiments, a rigid member (not shown) may be placed in the center of the layers 202 and 203 thereby defining two AVS chambers 205 and two fluid tracks 206; in this specific embodiment, a small hole may exists between the two fluid tracks 206 and/or the two AVS chambers 206 to provide pressure equalization therebetween. Any common mode compliance of the fluid track 206 would be accounted for by one of the AVS chambers 205 thereby providing a self balancing of the AVS measurements.
 FIGS. 66-68 show several views of a three-layer, opposite-sided, disposable portion 208 of a flow meter in accordance with an embodiment of the present disclosure. The disposable portion 208 is formed by a top layer 209 and a bottom layer 212 having a rigid plastic layer 210 therebetween. The rigid plastic layer 210 has two holes 217 and 218 that allow fluid to pass between a fluid space 211 and the AVS chamber 213.
The fluid passes from the fluid track 215 through the holes 217 and 218 to transgress through the AVS chamber 213. Also, the disposable portion 208 includes a heat bonded portion 219.
 FIG. 69 shows a top view of another disposable portion 220 of a flow meter in accordance with another embodiment of the present disclosure. The disposable portion 220 includes one or more layers bonded to a rigid body 259. The rigid body 259 includes a cut-out portion 260. The AVS chamber 261 may protrude out of both side of the rigid body 259 allowing an AVS assembly (not shown) to surrounding the AVS chamber 261 to estimate the volume of the AVS chamber 261. Air may completely transgress through the cut-out portion 260 such that a variable volume may be positioned completely (or substantially) around the AVS chamber 261. The disposable portion 220 may be formed from one or more elastic layers sealed to the rigid body 259. The disposable portion 220 includes fluid tracks 262 and 263 enabling fluid to transgress and egress through the AVS chamber 261.
 FIG. 70 shows a flow meter 221 including a full AVS clam shell assembly and a single-sided disposable portion (e.g., the disposable portion 194 of FIG. 62) in accordance with an embodiment of the present disclosure. The flow meter 221 may fill 0.025 cc of liquid for up to 300 milliliters per hour.
The AVS clam shell assembly includes the upper clam-shell AVS assembly 192 and the lower clam-shell AVS assembly 193. The lower clam-shell AVS assembly 192 may be slightly biased for proper seating in the lower backing 233 and/or it may include a rigid plastic sheet or stiffener to compliment the vents 224. The upper and lower clam-shell AVS assemblies 192 and 193 may circumferentially surround the AVS fluid volume 224, e.g., just outside the heat seal using a trough/protrusion âpinchâ; and an o-ring may optionally also be used to seal the AVS fluid volume 224. The flow meter 221 may optionally include an air sensor as described herein, e.g., ultrasonic- and/or camera-based air sensor, to determine if air beyond a threshold is being delivered to a patient; an alarm or alert may be issued in response to the air exceeding the threshold. Additionally or alternatively, the air may be subtracted from the volume of liquid estimated as flowing through the flow meter 221.
The flow meter 221 includes an AVS reference chamber 222, a reference microphone 223, a resonance port 224, an integral perimeter seal or valve 225 (shown in the open state), another integral perimeter seal or valve 230 (shown in the sealed state), a variable volume microphone 226, a speaker 227, and a variable volume 228. The flow meter 221 also includes a spring disk 229. The spring disk 229 may include a small hole for pressure equalization. The spring disk 229 may be formed, in some embodiments, out of an elastomeric film or layer. In some embodiments, the spring disk 229 is used to bring in fluid into the AVS fluid volume 224. The spring disk 229 may provide a spring via pre-forming and/or the variable volume 228 may have a negative or positive pressure relative to either the ambient air and/or the fluid flowing through the AVS fluid volume 224.
The valves 225 and 230 slide along the body of the upper clam-shell AVS assembly 192 to permit or occlude fluid from enter or leaving the AVS fluid volume 224. The valves 225 and 230 are coupled to an actuator (e.g., linear servo, linear stepper motor, a cam follower coupled to a rotating cam, etc.) to control the valve states of the valves 225 and 230. The valves 225 and/or 230 may: be normally closed; actuated open (e.g., using a solenoid and/or Nitinol); include a position sensor; cone-shaped (e.g., a cone shaped plunger from the fluid track side pushes through the elastomer into the AVS chamber inlet/outlet holes to form a seal); and may include an opposing pressure seal to determine if the valve is applying sufficient pressure. The actuators may be coupled to a processor disclosed herein (e.g., the processor 37 of FIG. 2 or 3). The valves 225 and/or 230 may both close in an error condition to prevent fluid from being sent to a patient, e.g., when the processor 37 of FIG. 2 or 3 and/or the monitoring client 6 determines that an error condition exists that requires the stoppage of the fluid flow to the patient. The processor may coordinate operation of the valve 225 and 230 such that the AVS volume 226 is filled when, for example, a pulsing pump pumps liquid downstream. The flow rate meter 221 may coordinate its operation with a pump, e.g., via wireless information received from the pump, such as a flow rate, pulse times, pulse durations, pulse volumes, pulse frequency, etc.
The speaker 227 emits one or more acoustic frequencies which are received by the reference microphone 223 and the variable volume microphone 226. The acoustic gain between the microphones 223 and 226 may be correlated with the volume of the variable volume 228 to determine the volume through the flow rate meter 221. Additionally or alternatively, the phase shift between the microphones 223 and 226 may be correlated with the volume of the variable volume 228. The speaker 227 and the microphones 223 and 226 may be in operative communication with one or more processors to implement an algorithm to determine the volume using AVS, e.g., the processor 37 of FIG. 2 or 3. Additional details related to the operation of AVS are described infra in the section entitled âACOUSTIC VOLUME SENSING.â
The films 231 and 233 define a fluid space 232. As the fluid varies within the AVS fluid volume 224 by entering and leaving via the fluid space 232, the difference in volume is calculated to determine the flow rate via the flow meter 221. That is, the variable volume 228 has an acoustic response that may be used to determine the AVS fluid volume 224. The flow meter 221 also includes ventilation paths 225 to prevent air from building up under the film 233 that defines the AVS fluid volume 224.
In yet an additional embodiment of the present disclosure, the flow rate meter 221 may be utilized as part of a membrane pump. For example, an actuator (not shown) may interface with the spring disk 229 (or the film 231) to providing a pumping action with the AVS fluid volume 224; the actuator may exists within the variable volume or may interface with the spring disk 229 via a shaft that transgresses through the upper clam shell assembly 192 (with an appropriate acoustic seal). The shaft's volume may be accounted for in the AVS measurement and/or the entire actuator may be in the variable volume.
 FIG. 71 shows a side view of a flow rate meter 234 including a top AVS assembly 236 and bottom AVS assembly 238 with integral perimeter seal valves 239 and 340 in accordance with an embodiment of the present disclosure. The flow rate meter 234 may include the disposable portion 201 of FIGS. 63-65. The flow rate meter 234 may allow for flows of up to 0.25 cc per fill for up to 300 milliliters per hour, in some specific embodiments, e.g., 0.125 cc for each side for 150 millimeters per hour on each side.
The top AVS assembly 236 measures the acoustic response of the top variable volume 241 and the bottom AVS assembly 238 measures the acoustic response of the bottom variable volume 242. The measurements of the acoustic response of the top and bottom variable volumes 241 and 242 may be correlated to the top and bottom variable volumes 241 and 242. The volume of the AVS fluid chamber 243 may be estimated by subtracting a predetermined total volume from the volumes of the AVS chambers 241 and 242. A processor disclosed herein (e.g., processor 37 of FIG. 2 or 3) may estimate the volume of the AVS fluid chamber 243.
In yet an additional embodiment of the present disclosure, the flow rate meter 234 may be utilized as part of a membrane pump. For example, one or more actuator (not shown) may interface with the spring disks 235 and/or 237 (or the AVS fluid chamber 243) to provide a pumping action with the AVS fluid volume 243; the actuator may exists within the variable volumes 243 and/or 242 or may interface with the spring disks 235 and/or 237 via a shaft that transgresses through the AVS assemblies 236 and/or 238 (with an appropriate acoustic seal). The shaft's volume may be accounted for in the AVS measurement and/or the entire actuator may be in the variable volume.
 FIG. 72 shows a side view of another flow rate meter 244 including a single-sided AVS assembly 245 with surrounding variable volumes 246 and 247 in accordance with another embodiment of the present disclosure. The flow rate meter 244 may use the disposable portion 220 of FIG. 69. The variable volumes 246 and 247 may be in fluid communication with each other around the edges of the AVS fluid chamber 248. The AVS assembly 245 measures the acoustic response of the chambers 246 and 247 to correlate the volume of the AVS chambers 246 and 247. The total volume of the AVS chambers 246 and 247 is subtracted from the predetermined total volume to estimate the volume of the fluid within the AVS fluid volume 248.
In yet an additional embodiment of the present disclosure, the flow rate meter 244 may be utilized as part of a membrane pump. For example, one or more actuators (not shown) may interface with the spring disks 286 and/or 287 (or the AVS fluid chamber 248) to provide a pumping action with the AVS fluid volume 248; the actuator may exist within the variable volumes 246 and/or 247 or may interface with the spring disks 286 and/or 287 via a shaft that traverses through the AVS assembly 245 (with an appropriate acoustic seal). The shaft's volume may be accounted for in the AVS measurement and/or the entire actuator may be in the variable volume.
 FIG. 73 shows a side view of yet another flow rate meter 249 including two piston valves 250 and 251 in accordance with another embodiment of the present disclosure. The piston valves 250 and 251 may be coupled to actuators which are, in turn, coupled to a processor, e.g., the processor 37 of FIG. 2 or 3. The flow rate meter 249 includes a top AVS clam-shell assembly 252 and a bottom AVS clam-shell assembly 253. The fluid flows from the fluid track 254, through a hole 255 and into the AVS fluid chamber 256. Thereafter, the fluid can flow through the hole 257 (when the valve 251 is in the open state, through the fluid track 258) and finally out of the flow rate meter 249. The piston valves 250 and/or 251 may alternatively open and close such one of the piston valves is open while the other one is closed. The spring disk 229 may assist in the intake of the fluid or the expelling of the fluid out of the AVS fluid chamber 256.
In yet an additional embodiment of the present disclosure, the flow rate meter 249 may be utilized as part of a membrane pump. For example, one or more actuators (not shown) may interface with the spring disk 288 (or the AVS fluid chamber 257) to provide a pumping action with the AVS fluid volume 257; the actuator may exist within the variable volume 289 or may interface with the spring disk 289 via a shaft that transgresses through the AVS assembly 252 (with an appropriate acoustic seal). The shaft's volume may be accounted for in the AVS measurement and/or the entire actuator may be in the variable volume.
 FIG. 74 shows a flow rate meter 259 having top and bottom AVS assemblies (262 and 263, respectively) which provide a semi-continuous flow in accordance with an embodiment of the present disclosure. The flow rate meter 259 includes valves 260, 261, 264, and 265. The valves 260, 261, 264, and 265 may operate together to fill an AVS fluid volume 266 and 267 in a sequential, but opposite, manner. For example, the valves 260, 261, 264, and 265 may operate to fill the AVS fluid volume 266 while discharging the other AVS fluid volume 267, and vice versa. That is, when an AVS fluid volume is being filled, the other AVS fluid volume may have an AVS measurement taken by the respective AVS assembly.
The flow rate meter 259 also includes a small reservoir 268 to buffer to fluid flowing from a pump and a variable occluder 269 that may be coupled to a processor. The variable occluder 269 may be varied such that the discharge of the AVS fluid volumes 266 and 267 are âsmoothedâ out to produce a semi-continuous flow to the patient (e.g., the AVS fluid volumes 266 and 267 may be spring loaded, such as with a disk spring, to force out the fluid). The processor may use the feedback from the AVS assemblies 262 and 263 to adjust the variable occlude 269 to achieve a target flow rate to a patient.
In one specific embodiment, the flow rate meter 259: measures flow over a range of 0.1 to 300 ml/hr; allows for non-metered flow rates of greater than 300 ml/hr to 2000 ml/hr; the flow resistance does not exceed 1 PSI across a flow range of 0.1 to 2000 ml/hr; the active volume accumulation does not exceed 2 millimeters; has a hold up volume of less than 0.5 ml; has a size of less than 1 inch, by 3 inches, by 1 inch for the disposable; may be battery or wired powered and may run at a rate of 100 ml/hr for Îº hours on the battery power; and may include a user interface that communicates with all of the valves, sensors, and component wirelessly.
 FIG. 75 shows a flow rate meter 276 having two in-line AVS assemblies 270 and 271 with several valves 272, 273, 274, 275, and 277 to control to fluid flowing therethrough in accordance with an embodiment of the present disclosure. The valve 275 allows the least amount of fluid flow into the AVS volume 279 from the AVS volume 278, the valve 274 allows more fluid to flow into the AVS volume 279 from the AVS volume 278, and the valve 273 allow the most amount of fluid to flow into the AVS volume 279 from the AVS volume 278. The valves 273, 274, and 275 may be controlled to control the flow from the pump to the patient.
The two AVS assemblies 270 and 271 may each take measurements of the AVS fluid volumes 278 and 279, respectively. The AVS fluid volumes 278 and 279 may be different because of a pressure differences caused by the valves 273, 274, and 275 as the fluid flow from the pump to the patient. The continuous fluid flow causes a difference in pressure based upon the Bernoulli principle.
A continuous flow sensor may utilize the Bernoulli principle. For example, a fixed orifice or other restriction in a flow path of a fluid (e.g., one caused by an orifice plate) may be used to measure a pressure drop across the orifice to determine the flow rate based on the Bernoulli principle illustrated in Equation (33) as follows:







Q
=


C
d

â¢



2
â¢
Î
â¢

 

â¢
p

Ï


â¢



A
2



1
-


(


A
2


A
1


)

2




.






(
33
)







Where Q is the volumetric flow rate, Cd is the discharge coefficient which relates to turbulence of flow, Ï is the density of the fluid, A1 is the cross-sectional area just in front of the restriction, A2 is the cross-sectional area of the restriction, and Îp is the pressure drop across the restriction. Equation (33) may be simplified to Equation (34) as follows:







Q
=


C
f

â¢

A
0

â¢




2
â¢
Î
â¢

 

â¢
p

Ï


.






(
34
)







Ao is the area of the orifice, and Cf is a constant related to the turbulence and flow geometry specific to the restrictor design (Cf typically has a value between 0.6 and 0.9 that is derived empirically). Therefore, the estimated flow rate is related to the area of the orifice and the square root of the measured pressure drop. The estimated flow rate is also related to the density of the fluid being measured and the orifice geometry.
Therefore, the valves 273, 274, and 275 of the flow meter 276 may be considered a restrictor (e.g., serving as an orifice plate in a continuous flow rate meter) to produce a measurable pressure difference between the AVS volumes 278 and 279. The AVS volumes 278 and 279 may be correlated with respective pressures because the respective membranes forming the AVS chambers 278 and 279 will stretch based upon the pressure therein.
For example, the valves 272 and 277 may be opened thereby allowing fluid to continuously flow from the pump to the patient. The AVS volumes 278 and 279 will have a difference in pressure caused by the total restriction from one or more of the valves 273, 274, and 275 (which may, in some embodiments, be modeled as an orifice).
The differential AVS volume measurements between the AVS chambers 278 and 279 are proportional to flow rate (the pressure difference may be correlated with flow rate empirically). Any common-mode, down-stream pressure change would result in a volume increase in both of the AVS chambers 278 and 279 thereby subtracting out the increase in the AVS chambers 278 and 279. Additionally, a predetermined positive change in the AVS volume measurements may be considered an indication of an occlusion, and a predetermined change in the flow rate may trigger an alarm and/or alert.
The valves 273, 274, and 275 allow a range of flow rates from the pump to the patient to be used and also change the measurement range of the flow rate meter 276. A processor can actuate one or more valves 273, 274, and 275 and can determine the total restriction of occlusion caused by the valves 273, 274, and 275. That is, the configuration of the valves 273, 274, and 275 may be correlated with a model, e.g., a cross-sectional area of a restriction using Equation (33) or (34), for determining the flow rate. The processor may vary the valves 273, 274, and 275 to determine the flow rate within a desired measurement flow rate range.
The AVS assemblies 270 and 271 perform a measurement within a predetermined amount of time by sweeping acoustic frequencies (as described herein), e.g., for one-half a second or 1/20 of a second. In some embodiments, the AVS assemblies 270 and 271 may perform two types of frequency sweeps, e.g., a shorter frequency sweep (e.g., performed in less time) and/or a full frequency sweep, e.g., to do other error checking such as, for example, to check for acoustic leak(s). The flow rate meter 276 may, in some embodiments, coordinate with a pump to introduce a periodic disturbance to calibrate the flow meter 276 and/or for error checking. Additionally or alternatively, small reservoirs 400 and 401 may provide fluid dampening to âsmoothâ the flow in some embodiments. The fluid reservoirs 400 and 401 may be formed from an elastic material that defines a bubble-type flexible bladder.
The valves 272 and 277 may have their operation coordinated to check for error conditions. For example, the valve 272 may be closed while the valve 277 remains open to determine if the fluid is being discharged to the patient for error checking (e.g., to check for occlusions, etc.).
In some embodiments, the valves 272, 273, 274, 275, and 277 are used so that the AVS volumes 278 and 279 are operated such that one of the AVS volumes is filled with a liquid while the other AVS volume is discharges the liquid thereby providing a piece-wise continuous flow measurements using the AVS volumes 278 and 270. Additionally or alternatively, the valves 272, 273, 274, 275, and 277 may also be used to do a âflow to zeroâ test to do a âflow zeroâ correction (e.g. correct for volume drift of the AVS volume measurements).
In one specific embodiment, the flow rate meter 276: may measure continuous flow over a range of 0.1 to 300 ml/hr (in some embodiments up to 2000 ml/hr); has an accuracy of measurement of +/â0.02 ml/hr from 0.1 to 2.5 ml/hr, or 5% otherwise; measures fast enough to be insensitive to flow disturbances of a 10% change in flow in 1 second; measures with head height pressure changes of +/â2 PSI; does not add flow resistance exceeding 1 PSI across a flow range of 0.1 to 2000 ml/hr; has a size of less than 1 inch, by 3 inches, by 1 inch for the disposable; may be battery or wired powered and may run at a rate of 100 ml/hr for 8 hours on battery power; and may include a user interface that communicates with all of the valves, sensors, and components wirelessly.
 FIG. 76 shows a membrane pump 280 having a negative pressure source 281 in accordance with an embodiment of the present disclosure. The membrane pump 280 includes valves 282 and 283 that can alternate between applying a negative pressure to the variable volume 290 and apply atmospheric pressure to the variable volume 290. The valves 282 and 283 are fluidly connected to the AVS reference volume 402 via a port 403 that is of a sufficiently small size that does not introduce acoustic artifacts, e.g., 0.020 inches in some specific embodiments. A processor, e.g., processor 37 of FIG. 3, may control the valves 282 and/or 283 to achieve a target pressure within the reference volume 402 as measured by a pressure sensor 404. The processor, e.g., processor 37 of FIG. 37 of FIG. 3, may be in operative communication with the valves 282 and 283, and with the pressure sensor 404.
The valve 282 may be closed and the valve 283 may be opened thereby putting the variable volume 290 in fluid communication with the negative pressure source 281. Thereafter, the valve 283 may be closed and the valves 282 opened to put the variable volume 2190 in fluid communication with atmospheric air. This may be continually repeated to repeatedly oscillate the pressure within the variable volume 290. In some specific embodiments AVS measurements are made when the variable volume 402 is placed in a static pressure state (e.g., set to ambient pressure, the static negative pressure, or by closing the valves 282 and 283), and the AVS fluid volume 293 is placed in a static pressure state (e.g., the piston valves 291 and 292 are closed).
As previously mentioned, a negative source 281 may be applied to the variable volume 290 by opening the valve 283 and closing the valve 282. When the negative pressure is applied to the variable volume 290, the piston valve 291 may be opened and the piston valve 292 closed to draw fluid into the AVS fluid volume 293. Thereafter, the valve 283 and the piston valve 291 are closed so that an AVS measurement may be taken by the AVS assembly 249 (the AVS assembly 294 includes a lower AVS clam-shell assembly 296). Optionally, the piston valves 291 and 292 may be closed prior to or during the AVS measurement. Thereafter, the valve 282 and the piston valve 292 are opened to allow fluid to flow into the fluid channel 295 from the AVS chamber 293. Next, the piston valve 292 and the valve 282 are closed, and another AVS measurement is taken from the AVS chamber 293. The difference in these AVS measurements may be correlated to the amount of fluid pumped for each respective pumping cycle. That is, each pulse of liquid to the patient may be estimated by subtracting one AVS measurement from another AVS measurement. In some specific embodiments the AVS measurements are each taken at the same pressures of the AVS volume 290 (e.g., at atmospheric pressure or a static negative pressure, as may be determined by the pressure sensor 404) to account for the effects of positive and negative pressures on air-bubble volume thereby mitigating the effect that an air bubble has on the fluid volume flow measurements.
 FIG. 77 shows a membrane pump 300 having a negative-pressure source 296 and a positive-pressure source 297 coupled to valves 298 and 299, respectively, in accordance with an embodiment of the present disclosure. The negative-pressure source 296 may be in fluid communication with the variable volume 301 when drawing fluid into the AVS chamber 302. Likewise, the positive-pressure source 297 may be in fluid communication with the variable volume 301 when discharging fluid out of the AVS chamber 302. The variable volume may be coupled to atmospheric pressure 303 via a valve 304 when an AVS measurement is taken.
Note that no disk spring is used in the embodiment shown in FIG. 77. The AVS fluid volume 302 is formed by a flaccid material that generates little or no pressure within the variable volume 301. In some embodiments of the present disclosure, the pump 300 takes AVS measurements all at the same pressure to account for the pressure effects on bubble size; for example: the AVS volume measurement may be taken as follows: (1) close the piston valve 405, open the piston valve 406, open the valve 298, close the valve 299, and close the valve 304 thereby causing fluid to be drawn into the AVS chamber 302 with the negative pressure from the negative-pressure source 296; (2) close the piston valve 406 and close the valve 298; (3) open the valve 304 thereby causing the pressure of the variable volume 301 to reach atmospheric pressure 303; (4) close the valve 304; (5) take an AVS measurement; (6), open the valve 299 and open the piston valve 405 thereby discharging the fluid out of the AVS volume 302; (7) close the piston valve 405 and close the valve 299; (8) open the valve 304 to equalize the variable volume pressure to atmosphere 303; (9) close the valve 304; (10) take an AVS measurement; (11) and compare the AVS volumes measurements to determine the volume discharged, e.g., to estimate flow rate. The previous example may be modified to take one or more AVS measurements in positive pressure, negative pressure, atmospheric pressure, or in some combination thereof.
In yet an additional embodiment, the positive pressure source 297 is used to take AVS measurements when the variable volume 301 is under a positive pressure. For example, in some embodiments of the present disclosure, the pump 300 takes AVS measurements all at a positive pressure to account for the pressure effects on bubble size; for example: the AVS volume measurement may be taken as follows: (1) close the piston valve 405, open the piston valve 406, open the valve 298, close the valve 299, and close the valve 304 thereby causing fluid to be drawn into the AVS chamber 302 with the negative pressure from the negative-pressure source 296; (2) close the piston valve 406 and close the valve 298; (3) open the valve 299 thereby causing the pressure of the variable volume 301 to reach a predetermined positive pressure as indicated by the pressure sensor 407; (4) close the valve 299; (5) take an AVS measurement; (6) open the valve 304 and open the piston valve 405 thereby discharging the fluid out of the AVS volume 302; (7) close the piston valve 405 and close the valve 304; (8) open the valve 299 thereby causing the pressure of the variable volume 301 to reach a predetermined positive pressure as indicated by the pressure sensor 407; (9) close the valve 299; (10) take an AVS measurement; (11) and compare the AVS volumes measurements to determine the volume discharged, e.g., to estimate flow rate. The previous example may be modified to take one or more AVS measurements in positive pressure, negative pressure, atmospheric pressure, or some combination thereof.
The pump 300 may also, in some embodiments, determine if there is compliance in the system, such as compliance caused by air, by taking AVS volume measurements at two different pressures. For example, two AVS measurements may be taken during the fill phase at two different pressures (e.g., negative pressure and ambient pressure, or some other combination) and/or during the discharge phase at two difference pressures (e.g., negative pressure and ambient pressure, or some other combination). The change in volume at the two pressures may be correlated with compliance of the AVS volume 302, such as if there was an air bubble in the fluid. If a predetermined amount of AVS volume 302 variation is determined to exists, a processor may determine an error condition exists and issue an alarm or alert. In yet another embodiment, the flow rate measurement may be corrected for the air volume measurement taken; For example, a processor may determine the volume of air that was delivered to the patient instead of a drug, such as insulin, and compensate the delivery of the insulin to ensure that the prescribed does of insulin is delivered. For example, consider the following additional embodiments.
In some embodiments of the present disclosure, compliance may be estimated in the pump 300 by taking at least two AVS measurements at different pressures to account for air bubbles; for example: the AVS volume measurements may be taken as follows: (1) close the piston valve 405, open the piston valve 406, open the valve 298, close the valve 299, and close the valve 304 thereby causing fluid to be drawn into the AVS chamber 302 with the negative pressure from the negative-pressure source 296; (2) close the piston valve 406 and close the valve 298; (3) take an AVS measurement while the reference volume 301 remains under negative pressure; (3) open the valve 304 thereby causing the pressure of the variable volume 301 to reach atmospheric pressure 303; (4) close the valve 304; (5) take an AVS measurement while the reference volume 301 remains at atmospheric pressure; (6) compare the two AVS measurements from (3) and (5) to determine compliance of the AVS volume 302; (7) open the valve 299 and open the piston valve 405 thereby discharging the fluid out of the AVS volume 302; (8) close the piston valve 405 and close the valve 299; (9) take an AVS measurement while the variable volume 301 remains under positive pressure; (10) open the valve 304 to equalize the variable volume pressure to atmosphere 303; (11) close the valve 304; (12) take an AVS measurement while the variable volume 302 remains under atmospheric pressure; (13) compare the two AVS measurements from (9) and (12) to determine compliance of the AVS volume 302; (14) and compare at least two AVS volume measurements to determine the volume discharged, e.g., to estimate flow rate. The above example may be modified in various ways such that the two AVS measurements having two different pressures and may occur during the filling stage, the discharging stage, any other stage of the pumping, using one or more of a positive pressure measurement, a negative pressure measurement, an atmospheric pressure measurement, or some combination thereof.
Consider yet another embodiment: the AVS volume measurement and pumping action may occur as follows: (1) close the piston valve 405, open the piston valve 406, open the valve 298, close the valve 299, and close the valve 304 thereby causing fluid to be drawn into the AVS chamber 302 with the negative pressure from the negative-pressure source 296; (2) close the piston valve 406 and close the valve 299; (3) take an AVS measurement when the variable volume 301 remains at a negative pressure; (4) open the valve 299 thereby causing the pressure of the variable volume 301 to reach a predetermined positive pressure as indicated by the pressure sensor 407; (5) close the valve 299; (6) take an AVS measurement when the variable volume 301 is at a positive pressure; (7) compare the two AVS measurement from (3) and (6) to determine compliance of the AVS volume 302; (8) open the valve 304 and open the piston valve 405 thereby discharging the fluid out of the AVS volume 302; (9) close the piston valve 405 and close the valve 304; (10) take an AVS measurement while the variable volume 301 is at an atmospheric pressure (in another embodiment, the AVS volume measurement is taken at a negative pressure); (11) open the valve 299 thereby causing the pressure of the variable volume 301 to reach a predetermined positive pressure as indicated by the pressure sensor 407; (12) close the valve 299; (13) take an AVS measurement; (14) and compare at two AVS volume measurements to determine the volume discharged and/or the compliance of the variable volume, e.g., to estimate flow rate. The above example may be modified in various ways such that the two AVS measurements having two different pressures may occur during the filling stage, the discharging stage, any other stage of the pumping, using one or more of a positive pressure measurement, a negative pressure measurement, an atmospheric pressure measurement, or some combination thereof.
In one specific embodiment, the membrane pump 300: has a flow rate target of 0.1 to 2000 ml/hr; can generate at least a maximum of 3 PSI and up to 10 PSI; can draw fluid from a reservoir of a maximum of negative pressure of at least â2 PSI; may be battery powered; may be powered by a cable; and may have a user interface that wirelessly communicates with a processor coupled to all actuators, valves, pressure sensors, and other devices.
 FIG. 78 shows an optical-sensor based flow rate meter 305 in accordance with an embodiment of the present disclosure. The flow rate meter 305 includes an IR source 306 that reflects light off a flexible membrane 307. The reflected IR light is received by a sensor 308. The sensor formed by the IR source 306 and the IR sensor 308 may be a sensor with the part number: GP2S60 manufactured by Sharp Corporation. The light reflected off of the membrane 307 may be correlated to a volume 309. With an upstream or downstream pump (not shown) used in conjunction with input and outlet valves (not shown) the flow rate me be calculated by measuring the light as it reflects off the membrane 307. Since a change in fluid pressure in the line results in a displacement of the elastomer membrane 309, the distance between the sensor 308 varies as a function of the pressure in the fluid line; therefore the output of the sensor is proportional to the pressure in the fluid line and may be correlated with pressure and/or volume.
The flow rate meter 305 may be used by a membrane pump disclosed herein to facilitate positive and/or negative pressure measurements. The pressure sensitivity may be tuned by selecting the elastomeric properties of the membrane and the area of fluid contact with the membrane forming the AVS volume 309. The reflective property of the elastomeric membrane may be enhanced with metal, plastic, film, or other reflective material. A temperature sensor may be added to account for the thermal effects of the material that forms the AVS volume 309. A heat sink and/or thermal controller around the elastomer AVS chamber 309 may be used to mitigate thermal effects, in some specific embodiments.
The IR source 306 may be pulsed and/or multiplexing may be used with multiple IR sources 306 and multiple sensors 307 to inhibit cross-talk error. An initial reading may be used as an offset null, and the change in sensor output may be correlated with changes in pressure in the AVS volume 308. Focusing optics may be used with the disposable portion, e.g., the membranes, to facilitate the ranging and aligning of the IR source 306 and the IR sensor 308. In alternative embodiments, an ultrasonic proximity sensor is used instead of the IR source 306 and the IR sensor 308.
In one specific embodiment, the flow rate meter 305 may: have a sensitivity to line pressure over a range of â2 to +10 PSI; may measure a line pressure to within +/â20% over a range of 1 to 10 PSI; have a resolution of at least 10 bits; and may be low power.
 FIG. 79 shows a pressure-controlled membrane pump 322 in accordance with an embodiment of the present disclosure. FIGS. 80-82 show a legend for reference herein; that is, refer to FIG. 80-82 for the legend of symbols for FIGS. 83, 85, 87, 88, 90, 91, 93, 95, and 97. Referring again to FIG. 79, the membrane pump 322 includes an AVS assembly 323 having a reference volume 324 and a variable volume 325. The reference volume 324 includes a speaker 326 for generating an acoustic signal in the reference chamber 324 which travels through a port 357 to the variable volume 325. The acoustic signal is received by a reference microphone 327 and a variable-volume microphone 328. The signals from the microphones 327 and 328 are compared to determine an acoustic response to measure the volume of the AVS chamber 335. An optional optical sensor 329 may be used to reflect light off of a membrane forming the AVS chamber 335. The optical sensor 329 may be used to facilitate the estimation of the volume of the AVS chamber 335. In some embodiments multiple optical sensors 329 may be used.
The pump 353 may be a diaphragm pump, such as one having the part number: T3CP-1HE-06-1SNB, manufactured by Parker Hannifin Corporation located at 6035 Parkland Boulevard, Cleveland, Ohio 44124-4141; additionally or alternatively, other pump types and/or pumps manufactured by any other manufacturer may be utilized.
A variable voltage applied to the pump 353 (see FIG. 79) may be adjusted in real time to reach a desired pressure as measured by the pressure sensor 340. The pump 353 can have a flow rate of several liters per minute. The variable volume 325 may have an air volume of 0.5 cc, and may be pressure limited to between 1-10 PSI. In some embodiments, the pump 353 has a fill and empty cycle time of 1 Hz and a fluid chamber of 0.5 cc resulting in a max flow rate of 1800 cc/hr, for example. In additional embodiments, variable pressure may be controlled in bursts that last in the tens of milliseconds and six aliquots may be delivered over an hour interval to achieve a flow rate of 0.1 cc/hr. In additional embodiments, an alternative pneumatic flow path (not shown) having a pneumatic flow restriction may be used to lower the working pressure on the variable volume 324 thereby facilitating low and high volumetric flow ranges.
A fluid reservoir 331 is coupled through a fluid path to a one-way valve 332. The valve 332 may be a pinch valve. An optical sensor 333 measures when the valve is closed, e.g., an optical beam may be broken when the pinch valve 332 is open or the optical beam is broken when the pinch valve 332 is closed.
The fluid travels into the AVS volume 335 through a fluid line 334. The fluid may be discharged through a fluid path to a one-way valve 336 that is also measured using an optical sensor 337. Finally, the fluid enters into a patient 338.
The reference chamber 324 and the variable volume chamber 325 are in fluid communication with a line 339. A pressure sensor 340 measures the pressure of the line and hence the chambers 324 and 325. Additionally or alternatively, the pump 322 includes a temperature sensor 330. The pressure from the pressure sensor 340 and/or the temperature from the temperature sensor 330 may be used for to increase the accuracy of AVS measurements.
The valve 341 connects the tube 339 to the ambient pressure 342. A pressure sensor 343 measures ambient pressure. The valve 341 is also coupled to a valve 344 which, in turn, is connected to a negative pressure source 347 and a positive pressure source 345. The positive pressure source 345 is coupled to a pressure sensor 346, and the negative pressure source 347 is coupled to another pressure sensor 348. In some specific embodiments, the positive pressure source 345 and negative pressure source 347 may be accumulators where predetermined pressures are set therein and vented into the reference volume 324 (via the valves 344, 341, 350, and 349) to develop specific pressures.
A variable flow/pressure pump 353 is coupled to both of the valves 349 and 350 to keep the positive pressure reservoir 345 at a positive pressure and the negative pressure reservoir 347 at a sufficiently lower pressure. The valves 350 and 349 are also coupled to atmospheric vents 354 and 351, respectively. The variable flow/pressure pump 353 is fed a signal at 356, which may be fed back to an output pin for verification by a processor, e.g., processor 37 of FIG. 2. Also, a switch 355 may enable and/or disable the pump 353.
In some embodiments, the one or more optical sensors 329 may be used as part of an inner portion of a control loop that has a target aliquot volume to deliver. For example, the one or more optical sensors 320 may provide a controller within the processor 37 of FIG. 2 (e.g., a PID controller) with an estimate of fill or discharge volume based on the deflection of the AVS chamber's 335 membrane as measured by the one or more optical sensors 329. The feedback from the one or more optical sensors 329 may be used to control the pressure flow or the timing of the pneumatics in the AVS pump chamber, e.g., the valves 231, 344, 349, and 350.
Multiple optical sensors 329 may be used to triangulate the AVS chamber's 335 membrane position; additionally or alternatively, the membrane may have reflective features disposed surface of the membrane of the AVS chamber 335 to provide a reflective surface for the optical sensors 329. In some specific embodiments, an outer portion of the control loop can target the trajectory delivery volume delivered to the patient to tune the individual aliquot volume. For example, the optical volume sensing functionality performed by the one or more optical sensors 329 may provide an independent volume measurement that is used as a check on the AVS-based volume measurements and/or to calculate errors in volume estimation. In additional embodiments, only optical volume measurements are performed, i.e., in this specific exemplary embodiment, no AVS is used).
 FIG. 83 shows a flow-controlled membrane pump 358 in accordance with an embodiment of the present disclosure. The flow-controlled membrane pump 358 is similar to the pressure controlled pump 322 of FIG. 79; however, the flow-controlled membrane pump 358 does not have the reservoirs 345 and 347 as shown in FIG. 79.
 FIG. 84 shows a state diagram 359 of the operation of the flow-controlled membrane pump 358 of FIG. 83 in accordance with an embodiment of the present disclosure. The state diagram 359 includes states 360-368. The states 360-368 are illustrated by FIGS. 85-98.
Referring now to FIGS. 84, 85, and 86, an idle state 360 is depicted in FIGS. 84 and 86 with FIG. 86 showing more details. The idle state 360 includes substates 370-371. In substate 370, several variables are set. After a predetermined amount of time after substate 370 sets the variables, the substate 371 measures several values which are checked against predetermined ranges.
 FIG. 85 shows the flow-controlled membrane pump 358 of FIG. 79 illustrating the operation of the valves when in the idle state 360 of the state diagram of FIG. 84 in accordance with an embodiment of the present disclosure. In the idle state 360, the valve 341 couples the reference volume 324 to the atmospheric pressure source 342. Note that, as shown in FIG. 85 which illustrates the idle state 360, the membrane forming the AVS volume 335 is deflated.
As shown in FIG. 86, the substate 370 sets the variables PCadj, PCenb1, PCenb2, PCv1, PCv2, PCv3, HCv1, and HCv2; e.g., via applying an input voltage into an appropriate input (see FIG. 83). Referring to FIGS. 85 and 86, the variable PCadj sets the pump 353, the variable PCenb1 enables the input to the pump 353, the variable PCenb2 enables the switch 355, the variable PCv1 controls the valve 350, the variable PCv2 controls the valve 349, the variable PCv3 controls the valve 341, the variable HCv1 controls the valve 332, and the variable HCv2 controls the valve 336.
Also as shown in FIG. 86, after the parameters are set in substate 370, the substate 371 takes several measurements. In substate 371, the PSavs, PSatm, PCmon, OPTvar, OPThv1, OPThc2, and Tavs values are taken and compared to predetermined ranges. If any of the measured values are outside a predetermined range, e.g., as shown in the expected column 373 in FIG. 86, an error condition 372 is determined to exist; in response to the error condition 372, an alert or alarm may be issued.
The PSavs is a value determined from the pressure sensor 340, PSatm is a value determined from the pressure sensor 343, PCmon is a value determined from the sensor 369 to determine if the pump is receiving the correct voltage from the input voltage 356, OPTvar is a measurement from the optical sensor 329, OPThv1 is the measurement from the optical sensor 333 to determine if the valve 332 is closed or open, OPThc2 is the measurement from the optical sensor 337 to determine if the valve 336 is open or closed, and Tavs is the measurement of the temperature from the temperature sensor 330.
Referring again to FIG. 84, after the idle state 360, the state diagram 359 continues to the positive valve leak test state 361. FIGS. 87-88 show the flow-controlled membrane pump 358 of FIG. 83 in use during the positive pressure valve leak test state of FIG. 84 in accordance with an embodiment of the present disclosure. Note that there is a change in the valve 349 to allow the pumping of pressure into the reference volume 324 from as shown in FIG. 87. FIG. 88 shows where the valve 349 is switched again and the reference volume 324 is isolated from the fluid sources.
 FIG. 89 shows a more detailed view of the positive pressure valve leak test state 361 of FIG. 84 in accordance with an embodiment of the present disclosure. FIG. 89 may also represent state 364 of FIG. 84. The positive pressure valve leak test state 361 includes substates 374-380.
Substate 374 turns on the pump 353 and sets the valves 350, 249, and 341 such that positive pressure is applied to the reference volume 324. The valves 222 and 337 remain closed. In substate 374, measurements are taken. If the measured values are outside predetermined acceptable ranges, a substate 379 determines an error condition occurs. If the average pressure Target Pmax is not reached, state 361 continues to the substate 378 to wait for a predetermined amount of time. This process is depicted in FIG. 87. Substates 374, 375, and 378 may repeat until a predetermined number of substate 378 occurs or a predetermined amount of time is reached at which time an error 379 is substate determines an error condition exists.
State 361 may optionally wait a predetermined amount of time when transitioning from substate 375 to 376. In substate 376, the pump 353 is turned off and the valves 350 and 349 disconnect the variable volume 324 from the pump 353 (as depicted in FIG. 88). State 361 may optionally wait a predetermined amount of time when transitioning from substate 376 to 377. In substate 377, various measurements are taken, such as an AVS measurement using, for example, the AVS system having the speaker 326, and the microphones 327 and 328 which measure the volume of the variable volume 325 (using an acoustic response) to determine if the AVS volume 335 is changing thereby indicating a leak condition. Additionally or alternatively, the optical sensor 330 may detect if a predetermined movement of the membrane 335 occurs to determine if a leak condition exists. If these measurements are outside of a predetermined range and/or beyond a predetermined threshold, then an error condition is determined to exist in substate 280.
Referring again to FIG. 84, after the positive leak valve test state 361 occurs, a negative leak valve test state 362 occurs. Refer to FIGS. 90, 91, and 92 for a description of the positive leak valve test state 362. FIGS. 90-91 show the flow-controlled membrane pump 358 of FIG. 83 in use during the negative pressure valve leak test state of FIG. 84, and FIG. 92 shows a more detailed view of the negative pressure valve leak test state 362 of FIG. 84 in accordance with an embodiment of the present disclosure. As shown in FIG. 92, state 362 includes substates 381-387. FIG. 92 may also be used to illustrate state 365 of FIG. 84.
Substate 381 turns on the pump 353 and sets the valves 350, 249, and 341 such that negative pressure is applied to the reference volume 324. The valves 222 and 337 remain closed. In substate 382, measurements are taken. If the measured values are outside predetermined acceptable ranges, a substate 382 determines an error condition occurs and continues to state 385. If the average pressure Target Pmin is not reached, state 382 continues to the substate 386 to wait for a predetermined amount of time. This process is depicted in FIG. 90. Substates 381, 382, and 386 may repeat until a predetermined number of substates 378 occurs or a predetermined amount of time is reached at which time substate 385 determines an error condition exists.
State 362 may optionally wait a predetermined amount of time when transitioning from substate 382 to 383. In substate 383, the pump 353 is turned off and the valves 350 and 349 disconnect the variable volume 324 from the pump 353 (as depicted in FIG. 91). State 362 may optionally wait a predetermined amount of time when transitioning from substate 383 to 384. In substate 383, various measurements are taken. For example, the AVS system using the speaker 326, and the microphones 327 and 328 to measure the volume of the variable volume 325 (using an acoustic response) to determine if the AVS volume 335 is changing thereby indicating a leak condition. Additionally or alternatively, the optical sensor 330 may detect if a predetermined movement of the membrane 335 occurs to determine if a leak condition exists. If these measurements are outside of a predetermined range and/or beyond a predetermined threshold, then an error condition is determined to exist in substate 387.
 FIG. 93 shows the flow-controlled membrane pump 358 of FIG. 83 in use during the fill state 363 of FIG. 84 in accordance with an embodiment of the present disclosure. FIG. 94 shows a more detailed view of the fill state 363 of FIG. 84 in accordance with an embodiment of the present disclosure.
State 363 includes substates 388-391. Substate 288 sets the valves 350 and 351, and the pump 353 to apply a negative pressure to the variable volume 324. The valve 332 is also opened and the AVS volume 335 fills with a fluid from the fluid reservoir 331. State 389 takes several measurements, including an optical measurement from the optical sensor 330, to determine if the membrane defining the AVS volume 335 is filling. If it hasn't filled, substate 391 waits a predetermined amount of time. Thereafter, substates 288, 289, and 391 may be repeated for at least a predetermined number of cycles and/or until a predetermined amount of time has passed, after which substate 390 determines that an error condition exists, e.g., because the reservoir 331 is empty and/or a valve is stuck, for example, valve 332 may be stuck closed, etc. Additionally or alternatively, if the measurement taken during the substate 389 is outside of a predetermined range and/or is beyond a predetermined threshold, the substate 390 may determine an error condition exists.
Referring again to FIG. 84, after state 363 is performed, another positive valve leak test is performed during state 364 and another negative valve leak test is performed in state 365.
State 366 takes an AVS measurement to determine the volume of the AVS chamber 355 (see FIG. 95). Referring now to FIGS. 95 and 96: FIG. 95 shows the flow-controlled membrane pump 358 of FIG. 83 in use during an AVS measurement state 366, and FIG. 96 shows a more detailed view of the AVS measurement state 366 of FIG. 84.
State 366 includes substates 392 and 395. Substate 392 causes the speaker 329 to emit one or more acoustic frequencies, and substate 393 takes measurements from the microphones 327 and 328 to determine an acoustic response. The acoustic response is correlated with a volume of the AVS chamber 335 and is thus also correlated with the fluid in the AVS chamber 335. The acoustic response and other measurements are taken during substate 393. Substates 392 and 393 may optionally repeated, e.g., shown as the substate 395. If one or more measurements from the substate 392 are outside of a predetermined range and/or is beyond a predetermined threshold, the substate 394 may determine that an error state exists.
Referring again to FIG. 84, after the AVS measurements are taken in state 366, the emptying state 367 empties the AVS volume 335. FIG. 97 shows the flow-controlled membrane pump 358 of FIG. 83 in use during the emptying state 367 of FIG. 84, and FIG. 98 shows a more detailed view of the emptying state of FIG. 84.
As shown in FIG. 98, the emptying state 367 includes substates 396-399. Substate 396 sets the valves 350 and 349, and the pump 353 to apply a positive pressure to the reference volume 324. Substate 396 also open the valve 336 to allow fluid to flow to the patient 338. During substate 387, several measurements are taken, and substate 397 continues to substate 399 to wait a predetermined amount of time. The substates 396, 397, and 399 repeat until the optical sensor 329 determines that the AVS volume is below a predetermined amount. If the measurements taken during substate 397 are outside of a predetermined range and/or a measurement exceeds a predetermined threshold (i.e., above or below the threshold) the substate 398 determines an error condition exists. If the substate 399 repeats a predetermined number of times and/or operates for a predetermined amount of time, the substate 398 may determine that an error condition exists, e.g., a stuck valve such as valve 336 and/or a downstream occlusion may be preventing the AVS volume from discharging the liquid to the patient 338, for example.
Referring again to FIG. 84, after state 367, state 368 takes an AVS measurement. The AVS measurement 368 may be compared to the AVS measurement 366 to determine an amount of fluid delivered to a patient 338. For example, in the emptying state 367, some of the fluid may remain in the AVS volume 335. By comparing the difference between the AVS measurements, the amount of fluid discharged down the line to the patient 338 may be estimated.
 FIG. 99 shows a membrane pump 411 having an elastic membrane 412 that is flush with a disposable portion 413 and applies force to a liquid in accordance with an embodiment of the present disclosure. That is, the action of the membrane 412 provides an actuation to move fluid through the membrane pump 411. The membrane pump 411 includes an AVS assembly 417 that couples to a disposable portion 418. The AVS assembly 417 may be snap-fitted, may screw onto, or may include latches to attach to the disposable portion 418. The membrane pump 411 includes a pneumatic fill port 414. The pneumatic fill port 414 may be connected to any air pump as described herein. In yet additional embodiments, the pneumatic fill port 414 may be connected to a liquid pump, e.g., a syringe pump, or other liquid pump. In some embodiments, alternative positive and negative pressures are applied to the pneumatic fill port 414, which is used in conjunction with valves 415 and 416 to pump fluid. In some embodiments, a negative pressure is applied to the pneumatic fill port 414 and the elastic property of the membrane 412 is used to suck in liquid through the valve 416. In some embodiments, a positive pressure is applied to the pneumatic fill port 414 and the elastic property of the membrane 412 is used to expel in liquid through the valve 415.
 FIGS. 100-101 show two embodiments of lung pumps in accordance with embodiments of the present disclosure. FIG. 100 shows a lung pump 419, and FIG. 101 shows a lung pump 420.
The lung pump 419 of FIG. 100 includes a rigid body 421 having an AVS or FMS port 425 for measuring the volume of a reservoir 425 that is flexible. FMS is described in the U.S. Pat. Nos. 4,808,161; 4,826,482; 4,976,162; 5,088,515; 5,193,990; and 5,350,357. In some embodiments, positive and/or negative pressure is applied to the port 425 to facilitate the pumping action of the lung pump 419. The reservoir 424 is in fluid communication with the valves 422 and 423. The reservoir 424 may be molded or bonded to the tube 431, or is vacuum formed from the tube 431, e.g., a blister. The rigid body 421 may fully seal around the tube 431 as it passes through the rigid body and connects to the reservoir 424. By applying a positive or negative pressure via the port 425, the fluid may be drawn into and out of the reservoir 424. This positive and negative pressure may be supplied by a manifold which also contains a reference chamber allowing for FMS measurements via the port 425. Additionally or alternatively, the rigid body 421 may include hardware, such as, for example, a processor to control the valves 422 and 425, an AVS assembly coupled to the port 425, etc. The liquid is drawn from the valve 422 and leaves via the valve 423. The valves 422 and 423 may be pinch valves. The valves 422 and 423 may be alternatively closed and open, relative to each other and synchronized with any positive and/or negative pressure applied via the port 425. For example, a pumping sequence may occur as follows: (1) close the valve 413 and open the valve 422; (2) apply a negative pressure to the port 425; (3) close the valve 422; (4) estimate the volume of fluid in the reservoir 425 (e.g., using AVS or FMS); (5) repeat steps (1)-(4) until a predetermined volume is within the reservoir; (6) open the valve 425; (7) apply a positive pressure to the valve 425; (8) close the valve 423; (9) estimate the volume of fluid in the reservoir; (10) compare the volumes measured during steps (9) and (4) to determine an amount of liquid discharged; (11) and repeat (1)-(10) until a predetermined amount of liquid has been pumped.
The lung pump 420 of FIG. 101 includes a rigid body 426 having an AVS or FMS port 430 for measuring the volume of a reservoir 429 that is flexible. In some embodiments, positive and/or negative pressure is applied to the port 430 for facilitating the pumping action of the lung pump 420. The reservoir 429 is in fluid communication with valves 427 and 428. The lung pump 420 may be similar to the lung pump 419 of FIG. 99; however, the valve 427 is opened and the valve 428 is closed to pump fluid into the reservoir; and the valve 428 is opened and the valve 427 is closed to pump fluid out of the reservoir.
 FIGS. 102-104 show several gaskets for sealing a lung pump in accordance with additional embodiments of the present disclosure. FIG. 102 shows a tube 432 that may be sealed by sections 433 and 434 of the rigid body of the lung pump (e.g., rigid body 421 of FIG. 99 or rigid body 426 of FIG. 100). In other embodiments, 422 and 424 may be part of a housing, latching, or dooring mechanisms. FIG. 103 shows a tube 425 that includes a gasket seal 426. The gasket seal 426 may push to the left and right causing a better seal where the two sides of the sealing surfaces meet (i.e., 422 and/or 424). FIG. 104 shows another way of sealing a tube 432 in including a gasket 427 that seals by being compressed in between a valley structure 427 and a compressing plate 429.
 FIG. 105 shows another lung pump 430 in accordance with another embodiment of the present disclosure. The lung pump 430 includes a rigid piece 431 bonded around a tube 432 that creates a face-sealing gasket that seals against a ring structure 433 when a pressure is applied to the rigid piece 431. The rigid piece 431 may be a circular structure, e.g., a ring structure similar to a washer.
 FIGS. 106-112 illustrate the operation of a piston pump while performing various checks in accordance with an embodiment of the present disclosure. The checks described in conjunction with the piston pump of FIGS. 106-112 may also be used with a peristaltic pump having a spring-biased plunger as described herein. FIG. 106 shows a pump 434 including a piston 435, a diaphragm 436, an inlet valve 437, an outlet valve 438, and a pump chamber 439. The piston 435 may be coupled to a linear actuator 54 (not shown in FIGS. 106-112) that is coupled to a processor 37 for control (see FIG. 3).
The opening of the valves 437 and 438 may be timed with the movement of the piston 435 to allow the integrity of the valves to be checked periodically during the pump operation. The piston 435 applies a pressure or vacuum to check the valves 437 and 438 to verify that one or both are not leaking before opening the other valve. This process may be used to safeguard against free-flow conditions; if one valve is not sealing properly the other valve is not opened. The same configuration can be used to check for air in the pumping chamber, upstream occlusions, and downstream occlusions.
In some embodiments, the piston 435 and valves 437 and 438 may be driven by a set of cams driven by a single motor. Additionally, in some embodiments, the piston 435 is spring loaded such that the cam lifts the piston 435 and the spring returns the piston 435 to the down position; this specific embodiment may have a relatively constant delivery pressure.
In some embodiments of the present disclosure, the position of the piston 435 and/or the position of the diaphragm 436 may be determined using a sensor. In some embodiments, the position of the piston 435 may be determined using an encoder, a magnetic sensor, a potentiometer, or rotational sensors on a camshaft, etc. In additional embodiments, the position of the piston 435 is measured directly by using an optical sensor, a LVDT (linear variable differential transformer) sensor, a hall-effect sensor, or other linear sensor. The position of the diaphragm 436 may be sensed using an AVS assembly as described elsewhere herein (e.g., the AVS assembly 417 of FIG. 98 may be used to determine the position of the diaphragm 436). In some additional embodiments, no piston is used and the diaphragm is moved using pneumatic pressure as described herein.
 FIGS. 107-112 illustrate various stages of the piston pump of FIG. 106. FIG. 107 illustrates an air check and inlet valve 437 leak check. The piston 435 applies a downward force while the valves 437 and 438 are closed. If the piston 435 moves a predetermined distance and/or beyond a predetermined speed, the processor 37 may determine that excessive air exists within the pump chamber 439. If the piston 435 compresses an amount and slowly continues to move towards the bottom of the pump chamber 439, the processor may determine that one of the valves 437 and/or 438 is leaking. For example, if a valve 437 and/or 438 is leaking, the volume with the pump chamber 439 will continuously decrease. The movement (or speed) cause by excessive air in the pump chamber 439 may be at a different speed than the movement caused by a leak; and, in some specific embodiments, the processor 37 may distinguish between excessive air in the pump chamber 439 and/or a leak in one of the valves 437 and 438. For example, the piston 435 may move downwards at a first speed and quickly approaches a very slow speed; if the slow speed continues, then it may be determined that the continued slow movement after the abrupt negative acceleration is an indication of a leak in one of the valves 437 and 438.
 FIG. 108 shows a stage in which a downstream occlusion check is performed. The outlet valve 438 is opened and the fluid in the pump chamber 439 is delivered to the patient. If the volume does not change, there may be a downstream occlusion. Additionally or alternatively, if the piston 435 moves slower than a threshold and/or moves more slowly than the previous fluid discharge by a predetermined amount, the processor 37 (see FIG. 3) may determine that a downstream occlusion has occurred. Additionally or alternatively, if the piston 435 stops moving less than a predetermined amount of movement (e.g., with a predetermined force is applied to the piston 435) then the processor 37 may determine that a downstream occlusion has occurred.
 FIG. 109 illustrates the stages in which the outlet valve 438 is closed. FIG. 110 illustrates the stage in which the piston 435 is pulled up. The outlet valve 438 remains closed. The stretch of the diaphragm 436 results in vacuum in the pump chamber 439. If one of the valves 437 and 438 is leaking, the fluid in the pumping chamber 439 will increase. If the diaphragm 436 moves by a predetermined amount, the processor 37 may determine that a valve is leaking and issue an alert and/or alarm.
 FIG. 111 illustrates a stage where the pump chamber 438 is filled, and an upstream occlusion check is performed. The inlet valve 437 is opened and the pump chamber fills 438 with liquid. If the pump chamber fails to fill by a predetermined amount, then the processor may determine that an upstream occlusion exists or the IV bag is empty. Additionally or alternatively, if the chamber fills 438 too slowly, or slower than the previous fill by a predetermined amount, the processor 37 may determine that an upstream occlusion exists. FIG. 112 illustrates the stage in which the inlet valve 437 is closed. The stages illustrated in FIGS. 107-112 may be repeated until a predetermined amount of fluid is delivered to a patient.
 FIGS. 113 and 114 illustrate a piston pump 441 in accordance with another embodiment of the present disclosure. As shown in FIG. 113, piston pump 441 includes a disposable cassette 442 including a preformed membrane 440 and a cassette body 445. The preformed membrane 440 may be one or more of a PVC elastomeric such as, Sarlink, Pebax, Kraton, a Santoprene, etc. The preformed membrane 440 may be attached to the cassette body 445 using any method, including heat bonding, laser welding, using a solvent or adhesive bonding, ultrasonic welding or attachment, RF welding, or over molding. When the preformed membrane 440 is compressed, as shown in FIG. 114, the membrane will return to its original shape as shown in FIG. 113 after the piston 443 is withdrawn. FIGS. 115 and 116 show two views of a cassette 444 having several membrane pumps 441. The cassette 444 may be formed by a rigid body defining the cassette body with two elastic layers disposed around the rigid body. The rigid body may form the reservoir such that the elastic layer forms the preformed membrane as illustrated in FIGS. 113 and 114.
 FIG. 117 shows an assembly 446 having a cassette 447 that includes a membrane pump 451 and volcano valves 449 and 450 in accordance with an embodiment of the present disclosure. The membrane pump 451 includes a pump plunger 452 that interfaces with an membrane 451. As the plunger 451 reciprocates, fluid is draw from the fluid path 454 and out the fluid path 456. The volcano valve 449 is a one way valve that allows fluid into the fluid volume 455 from the volcano valve 449, but not in reverse. An actuator may press again the membrane 456 in some embodiments to help the one-way action of the volcano valve 449.
The volcano valve 450 is a one-way valve that allows fluid out of the fluid valve 455 through the fluid path 455 and the volcano valve 450 (but not in reverse). An actuator may press again the membrane 457 in some embodiments to help the one-way action of the volcano valve 450.
The assembly 446 also includes an AVS assembly 448. The AVS assembly includes a reference volume 458 having a speaker 459 and a microphone 460. The variable volume 461 includes a microphone 462. The speaker 459 and the microphones 460 and 462 are coupled to a processor 37 to measure the volume of the fluid volume 455 and coordinate the operation of the plunger 452 as described herein.
The plunger 452 may interface with one or more acoustic seals coupled to the AVS assembly 448. The processor 37 may be in operative communication with a position sensor (e.g., one coupled to a linear actuator of the plunger) to determine the position of the plunger 452. The processor 37 may account for the amount of volume the plunger 37 displaces as it reciprocates in and out of the variable volume 461; this volume correction may be done by directly measuring the plunger's (452) displacement or by measuring the a drive shaft angle coupled to a cam that moves the plunger 452.
 FIG. 118 shows a roller mechanism 463 of a cassette-based pump in accordance with an embodiment of the present disclosure. The roller mechanism 463 includes rollers 464, 465, and 466. The rollers 464, 465, and 466 move in a circular direction and apply a downward pressure again a cassette 467 having a cassette body 468 and a membrane 469. The rollers 464, 465, and 466 may be on a rail and may be spaced such that at least one roller engages the cassette 467. The roller mechanism 463 may be controlled by a stepper motor. The roller mechanism 463 may help pump liquid at a rat of, for example, 0.1 ml/hr.
The roller mechanism 463 may be used to estimate fluid flow based upon the speed of its movement, for example. The rollers 464, 465, and 466 may be disengaged from the cassette 467 to facilitate non-occluded flow and/or to create a desired free-flow condition.
 FIG. 119 shows the fluid paths 470 of a cassette-based pump for use with the roller mechanism of FIG. 118 in accordance with an embodiment of the present disclosure. The fluid paths 470 include a roller interaction area 471 having a path 472 and a bypass path 473. The fluid paths 470 may included a vacuum formed film bonded to a ridged back to form raised flexible features. The path 470 includes occluders 474 and 475. The occluders 474 and 475 may be independently occluded. The paths 472 and 473 may have the same or different cross-sectional areas. The roller mechanism 463 may interact with the roller interaction area 472 to create different flow rates based on the rate of movement of the roller mechanism 463 and the total cross sectional area of all channels that are un-occluded (e.g., which of the occlude features 474 and 475 are engaged. The occluder features 474 and 475 may be volcano valves with a plunger that may be applied on the membrane of the volcano valve to stop fluid from flowing in any direction. In other embodiments, the occluders 474 and 475 may be a pinch valves coupled to an actuator, such as a solenoid.
The fluid paths 470 may include a fluid capacitor 476 to buffer the flow of liquid (e.g., smooth the liquid). Additionally or alternatively, an AVS assembly may be coupled to the fluid capacitor 476 to measure fluid flowing therethrough.
In another embodiment, one or more of the fluid paths 472 or 473 include a flat flexible film boded to a ridged back with the features molded into the rigid backing (cassette body). In this embodiment, the roller 463 has a feature that recesses into the channel 478 in order to pinch off the channel 478. This embodiment may also have molded-in features that allows a ball-head piston to variably restrict the flow through the channel 478 (e.g., the occlude features 474 and 475). The geometry of the features that recess into the channels and the piston head may be adjusted to allow different flow profiles based on the linear engagement of the piston. In one embodiment, the disposable has one channel 472 for the roller mechanism 463 and a second channel 473 that acts as a bypass from the roller area. The two channels 472 and 473 in conjunction with the occluders 474 and 475 allow the cassette (which may be disposable) to be used in a bypass mode or a pump mode. In some embodiments, the roller mechanism 463 of FIG. 119 is always engaged above the channel 478 but not over the bypass channel 473.
In one embodiment, the roller mechanism 463 may be used for high flow rates and the bypass 474 may be used for low flow rates. For example, in some specific embodiments, when the fluid paths 472 and 473 have a cross sectional area of 0.4 cm2, the flow rates may be from 100 ml/hr to 1000 ml/hr by using a stepper motor to actuate the linear travel of the rollers from 250 cm/hr to 2500 cm/hr; the bypass 473 is used to achieve flow rates under 100 cm/hour.
 FIG. 120 shows the fluid paths 478 of a cassette-based pump for use with the roller mechanism of FIG. 118 in accordance with an embodiment of the present disclosure. The fluid paths 478 include two paths 479 and 480, and a bypass path 481. The roller mechanism 470 of FIG. 118 interfaces with the fluid paths 470 and 480. The fluid paths 478 are also coupled to occluders 482, 483, and 484.
 FIG. 121 shows the stages 310, 311, and 312 of an infiltration test in accordance with an embodiment of the present disclosure. The infiltration test illustrated by FIG. 121 includes an occluder roller 313 that is pressed against a tube 314 (as shown in stage 311) which is then drawn back through a rolling motion (shown in stage 314). The occluder roller 313 may be in the pumps 19, 20, and/or 21 (see FIG. 1) or in the infusion site monitor 26 (See FIG. 2). The monitoring client 6 can instruct the occluder roller 313 to perform an infiltration test. For example, the monitoring client 6 may instruct a stepper motor coupled to the roller occluder 313 to pull liquid out of the patient 5 (See FIG. 1). The monitoring client 6 may then receive an estimate of the amount of blood that enters into the infusion site monitor 26 (see FIG. 1) from the infiltration detector 32 (see FIG. 2). The infiltration detector 32 determines if the proper amount of blood is pulled into the infusion site monitor 26 during the stages of the infiltration test, or alternatively, the monitoring client 6 may receive raw data from the infiltration detector 32 to determine if the proper amount of blood is pulled into the infusion site monitor 26 (See FIGS. 1 and 2).
As previously mentioned, the infiltration detector 32 of FIG. 2 may be a camera-based infiltration detector 32 as described above in relation to the system 108 of FIG. 33 when used to capture images illustrated by FIGS. 37 and 38. FIGS. 37 and 38 illustrate the images taken by the camera 109 of the system 108 of FIG. 33 for estimating blood that enters into the infusion site monitor 26 of FIG. 2 during an infiltration test. That is, the system 108 of FIG. 33 may be within the infiltration detector 32 of the infusion site monitor 26 (see FIG. 2) for detecting blood when the roller occluder 313 of FIG. 121 actuates to draw blood into the infusion site monitor 26 of FIG. 2.
During stage 312, a drawback volume 315 thereby is pulled from a patient 5. A camera 109 of FIG. 33 at an infusion site monitor 26 (e.g., within the infiltration detector 32) may determine if blood is drawn back from the patient as shown in FIGS. 37 and 38. If no blood is pulled into the tube within the infusion site monitor 26 (see FIG. 2), it may be an indication that an infiltration has occurred. Additionally or alternatively, the camera 109 of FIG. 33, in conjunction with a pressure sensor 33 and/or volume sensor 169, may be used to determine what amount of pressure causes the blood to be pulled back into the tube 41.
In some embodiments, the fluid is returned to the patient 5 by actuating the rolling occluder 313 in the opposite direction, or by lifting the occluder 313 off of the tube 314. In an additional embodiment, a compliant upstream reservoir may be included which holds the drawback fluid (valves may direct the reverse fluid into the complaint upstream reservoir). The upstream reservoir may be coupled to an AVS chamber as described herein or is a separate chamber. The AVS chamber may have the drawback fluid volume measured by a processor coupled thereto and/or communicated to the monitoring client 6. Additionally or alternatively, the pumps 19, 20, and 21 are stopped during an infiltration test or may assist in draw back fluid, in conjunction with the rolling occluder 313 or in lieu of the rolling occluder 313.
In additional embodiments, a compliant chamber is used between the roller occluder 313 and the patient 5. The displacement volume of the chamber membrane during the drawback is monitored using, for example, AVS or an optical sensor. The deflection of the chamber membrane is proportional to the pressure in the fluid line 314, the amount of the deflection of the membrane is proportional to the effort to draw blood into the tubing. A threshold amount of drawback pressure needed to draw blood out of the patient 5 is used to determine if an infiltration exists. In addition, if a threshold amount of time is required to drawback, this may be used as an indication that a downstream occlusion exists or an infiltration exists. Therefore, the chamber membrane could be monitored over time and detect a rate in pressure change that is an indication of the drawback effort (as determined by the processor 37 of FIG. 2).
 FIG. 122 shows stages of an infiltration test 316 and 318 in accordance with an embodiment of the present disclosure. A piston 319 may be disposed anywhere along the fluid line or in a pump 19, 20 or 21 of FIG. 2, or the piston 319 may be disposed in the infusion site monitor 26 of FIG. 2. In stage 316, a valve 318 remains open and the piston 319 is press against a membrane 320, but fluid continues to flow to the patient. In stage 317, the valve 318 is closed, and the piston 319 is lifted up, after which the resiliency of the membrane 320 pulls back and draws fluid backwards. The drawn back fluid returns to the patient when the piston actuates back to the resting state as shown in stage 316. A camera 109 of FIG. 33 at an infusion site monitor 26 in the infiltration detector 32 (see FIG. 2) may determine if blood is drawn back from the patient 5 as described above. If no blood is pulled into the tube within the infusion site monitor 26 (see FIG. 2), it may be an indication that an infiltration has occurred.
In some embodiments, the elastomer surface area and elastomer properties are selected in combination with the chamber volume such that there is a maximum determined fluid pressure that is applied during the drawback, e.g., the properties may be chosen such that there is sufficient drawback pressure to draw back blood into the monitoring area, however, there would be insufficient pressure to draw back the blood into the monitoring when an infiltration has occurred. Additionally or alternatively, the blood must be drawn back within a predetermined amount of time; otherwise, an infiltration condition may be determined to exist. The amount of time allowed for the drawback can be used with predetermined criteria to determine if an infiltration has occurred (i.e., allow the drawback chamber to persist with drawback for a predetermined amount of time while looking for the indication of blood using the camera 109, and determining that an infiltration has occurred if no blood is detected by the infiltration sensor 32 (see FIGS. 2 and 33), e.g., a camera 109, before the predetermined amount of time has passed).
 FIGS. 123 and 124 show a cell-based reservoir 485 in accordance with an embodiment of the present disclosure. The cell-based reservoir 485 may be the reservoirs 2, 3, or 4 of FIG. 1. The cell-based reservoir 485 includes cell foam 486 capable of absorbing liquid constructed of a compatible material to dampen the motion of an infusate. The cell foam 486 may include a membrane 487. The reservoir base 488 may be constructed using a in a rigid, semi-rigid, or non-rigid fluid reservoir to increase infusate stability in the presence of fluid shear.
For example, when using a semi-rigid base 488, the cell foam 486 may include an open-cell silicone foam to fill the normally empty reservoir cavity. The cell foam 486 may help prevent sloshing of the reservoir contents to help preserve the stability of the infusate in some embodiments. By choosing a foam with a high degree of compressibility relative to both the collapsible membrane's 487 spring rate and the pumping mechanism, the residual volume of the cell foam 486 may be minimal in some embodiments.
 FIGS. 125 and 126 show a tube-based reservoir 489 in accordance with an embodiment of the present disclosure. The cell-based reservoir 489 may be the reservoirs 2, 3, or 4 of FIG. 1. The tube-based reservoir 489 includes a tubing reservoir 490 that can house a liquid. The tube-based reservoir 489 may be vented through a filter 491. The filter 491 may be part of the vent of FIGS. 51-55. For example, a pumping mechanism (e.g., a pump as described herein but not shown in FIGS. 125 and 126) may draw fluid from the tubing reservoir 490 stored in a rigid reservoir cavity 492 (the base 492 may be flexible, rigid, semi-rigid, and/or part of a cassette in some embodiments). The tubing reservoir 490 can help prevent sloshing of the reservoir contents thereby helping preserve infusate stability in some embodiments.
 FIG. 127 shows stages 1-8 illustrating a method for operating a plunger pump 493 in conjunction with an AVS assembly 494 in accordance with an embodiment of the present disclosure. A fluid path 495 includes valves 496, 497, and 498.
Stage 1 shows the valve 498 closed with valves 496 and 497 open. The valve 497 may be closed while the plunger 499 withdraws to check if the valves 498 and 497 are leaking. For example, a constant force may be applied to the plunger 499 drawing the plunger up (e.g., from a spring) and either valves 496 and/or 497 may be closed. If the plunger 499 moves upwards beyond a predetermined amount or more quickly than predetermined speed, the processor 37 (see FIG. 2) may determine that a leak has occurred. Additionally or alternatively, the valve 496 may be closed, and the plunger 499 applies an upwards force by a predetermined amount of time and then applies a downward force. The AVS assembly 494 may then perform an AVS sweep. If the fluid within the AVS assembly (e.g., measured by the volume of the fluid volume) is beyond a predetermined amount) then the processor may determine that one of the valves 496 and 498 may be leaking.
Stage 2 shows the fluid being drawn into the plunger pump 493. Stage 3 performs an AVS sweep. Between stages 3 and 4, a leak check may be performed, e.g., the valves 497 and 498 may remain closed while the plunger 493 applies a downwards force. If there is movement beyond a predetermined amount, the one or both of the valves 497 and 498 may be determined to be leaking by the processor. In Stage 4, the volume of fluid from the plunger pump 493 is transferred to the membrane of the AVS assembly 494. Stage 5 there is an AVS sweep to determine the fluid in the AVS assembly 494. In stage 6, the valve 497 is opened, and the volume of fluid is transferred from the AVS assembly 494 to the plunger pump 493. Between stages 5 and 6, the valve 497 may temporarily be left closed to perform another valve leak check.
In stage 7, the valve 497 is closed. In stage 8, the fluid in the plunger pump 493 is discharged. Between stages 7 and 8, the valve 498 may initially remain closed to determine if one or both of the valves 497 and 498 is leaking.
 FIG. 128 shows several stages illustrating a method for operating a plunger pump in conjunction with an AVS assembly in accordance with another embodiment of the present disclosure. Between stages 1 and 2, a leak test may be performed by keeping the valve 500 temporarily closed while an upwards force is applied to the plunger 499. In stage 2, fluid is drawn into the plunger pump 493. Also during stage 2 an AVS sweep may be performed by the AVS assembly 494. In stage 3, the fluid is transferred to the AVS assembly 494. Also during stage 2 an AVS sweep may be performed by the AVS assembly 494. A leak test may be performed between stages 2 and 3 (e.g., by keeping the valve 501 closed while applying a downward force on the plunger 499. In stage 4, the fluid is drawn from the AVS assembly 494 into the plunger 493. Also during stage 2 an AVS sweep may be performed by the AVS assembly 494. Between stages 3 and 4, a leak test may be performed by keeping the valve 501 temporarily closed while an upwards force is applied to the plunger 499. In stage 5, the fluid is discharged from the plunger 493 to the patient (i.e., past the AVS assembly 494). A leak test may be performed between stages 4 and 5, by keeping the valve 501 temporarily closed and/or to check for backflow. A leak test may also be performed during stage 5 to check for backflow.
 FIG. 129 shows several stages illustrating a method for using a plunger pump 503 having an AVS assembly 504 in accordance with an embodiment of the present disclosure. In stage 1, an AVS sweep is performed. In stage 2, fluid is drawn into the variable volume 506. In stage 2, after fluid is drawn into the variable volume 453, another AVS sweep is performed. In stage 3, the fluid is discharged. In stage 3, after the fluid has discharged, an AVS sweep may be performed. Note that the actuator 507 is within the variable volume 506. Therefore, the movement of the actuator 507 does not affect the volume of the variable volume 506.
 FIG. 130 shows several stages illustrating a method for using a plunger pump 508 having an AVS assembly 509 in accordance with an embodiment of the present disclosure. The actuator 507 is located outside of the variable volume 509. The plunger pump 508 uses a standard IV set 510 such that the compliance of the tubing 510 draws liquid in during stage 4. Stage 2 discharges the liquid. The stages 1-4 may be repeated.
Stage 1, an AVS sweep is performed by the AVS assembly 509 and a downward force may be applied to the plunger 512 with both of the pinch valves 513 and 514. In stage 2, the fluid volume is discharged. In stage 3, the plunger 512 is retracted, after which an AVS sweep may be performed to determine if the valves 513 and 514 are leaking (e.g., the compliance of the tubing 455 may provide a negative pressure within the tubing 510.
 FIG. 131 shows several stages 1-5 illustrating a method for using a plunger pump 515 having an AVS assembly 516 in accordance with an embodiment of the present disclosure. The plunger pump 515 draws fluid into and out of the variable volume 517 via a pneumatic actuator 518. During stage 1, a positive and/or negative pressure may be applied to the variable volume 518 with both of the valves 519 and 520 closed. During stage one, one or more AVS sweeps may be performed by the AVS assembly 516. If the volume estimated by the AVS assembly 516 changes when both of the valves 519 and/or 520, then the processor 37 may determine that a leak in one or both of the valves 519 and/or 520 exists.
During stage 3, a positive and/or negative pressure may be applied to the variable volume 518 with both of the valves 519 and 520 closed. During stage one, one or more AVS sweeps may be performed by the AVS assembly 516. If the volume estimated by the AVS assembly 516 changes when both of the valves 519 and/or 520, then the processor 37 may determine that a leak in one or both of the valves 519 and/or 520 exists.
 FIG. 132 shows a plunger pump 521 with an actuator 522 inside the variable volume 523 for use with a standard IV set tubing 524 in accordance with an embodiment of the present disclosure.
 FIG. 133 shows several views of a cam-driven linear peristaltic pump 522 having pinch valves 523 and 524 and a plunger 525 inside a variable volume 536 in accordance with an embodiment of the present disclosure. The cross-sectional views 527 and 528 show two different standard IV set tubing 529 configurations below the plunger 525.
 FIG. 134 shows a plunger pump 530 for use within a standard IV 531 set tubing with an actuator 532 outside of the variable volume 533 in accordance with an embodiment of the present disclosure. FIG. 135 shows several views of a cam-driven linear peristaltic pump 534 having pinch valves 535 and 536 a plunger 537 inside a variable volume 538 with a corresponding cam mechanism 539 outside of the variable volume 538 in accordance with an embodiment of the present disclosure. As the cam followers 540, 541, and 542 move in and out of the variable volume 535, the processor 37 of FIG. 2 may adjust the measured volume to account for the changes in volume the cam followers 540, 541, and 542 affect the variable volume. Cross-section views 543 and 544 show two different configuration of the standard IV set tubing 545 for the plunger 537 to interface with.
 FIG. 136 shows a plunger pump 546 having a plunger 547 inside a variable volume 548 with an actuator 549 outside of the variable volume 548 in accordance with an embodiment of the present disclosure. The processor 37 is coupled to a position sensor of FIG. 2 to account for the volume of the shaft of the plunger 547 as it moves in and out of the variable volume 548.
 FIG. 137 shows a cam-driven linear peristaltic pump 550 having a plunger 551 inside a variable volume 552 with a corresponding cam mechanism 553 outside of the variable volume 552 and pinch valves 554 and 555 on the housing of the variable volume 552 in accordance with an embodiment of the present disclosure. The pinch valves 554 and 555 may also form the acoustic seal for interface of the variable volume 552 and the standard IV set tubing 556. Two cross-sectional views 557 and 558 are shown to illustrate the configuration of the interface of the plunger 551 with the standard IV set tubing 556.
 FIG. 138 shows a plunger pump 559 having a plunger 560 inside a variable volume 561 and pinch valves 562 and 563 outside of the variable volume 561 in accordance with an embodiment of the present disclosure. The actuator 564 (e.g., a cam mechanism, linear motor, linear actuator, etc.) is located outside of the variable volume 561. The processor 37 of FIG. 2 can compensate for the shaft of the plunger 560 as it enters and exits the variable volume 561.
 FIG. 139 shows several views of a cam-driven linear peristaltic pump 562 having a plunger 563 inside a variable volume 564 with a corresponding cam mechanism 565 and pinch valves 566 and 567 outside of the variable volume 564 in accordance with an embodiment of the present disclosure. Views 569 and 570 shows two different configuration of the standard IV set tubing 568. The standard IV set tubing 568 may be positioned by a raceway (e.g., defined below, above, and/or around the tubing 568).
 FIG. 140 illustrates the stages 1-5 of occlusion detection using a plunger pump 571 having an AVS assembly 572 and a spring-biased pinching mechanism 573 inside the variable volume 574 in accordance with an embodiment of the present disclosure. The plunger pump 571 includes pinch valves 575, 576, and 577.
In stage 1, the pinch valves 575, 576, and 577 are closed. The variable volume 574 may be measured as the spring-biased pinching mechanism 573 compresses the tube 578. If the volume of the variable volume increases (e.g., the tube diameter within the variable volume 574 decreases) then the processor 37 of FIG. 2 may determine that one or both of the valves 576 and 577 are leaking. Additionally or alternatively, the spring-biased pinching mechanism 573 may include a sensor to estimate the volume of the liquid within the tube 573 within the variable volume 574. The sensor may be, for example, a linear hall effect sensor. If the sensor indicates that the pinching mechanism 573 is slowly closing despite that the pinch valves 575, 576, and 577 are closed, the processor 37 may determine that an error condition exists (see FIG. 2).
In stage 2, the valve 576 is opened and the actuator 579 compresses against the tube 573 thereby filling the tube within the variable volume with a liquid. In stage 3, the valve 576 is closed. In stage 4, the valve 577 is opened. If there is no occlusion the liquid within the spring-biased pinching mechanism 573 will discharge the liquid. In FIG. 137, the stage 4 shows a view 580 where there is no occlusion and the spring-biased pinching mechanism 573 discharges the liquid, and stage 4 also shows a view 581 where the spring-biased pinching mechanism 573 does not discharge (or does not fully discharge) the liquid. In some embodiments of the present disclosure, the position of then spring-biased pinching mechanism 573 during stage 4 is used to determine if an occlusion condition downstream exists (e.g., the processor 37 may determine that an occlusion exists). Stage 5 shows two views 582 and 583. View 582 of stage 5 shows when no downstream occlusion exists and view 583 shows stage 5 when a downstream occlusion exists) note the difference volumes of the spring-biased pinching mechanism 573 in the two views 582 and 583). An AVS sweep and/or the position sensor of the spring-biased pinching mechanism 573 may be used in stage 5 to determine if the volume of the liquid within the variable volume 573 exceeds a predetermined threshold such that the processor 37 of FIG. 2 determines that a downstream occlusion exists.
 FIG. 141 shows a pump 600 with a spring-loaded plunger 604 within a variable volume 605 of an AVS assembly 606 with actuated plunger 604 outside of the variable volume 605 in accordance with an embodiment of the present disclosure. The valve 602 may be closed and the valve 601 opened with the plunger 604 retracted to allow the tube 607 to pull fluid in under the plunger 604.
The valves 601 and 603 are closed and the valve 602 opened while the plunger 604 presses against the tube 607 to force fluid into the tube 607 region disposed within the variable volume 605; this causes the spring-loaded (or spring-biased) plunger 604 actuate to increase the amount of energy stored in its spring. The valve 602 is closed and an AVS measurement is taken. Thereafter, the pinch valve 603 is opened which forces fluid within the variable volume 605 out of the tube 607 and towards the patient. Thereafter, the valve 602 is closed and another AVS sweep is performed. The AVS volume measurements are compared to determine the amount of fluid discharged through the pump 600. The spring biased plunger 604 may be a single plunger with a spring attached to a shaft to apply a downward force on the tube 607.
 FIG. 142 shows a linear peristaltic pump 608 with pinch valves 609 and 610 and a cam shaft 611 disposed within a variable volume 612 of an AVS assembly 613 having spring-biased pinching mechanism 614 (see view 615) disposed therein, and a plunger 616 and a pinch valve 617 outside of the variable volume 612 in accordance with an embodiment of the present disclosure. The manner of operation may be the same as the pump 600 of FIG. 141 (e.g., the plunger 616 force fluid to expand the pinching-mechanism 614 and load the associated springs).
 FIG. 143 shows a linear peristaltic pump 618 with pinch valves 619, 620, and 621 and a plunger 622 disposed outside of a variable volume 623 of an AVS assembly 624 in accordance with an embodiment of the present disclosure. The manner of operation may be the same as in pump 600 of FIG. 141.
 FIG. 144 shows a the stages 1-5 of a plunger pump 625 having an optical sensor or camera 626 to measure the volume within a tube 627 residing within a chamber 628 in accordance with an embodiment of the present disclosure. The plunger pump 625 includes a spring-biased pinching mechanism 629. An actuator 634 applies a pumping force to force fluid into the region of the tube 627 within the chamber 628 in the manner similar to the pump 600 of FIG. 141.
In stage 1, the valves 630, 631, and 632 are closed. The optical sensor or camera 626 estimates the volume within the region of the tube 627 disposed within the chamber 628. The plunger 633 may compress the tube 627 to determine if the plunger 633 moves beyond a predetermined amount to perform a check of the valves 630 and 631. That is, if the plunger 633 moved beyond a threshold amount, a processor 37 may determine that one of the valves 630 and 631 is leaking.
In stage 2, the valve 631 is opened, and fluid is forced into the chamber 628 by actuation of the plunger 633. In stage 3, another optical volume estimate is made after both valves 631 and 632 are closed. In stage 4, the valves 632 is opened. If an occlusion exists, the spring-biased pinching mechanism 629 cannot discharge all of the fluid out of the tube 627 within the chamber 628. If no occlusion exists, then the spring-biased pinching mechanism 629 can discharge the fluid out. During stage 5 a volume measurement is made to determine if the fluid has been discharged beyond a threshold. If fluid has not been discharged beyond a threshold, the processor 37 of FIG. 3 determines that an occlusion exists
 FIG. 145 shows a plunger pump 635 having a chamber 636 having an optical sensor 637 to estimate fluid volume of a tube 638 having a spring-biased pinch mechanism 639 around the tube 638 and a plunger 640 and pinch valves 641, 642, and 643 in accordance with an embodiment of the present disclosure. The optical sensor 637 may be an LED time-of-flight device or a camera. The manner of operation of the plunger pump 635 may be the same as the plunger pump 625 of FIG. 144.
 FIG. 146 shows a plunger pump 644 having a chamber 645 with an optical sensor 646 to estimate fluid volume of a tube 647 having a spring-biased pinch mechanism 648 around the tube 647 and a plunger 649 and pinch valves 650, 651, and 652 outside the chamber 645 in accordance with an embodiment of the present disclosure. The plunger pump 644 may operate in the same manner of operation of the pump 625 of FIG. 144.
 FIG. 147 show several views of a plunger pump 653 having an AVS assembly 655 with pinch valve disposed 656 and 657 within the variable volume 658 of the AVS assembly 659, and a plunger 660 and pinch valve 661 disposed outside the variable volume 658 in accordance with an embodiment of the present disclosure. Note that the pinch valves 656 and 657 wholly traverse through the variable volume 658. FIG. 148 shows an two cross-sectional views of the plunger pump of FIG. 147 in accordance with an embodiment of the present disclosure. FIG. 149 shows an alternative two cross-sectional views of the plunger pump of FIG. 147 in accordance with an embodiment of the present disclosure. Note in the two views of FIG. 148, the pinch valve is disposed around the tube and in FIG. 149 the pinch valve is disposed on one side of the tube.
 FIG. 150 illustrates the stages 1-4 during normal operation of a plunger pump 662 having a spring-biased plunger 663 in accordance with an embodiment of the present disclosure. In stage 1, the plunger 663 is pulled away from the tube 664 and the pinch valve 665 is opened. An AVS measurement is taken. In stage 2, the pinch valves 665 is closed and the plunger 663 compresses the tube 664. Another AVS measurement is taken. In stage 3, the pinch valve 666 is opened and the plunger 663 pushes fluid out of the tube 664. An AVS sweep is performed to estimate the volume of fluid delivered. In some embodiments, the plunger 663 includes a linear hall effect sensor which correlates the movement of the plunger between stages 2 and 3 to estimate the amount of fluid discharged.
 FIG. 151 illustrates the stages for detecting an occlusion for the plunger pump 622 of FIG. 150 in accordance with an embodiment of the present disclosure. Stage 3 compares the AVS measurements when an occlusion occurs vs. a normal fluid delivery. The processor 37 of FIG. 3 can detect when not enough fluid is delivered thereby indicating to the processor than an occlusion has occurred.
 FIG. 152 illustrates stages 1-2 for leakage detection for the plunger pump 622 of FIG. 150 in accordance with an embodiment of the present disclosure. In stage 1, the pinch valve 665 is opened and the plunger 663 is opened thereby drawing fluid into the tube 664. In stage 2, after the pinch valve 665 is compressed against the tube 664, the plunger applies a force against the tube 664. If one of the valves 665 and 666 is leaking, in stage 2, the AVS measurement would indicate a leakage of fluid (i.e., the variable volume would increase.
 FIG. 153 illustrates the stages 1-2 for detecting a failed valve and/or bubble detection for the plunger pump 602 in accordance with an embodiment of the present disclosure. As shown in stage 2, if the variable volume increases beyond a predetermined threshold and does not continue to decrease, the processor 37 of FIG. 3 may determine that a bubble exists in the tube 664.
 FIG. 154 illustrates the stages for empty reservoir detection and/or upstream occlusion detection for a plunger pump 662 in accordance with an embodiment of the present disclosure. As shown in stage 2, if the AVS sweeps indicate that fluid is not being drawn into the tube 664, then the processor 37 of FIG. 3 may determine that the upstream reservoir is empty.
 FIG. 155 illustrates the stage for free flow prevention for a plunger pump 662 in accordance with an embodiment of the present disclosure. That is, when a free flow condition is detected, the plunger 663 may compress against the tube 664 to stop the free flow.
 FIG. 156 illustrates the stages for a negative pressure valve check for the plunger pump 662 in accordance with an embodiment of the present disclosure. Stage 1, the plunger 663 is compressed against the tube 664, and both valves 665 and 665 are closed. In stage 2, the plunger 663 is lifted from the tube 665. If there is a leak, the compliance of the tube 664 will pull in fluid which is detected by the AVS sweeps. As shown in Stage 3, the valves 665 and 665 are opened.
 FIGS. 157-158 show views of a plunger pump 670 having a cam shaft 671 that traverses the variable volume 672 of an AVS assembly 673 in accordance with an embodiment of the present disclosure;
 FIGS. 159-162 illustrate several cam profiles in accordance with several embodiments of the present disclosure. The cam profiles of FIGS. 159-162 may be used with the peristaltic pump 662 of FIGS. 150-158, or any sufficient pump disclosed herein.
 FIG. 159 shows a cam profile that uses the integrity check described in FIGS. 150-158 except for a negative pressure valve check, and can be used for forward pumping and backward pumping. The backward pumping may be used during an infiltration test as described herein. FIG. 160 shows a cam profile which uses the integrity checks described in FIGS. 150-158 without the negative pressure check. Rotation of the cam in a back and forth manner causes fluid flow in the cam profile of FIG. 160 when the cam is rocked from 0 to 155 degrees. Back pumping is accomplished in the cam profile of FIG. 160 by rotating the cam shaft back and forth from 315 degrees to 160 degrees. In FIG. 161 a cam profile is shown that uses the integrity check described in FIGS. 150-158 except for a negative pressure valve check. The cam profile in FIG. 161 can be used to provide forward fluid flow of the pump. FIG. 161 shows a cam profile that pulses fluid when rotated continuously in one direction with a zero total fluid flow. The chart in the bottom right hand corner of FIG. 162 shows the movement to achieve forward, backwards, and swishing fluid movement.
 FIG. 163 illustrates a peristaltic pump 675 having a plunger 676 and a pinch valve 677 outside of an AVS variable volume 678 with two pinch valves 679 and 680 on the interface of the AVS variable volume 678 in accordance with an embodiment of the present disclosure. FIG. 164 illustrates stages 1-5 of operation of the peristaltic pump of FIG. 163 (in simplified version) in accordance with an embodiment of the present disclosure.
 FIG. 165 illustrates a peristaltic pump 681 having two plungers 682 and 683 external to an AVS variable volume 684 in accordance with an embodiment of the present disclosure. FIG. 166 illustrates several stages 1-6 of the peristaltic pump 681 of FIG. 165 in accordance with an embodiment of the present disclosure;
 FIG. 167 illustrates a peristaltic pump 685 having a plunger 686 with a linear sensor 687 in accordance with an embodiment of the present disclosure. FIG. 168 illustrates a graphic of data from the linear sensor 687 of the peristaltic pump 685 of FIG. 167 in accordance with an embodiment of the present disclosure. As shown in FIG. 168, the amount of movement of the plunger 686 between the pressurized stage (e.g., both pinch valves closed 688 and 689 and the plunger's 686 spring applying a force again the tube 690) and the delivery stage (e.g., the outlet pinch valve 689 is opened) is correlated with the amount of fluid discharged. The correlation between the amounts of fluid discharged with the delta output from the sensor 687 may be determined empirically. The plunger 686 may be spring loaded against the tube 690 such that the cam only comes into contact with a cam follower coupled to the plunger 686 in order to lift the plunger 686 away from the tube 690.
 FIG. 169 illustrates the stages of the peristaltic pump of FIG. 167 in accordance with an embodiment of the present disclosure. FIG. 170 illustrates the detection of an occlusion condition vis-Ã -vis a non-occluded condition in accordance with an embodiment of the present disclosure. That is, the plunger position data is shown for the normal vs. occluded conditions. Note that when there is an occlusion, fluid does not discharge and thus the plunger position does not move as much. This may be detected by the processor 37 of FIG. 3. FIG. 171 illustrates the detection of a valve leak vis-Ã -vis a full-valve-sealing condition. FIG. 172 illustrates the detection of a too much air in the tube or a valve fail vis-Ã -vis a proper operation.
 FIG. 173 shows a block diagram that illustrates the electronics of a peristaltic pump in accordance with another embodiment of the present disclosure. That is, FIG. 173 shows the electronics of one of pumps 16, 17, and 18 of FIG. 1 in one specific embodiment. FIG. 174 shows a block diagram that illustrates the electronics of another embodiment of the peristaltic pump of one of the pumps 16, 17, and 18 in FIG. 1.
 FIG. 175 shows a perspective view of peristaltic pump 700 in accordance with an embodiment of the present disclosure. The peristaltic pump includes an AVS chamber (see the AVS chamber 714 of FIG. 184). The peristaltic pump 700 includes cams 701, 702, and 703 that rotate along with a cam shaft 704 coupled to a motor via a gear 705. The cam 702 control an inlet pinch valve, the cam 702 controls a plunger, and the cam 703 controls an outlet pinch valve.
The cams 701-703 may be shaped to provide a peristaltic-pumping action along the tube 707. The cams 701-703 may be shaped to provide a three stage pumping action or a four stage pumping action.
The three stage pumping action includes stages 1, 2, and 3. In stage 1, the outlet valve is closed, the inlet valve is opened, and the plunger is lifted off of the tube. In one embodiment, the outlet valve is substantially closed before the inlet valve is substantially open. In stage 2, the inlet valve is closed, and the spring-biased plunger is allowed by the cam to apply a compression force against the tube 707. In stage 3, the outlet valve is opened such that the compressive force of the spring's plunger compresses out the fluid towards the patient. A linear sensor (e.g., optical or hall-effect) measures the position of the plunger. A processor coupled to a motor to control the cam shaft 704 and coupled to the linear sensor may compare the difference of the plunger's position in stage 2 when the plunger stops movement and fully compresses against the tube 707 and at the end of stage 3 (all fluid has been forced out towards the patient and the plunger stops moving because no additional fluid may be compressed out of the tube). In another embodiment, the processor, coupled to the processor coupled to a motor to control the cam shaft 704 and coupled to the linear sensor, may compare the difference of the plunger's position in stage 2 when the plunger rate of movement drops below a defined threshold and during stage 3 when the plunger rate of movement drops below a given threshold or the plunger position drops below a defined value. The thresholds for the rate of movement and position of the plunger are determined by calibration experiments. The processor uses the measured differences between the displacements between these two positions to correlate the difference to a volume of fluid pumped (e.g., by comparing the delta value (the difference between the two measurements) to values in a look-up table). Optionally, in stage 3, the opening of the outlet valve is controlled by the rotation of the cam 704 to achieve a target fluid discharge-rate profile, e.g., the delta is used between the measurement of stage 2 and in real-time as the outlet valve is opened in stage 3 (e.g., the delta is continuously calculated).
During stage 2, if the plunger moves beyond a predetermined threshold and/or beyond a predetermined slope, one of the inlet valve and the outlet valve may be leaking. For example, if the plunger quickly moves to compress the tube and continues to move (e.g., beyond a predetermined slope), the processor may determine that one of the inlet and outlet valves are leaking. The processor (the processor 37 of FIG. 3) is coupled to the linear sensor may issue an alarm and/or alert.
During stage 2, if the plunger moves beyond a predetermined threshold when the cams allows the compression of the spring to compress the tube or the movement slows as the plunger hits the tube and then moves more beyond a predetermined threshold (as the bubble is compressed), it may indicate that a bubble exists within the tube. For example, if the plunger moves as the cam follower moves the spring-biased plunger towards the tube, then momentarily stops, and then moves again, the processor may determine that air within the tube has been compressed. In some embodiments, movement beyond a predetermined threshold may suggest that air exists within the tube. The processor coupled to the linear sensor may issue an alarm and/or alert. In some embodiments, to distinguish between a leaking valve and a bubble, a downstream bubble sensor (not shown) may be used by the processor to distinguish between the two error conditions.
In some embodiments, if the spring-biased plunger in stage 2 moves towards the tube and does not engage the tube until after a predetermined threshold has been crossed, the processor may determine that an upstream occlusion exists and the tube did not fill up with fluid during stage 1.
In some embodiments, if the spring-biased plunger in stage 3 does not move beyond a predetermined threshold, the processor may determine that a downstream occlusion exists (e.g., the tube cannot discharge fluid downstream). Additionally or alternatively, the processor may determine that a downstream occlusion exists when each cycles of the stages 1-3, less and less fluid is discharged to a patient (i.e., the compliance is increasing taking in fluid downstream).
In some embodiments of the present disclosure, the cams 701, 702, and 703 may be shaped to have a four stage pumping action.
In stage 1, the outlet valve is closed, the inlet valve is opened, and the plunger is lifted off of the tube. In stage 2, the inlet valve is closed, and the spring-biased plunger is allowed by the cam to apply a compression force against the tube 707. In stage 3, the plunger is lifted off of the tube and the outlet valve is opened. In stage 4, the cam 702 allows the plunger to apply the compressive force of the spring's plunger to compress out the fluid towards the patient. A linear sensor (e.g., optical or hall-effect) measures the position of the plunger. A processor coupled to a motor to control the cam shaft 704 and coupled to the linear sensor may compare the difference of the plunger's position in stage 2 when the plunger stops movement and fully compresses against the tube 707 and at the end of stage 4 (all fluid has been forced out towards the patient and the plunger stops moving because no additional fluid may be compressed out of the tube). The processor uses the measured differences between the displacements between these two positions to correlate the difference to a volume of fluid pumped (e.g., by comparing the delta value (the difference between the two measurements) to values in a look-up table). Optionally, in stage 4, the movement of the plunger to compress the tube using the plunger's compressive force (as allowed by the cam 702) is controlled by the rotation of the cam 704 to achieve a target fluid discharge-rate profile, e.g., the delta is used between the measurement of stage 2 when the plunger fully compresses the tube and the movement of the plunger in real-time as the plunger is allowed to compress the tube 707 (e.g., the delta is continuously calculated).
In some embodiments, a downstream occluder may be adjusted to smooth the flowing of the fluid to the patient.
In some embodiments AVS may be used instead of the linear position sensor. In some embodiments, only the linear position sensor is used. In yet additional embodiments, both of the AVS and the linear position sensor are used.
 FIGS. 176-180 show data from several AVS sweeps in accordance with an embodiment of the present disclosure. The AVS sweeps of FIGS. 176-180 are for the peristaltic pump 700 of FIG. 175.
 FIG. 176 shows data, including a magnitude and phase response, of a variable volume around the tube 707 of the peristaltic pump 700 of FIG. 175 relative to a reference volume. That is, the data as shown in FIG. 176 is correlated to the volume of air around the tube 707 (see FIG. 175) within an acoustically sealed region as shown in FIG. 184 (i.e., a variable volume chamber).
 FIG. 177 illustrates several AVS sweeps performed using the peristaltic pump 700 of FIG. 175. Note that, although the plunger is spring-loaded against the tube 707 in Sweep 3 and the outlet valve is opened by the cam 703, the fluid is not discharged downstream towards the patient. The processor 37 of FIG. 3 may determine that a downstream occlusion exists in this circumstance.
 FIG. 178 shows several AVS sweeps using the pump 700 of FIG. 175. In sweeps 2 and 3 of FIG. 178, the cam 702 allows the plunger's spring to compress against the tube 707, but the cams 701 and 703 force the pinch valves closed. In sweep 3, the inlet and outlet valves have remained closed, however, the variable volume is increasing which thereby indicates that the fluid is being discharged out of one of the inlet and outlet valves. The processor 37 of FIG. 3 may determine that one of the inlet and outlet valves are leaking when the sweeps data appears as in sweeps 2 and 3 despite that the inlet and outlet valves have remained closed.
 FIG. 179 shows several AVS sweeps using the pump 700 of FIG. 175. In sweep 1, the cams 701 and 703 close the valves, and the cam 702 allow the plunger's spring the compress against the tube 707. In sweep 2, the cams 701 and 703 have kept the valves closed, however, the plunger's spring has moved the plunger beyond an predetermined amount. The processor 37 may determine that the movement of the plunger is because air is within the tube under the plunger. A downstream air detector 24 (see FIG. 1) may be used to distinguish between movements caused by the compressibility of air when air is within the tube 707 below the plunger vs. a leaking inlet or outlet pinch valve.
 FIG. 180 illustrates the AVS sweep performed during multiple (full cycles) of fluid discharge towards the patient using the pump 700 of FIG. 175 when there is a downstream occlusion. That is, each sweep may be performed after the plunger is expected to discharge fluid towards the patient. As shown in sweep 4, the pump 700 is not discharging the fluid. For example, the pump 700 may slowly fill the downstream compliance of the tube 707 until the tube can no longer expand, in which case, the pump 700 has difficultly pumping additional liquid downstream because the spring of the plunger cannot apply sufficient force to pump additional liquid downstream. The processor 37 (see FIG. 3) may determine that the decreased liquid delivery during each cycle of the pump 700 indicates that a downstream occlusion exists.
 FIGS. 181-183 show several side views of a cam mechanism of the peristaltic pump of FIG. 175 in accordance with an embodiment of the present disclosure. FIG. 181 shows a side sectional-view of the plunger 706. The movement of the plunger 706 and cam follower 709 is monitored by an optical cam follower position sensor 711.
There are various devices that may be used to sense the position of the pump plunger 706 and pinch valves of the pump of FIG. 175. These include, but are not limited to one or more of the following: ultrasonic, optical (reflective, laser interferometer, camera, etc), linear caliper, magnetic, mechanical contact switch, infrared light measurement, etc. In one embodiment, a small reflective optical sensor assembly (hereinafter âoptical sensorâ) that fits into the exemplary embodiments of the peristaltic pump 175, as shown and described, for example, herein, may be used. The optical sensor in the various embodiments has a sensing range that accommodates the components for which the optical sensor may be sensing, e.g., in some embodiments, the plunger 706. In the exemplary embodiment any optical sensor may be used, including, but not limited to a Sharp GP2S60, manufactured by Sharp Electronics Corporation, which is a US subsidiary of Sharp Corporation of Osaka, Japan.
In various embodiments, the pumping apparatus may be based on the principle of indirect compression of a flexible tube segment through the application of a restoring force against the tubing segment by a spring-based apparatus. As shown in FIG. 181, a cam lobe or element 702 may be eccentrically disposed on a shaft 705 to cause cam follower 709 to move in a reciprocating fashion as the cam element 702 rotates. Plunger spring 710 in this illustration is biased to urge a plunger 706 to compress the flexible tube segment 707 situated within the peristaltic pump 700. Thus, in this arrangement, a spring constant may be selected for spring 710 to cause the plunger to compress flexible tube segment 707 to the extent necessary to deform the wall of the tube segment when liquid having a pre-selected range of viscosities is present within it, and for a pre-determined flow resistance of the fluid column to the end of a catheter or cannula attached to the terminal end of the flexible tube. In this way, the distance and speed with which plunger 706 moves to compress tubing segment 707 can provide information about the state of the tubing distal to tubing segment 707, such as whether there is a complete or partial occlusion involving the tube or an attached catheter, or whether the catheter has been dislodged out of a blood vessel or body cavity and into an extravascular tissue space. The movement of the spring or attached elements (such as the plunger) may be monitored by one or more sensors, the data being transmitted to a controller (e.g., the processor 37 of FIG. 3) for analysis of the rate and pattern of movement as the tube segment is compressed. Examples of suitable sensors for this purpose may include, for example, Hall Effect sensors, potentiometers, or optical sensors including LED-based, laser-based or camera-based sensing systems that are capable of transmitting data to a controller employing various forms of pattern-recognition software.
The action of peristaltic pump 700 of FIG. 175 is illustrated in FIG. 182. FIG. 182a  shows the cam lobe or element 704 contacting cam follower 709, compressing spring 710, and moving the plunger 706 away from tube segment 707. FIG. 182b  shows cam lobe 704 having rotated about cam shaft 705 away from cam follower 709, allowing spring 710 to extend, and the plunger 706 to begin compressing tube segment 707. In FIG. 182c , cam lobe 704 has rotated sufficiently to completely release cam follower 709 to allow spring 710 to extend sufficiently to allow the plunger 706 to completely compress tube segment 707. Assuming that an inlet valve acting on tube segment 707 entering pump 700 is closed, and an outlet valve acting on tube segment 707 leaving pump 700 is open, a volume of liquid within tube segment 707 will be propelled distally out of the tube segment 707. Although the side-view shown in FIG. 182 is of a plunger, the operation of the inlet and outlet valve may be similar and/or the same.
 FIG. 183 illustrates a scenario in which the resistance to flow of the liquid column within tube segment 707 is increased beyond the pre-determined functional range of the spring selected for pump 700. As cam lobe 704 moves from a spring compressing position in FIG. 183a  to a spring de-compressing position in FIG. 183b , the spring force is insufficient to compress tube segment 707 quickly, and may only be able to compress tube segment 707 partially, as shown in FIG. 183c . The rate of movement and end position of a component the plunger-spring-cam follower assembly may be detected by one more sensors appropriate for this task (e.g., camera-based sensor), which may, for example, be mounted near or adjacent to plunger 706. This information may be transmitted to a controller, which can be programmed to interpret the signal pattern in light of stored data that has previously been determined empirically. The pattern of volume-change vs. time of a compressed tube segment such as that shown in FIG. 180 may in some cases mirror the pattern to be expected of movement vs. time when the relative position of a component of the plunger-spring-cam follower assembly is tracked.
 FIG. 184 shows a sectional view of the pinch valves 715 and 716 and plunger 718 of the peristaltic pump of FIG. 175 in accordance with an embodiment of the present disclosure. In various embodiments, the tube segment within the pumping apparatus is held against an anvil plate during compression by a plunger. The tube segment may be held in position by being secured in a form-following raceway having sufficient space to allow for the lateral displacement of the tube segment walls as it is being compressed. However, this may allow for some lateral movement of the tube segment in an uncompressed state. FIG. 185 shows an alternative arrangement in which the tube segment may be held in position by flexible side arms or fingers that can elastically spread apart to accommodate the spreading sides of the tube segment as it is compressed. FIG. 185 shows a plunger comprising flexible side arms or fingers to grip a tube segment to keep it relatively immobilized in both a non-compressed and compressed state. In an uncompressed or âunpinchedâ state, the flexible fingers fit snugly against the sides of the tube segment, preventing lateral movement of the tube within the pumping apparatus. In a compressed or âpinchedâ state, the flexible fingers elastically spread apart to accommodate the lateral displacement of the tube segment walls as it is compressed, maintaining the overall position of the tube segment within the pumping apparatus.
 FIG. 186 shows an embodiment of a cam mechanism of a peristaltic pump 719 in accordance with an embodiment of the present disclosure. A cam 720 controls a pinch valve 721. A Cam 722 controls plungers 723, 724, and 725. A cam 726 controls another pinch valve 727. A latching mechanism (e.g., a magnetic latch) may prevent the plungers 723 and 725 from moving to compress the tube 728 as shown in FIG. 187.
 FIGS. 188, 189, and 190A show several views of a peristaltic pump 729 in accordance with the present disclosure. The peristaltic pump 729 includes a cam shaft 730 coupled to cams 731, 732, 733, and 734 that engage the cam followers 735, 736, 737, and 738, respectively. The cam follower 735 is coupled to a first pinch valve 739, the cam followers 736 and 737 are coupled to a plunger 740, and the cam follower 738 is coupled to another pinch valve 741. As shown in FIGS. 190B-190C, the plunger 740 includes a pincher 744 that engages fingers 743 forming a raceway.
 FIGS. 191-195 show several views of a peristaltic pump 745 in accordance with an additional embodiment of the present disclosure. The peristaltic pump 745 of FIGS. 190-195 is similar to the peristaltic pump 729 of FIGS. 188-190C, except that the peristaltic pump 745 of FIGS. 190-195 includes a torque balancing cam 746 coupled to a cam follower 747 that operate together to smooth the rotational torque of the camshaft 748.
 FIG. 196A illustrates the torque profile of a rotating cam shaft of the peristaltic pumps of FIGS. 188-190C and of FIGS. 191-195 in accordance with an embodiment of the present disclosure. The torque profile 749 shows the torque of the peristaltic pumps of FIGS. 188-190C. torque 750 shows the torque produced by the torque balancing cam 746 of the peristaltic pump of FIGS. 191-195. The torque profile 751 shows the resulting net torque on the camshaft 748 caused by the smoothing operation of the torque balancing cam 746 (also see FIG. 196B).
 FIG. 197 illustrates a cam profile for several cams for a peristaltic pump in accordance with an embodiment of the present disclosure. The cam profile describes the four stage pumping action described above. The solid lines describe the linear position of the cams. The dashed lines plot the position of the plunger and valves. The Pump cam and plunger position over time are plotted in 1300. The inlet valve cam and inlet valve position are plotted in 1302. The outlet valve cam and outlet valve position are plotted in 1304. In stage 1, the outlet valve closes at 1306. The inlet valve opens at 1308. The plunger is lifted off the tube at 1310, which allows fluid to enter the tube under the plunger. In stage 2, the inlet valve closes at 1312, while the plunger remains lifted off the tube. In stage 3, the plunger is allowed to compress the tube. The position of the plunger 1314 departs from the cam position due to the presence of fluid in the tube. The controller may execute a number of diagnostic tests including but not limited to leak tests, air in the line, occlusions based on the measured position and movement of the plunger during stage 3. In stage 4, the outlet valve is opened at 1316 first. After the outlet valve is opened, the plunger is allowed to compress the tube forcing liquid out of the pump. The plunger force is supplied by springs acting on the plunger or springs acting on the plunger cam followers. The cam may be formed to limit the descent of the plunger during stage 4. The actual position of the plunger may be further limited by the fluid flow out of the tube. The processor on the pump may actively control the plunger position by controlling the cam rotation based on the measured location of the plunger. This closed loop control of the motor may provide low flow rates (FIG. 198). In other embodiments at higher flows, the cam and/or motor will be controlled in an open loop.
 FIG. 198 shows various feedback modes of a peristaltic pump in accordance with an embodiment of the present disclosure. In a closed loop mode, feedback from the AVS measurements and/or the linear sensor is used to control the speed of the camshaft. In open loop mode, the speed of rotation is selected by reference to a lookup table in response to a target fluid flow rate.
 FIG. 199 shows a graph illustrating data of a linear sensor used to estimate fluid flow in accordance with an embodiment of the present disclosure; The delta value from the plateau 752 caused by both inlet and outlet valves being closed in a peristaltic pump with the plunger fully compressing against a fluid filled tube and the plateau 753 cause after the outlet valve is opened and all of the fluid is expelled out of the peristaltic pump and the plunger is fully compressing against the tube by the force from its spring.
 FIGS. 200-206 show an alternate embodiment of a peristaltic pump 1200 wherein a motor 1204 may drive a cam shaft 1206 via a gear train 1208. The cams may actuate one or more valves 1226, 1228 and a plunger 1222 via levers that rotate about a common axis. The tube 1202 is held in place by a door 1212. The peristaltic pump 1200 may include a receptacle for a slide occluder 1200 and mechanisms that prevent a free-flow condition on the tube during installation of the tube in the peristaltic pump 1200.
The cam shaft 1206 may include several cams 1232A-E. The cams 1232A-E may control the position of several items that may include but are not limited to the following: inlet pinch valve 1224, plunger 1222, outlet pinch valve 1226, and a torque balancer. The cams 1232A-E may be contacted by wheels 1214A-E on the cam followers 1216A-E. The cam followers 1214A-E may include magnets 1218A-E. The position of each magnet may be detected by an array of sensors 1220. The pump controller may calculate the position of a pump plunger 1222 and valves 1226, 1228 from the sensor signals generated by the magnets 1218A-E. The peristaltic pump 1200 may include an ultrasonic sensor 1228 to detect the presence of the air bubbles in the fluid exiting the pump. The ultrasonic sensor 1228 may communicate with the pump controller.
The cam followers 1214A-E may have an L shape and may pivot about a central axis at 1230. The cam followers are held against the cams 1232A-E by springs 1234A-E. Spring 1234C may provide a torque balancing load. The springs 1234B and 1234D may provide the force to urge the plunger toward the anvil plate 1236. The springs 1234A and 1234E may provide the force to close the pinch valves 1226, 1228 against the anvil plate 1236.
 FIG. 207 illustrates the installing tube with the slide occluder in the peristaltic pump 1200. In step 1, the door 1212 is open. In step 2, the tube 1202 and slide occluder 1210 are placed in position in the peristaltic pump 1200. In step 3, the slide occluder 1210 is slid into the peristaltic pump 1200 and displaces slide 1242 and lever 1240 away from the door and displaces button 1248 forward. The tube 1202 is held near the front peristaltic pump 1200 as the slide occluder 1210 so that the tube 1202 is in the narrow part of the slot and pinched closed. In step 4 the door is closed. In step 5, the slide occluder 1210 pushed out by the movement of button 1248 toward the back of the peristaltic pump 1200. The button 1248 moves lever 1240, which draws slide 1242 forward. The forward movement of the slide occluder 1210 releases the pinch on the tube 1202 by the slide occluder 1202.
 FIGS. 210-212 illustrate features to prevent the user from installing a tube without the correct slide occluder. A tab 1250 prevents a slide occluder 1210 from being installed that does not have a matching slot 1252. A shutter 1254 prevents the door 1212 from closing. The shutter 1254 is displaced by the slide occluder 1210 in step 3 of FIG. 207.
 FIGS. 213-220 illustrate how the peristaltic pump 1200 prevents a free flow condition when the tube 1202 is loaded and/or removed. The door 1212 easily opens to an angular position 90Â° from the front of the peristaltic pump 1200. A small force may be applied to further rotate the door 1212, which forces the plunger 1222 and the pinch valves 1224, 1226 into the open position. The movement of the door 1212 pulls the L shaped cam followers 1218A-E toward the front and thereby lifts the plunger 1222 and the pinch valves 1224, 1226 off the tube 1202.
 FIG. 221 illustrates the ultrasonic air sensor 1228 that may detect air bubbles of a certain size in the fluid downstream of the pinch valve 1266 pump. The pressure sensor 1260 may measure the static pressure in the fluid downstream of the pump. The pressure sensor 1260 and air sensor 1228 may communicate with the pump controller.
 FIG. 222-223 shows two views of a peristaltic pump 754 in accordance with an embodiment of the present disclosure. The peristaltic pump 754 includes a door lever 755 and a door 756. FIG. 224 shows the slide occluder 757 in an open position against the tube 758. The slide occluder 754 is carried in the slide occluder carriage 1312. The slide occluder carriage 760 engages a pin 761 that is in mechanical communication with the plunger lift lever 759 in FIG. 225. FIG. 225 illustrates that as the door lever 755 is opened (see FIG. 244), a plunger lift lever 759 is not lifting the plunger 1310 and pinch valves. FIG. 226 shows how as the door lever 755 is opened, the carriage 760 moves forward toward the door and moves the slide occluder 757 passed the tube 758 so that the tube 758 is closed as it passes into the narrow section of the slide occluder 757. At approximately the same time that the tube 758 is pinched closed by the slide occluder 757 the forward motion of the carriage 760 rotates the pin 761 which moves the plunger lift level 759 to lift the plungers 1310 and pinch valve off the tube 758 as shown in FIG. 227. In FIG. 228, the door lever 755 is fully opened and the carriage 760 stops moving. As shown in FIG. 229, the plunger lift lever 759 is in a stable over center position that will keep the plunger 1310 off the tube 758 when the door lever 755 is fully opened.
 FIGS. 230-233 illustrate an interlock that may prevent the slide occluder carriage 760 from moving and closing the plungers 1310 and valves 1312 without the door 756 being closed first. FIG. 230 shows the door 756 open and the release tab 1316 exposed. The interlock pin 1318 is shown in the interlocked position that prevents the slide occluder carriage 760 from moving. A spring 1320 pushes the interlock pin 1318 toward the slid occluder carriage 760 and engages the interlock pin in a matching hole when the slide occluder carriage 760 is in position.
 FIGS. 231-233 show the sequence of the door 756 opening and releasing the interlock pin 1316 by withdrawing the release tab 1316. As the tab is withdrawn the interlock pin 1318 is pushed toward the slide occluder carriage 760.
 FIG. 234 shows the door 756 open and the slide occluder 757 being lifted out of the slide occluder carriage 760. The tube 758 is in the narrow section of the slide occluder 757 that pinches the tube 758 closed. FIG. 235 illustrates placing the tube 758 into the pump between the anvil plate 1324 and the plunger 1310 and valves 1312. FIG. 236 shows the slide occluder 757 and tube 758 fully installed in the pump 754, where the slide occluder 757 is pinching the tube 758 closed. FIG. 237 shows the door 756 and the door lever 755 being shut which slid the slide occluder carriage 760 toward the rear of the pump 754. The movement of the slide occluder carriage 760 pushed the slide occluder 757 past the tube 758 so that the tube is open and rotated the pin 761 that in turn rotated the plunger lift lever 759 that released the plungers 1310 and valves 1312 to descend and close the tube 758. FIG. 238 shows a front view of the door 756 being shut.
 FIGS. 239-245 show several views of the peristaltic pump of FIGS. 222-238 in accordance with an embodiment of the present disclosure. A motor 2001 rotates gears which in turn rotates a camshaft 772. As the camshaft 772 rotates, the cams 2003, 2004, 2005, 2006, and 2007 rotate with the camshaft 772. The cam 2003 engages a cam follower 769, which pivots along a pivot 763 to move a pinch valve 770. The cams 2004 and 2006 engage cam follows 766 and 765, which pivot along the pivot 763 to move a plunger 767. The cam 2007 engages the cam follower 762 to move the pinch valve 764. Additionally, the cam 2005 engages a cam follower 768. The cam 2005 is shaped such that the engagement with the cam follower 768 at least partially balances the torque (e.g., to reduce the peak toque). In some embodiments, the cam 2005 and the cam follower 768 are optional. The inlet valve 770 (which is a pinch valve), the plunger 767, and the outlet valve 764 (which is a pinch valve) may engage the tube 771 using the three or four stages of pumping action as described above. A bubble sensor 2008 may be used to distinguish between a bubble and a leaking valve 764 or 770 (e.g., pinch valves) as described above.
The rotation of the cam shaft 772 may be controlled by the motor 2001 such that while fluid is compressed by the plunger 767, the outlet valve 764 is opened by a PID control loop to achieve a target discharge rate profile (e.g., smoothed out discharge rate) as measured by the plunger position sensor. In some embodiments, a range of angles only moves the outlet valve (e.g., outlet pinch valve). In yet additional embodiments, in the four stage pumping action described above, the movement of the plunger 767 is closed after the outlet valve 764 opens to achieve a target discharge rate profile (e.g., smoothed out discharge rate) as measured by the plunger's 767 position sensor.
As is easily seen in FIG. 241, the cams 2002, 2003, 2004, 2005, and 2006 are shows as engaging the cam followers 769, 766, 768, 765, and 762, respectively. FIG. 242 shows a front view of the peristaltic pump including the plunger 767, and the pinch valves 764 and 770 positioned to engage the tube 771.
A standard tubing pump 1000 with an optical monitoring system is shown in FIGS. 251 and 252. The optical monitoring system is comprised of a camera 1010 with a field of view that may include part or all of the plunger 1004, one pinch valve 1002, a portion of the tube 1006, fiducial marks on the pinch valve 1014, fiducial marks on the plunger 1016, fiducial marks on the backstop 1018, a light source (not shown) and a light guide 1012 to illuminate the surfaces facing the camera 1010. The optical monitoring system may further additional cameras 1010 with fields of view that include or all of the plunger 1004, additional pinch valves 1002, a portion of the tube 1006, fiducial marks on the pinch valve 1014, fiducial marks on the plunger 1016, fiducial marks on the backstop 1018, a light source (not shown) and a light guide 1012 to illuminate the surfaces facing the camera 1010. The optical monitoring system may further comprising one or more rear light sources 1102, rear light guides 1104 and a transparent plunger 1006 to illuminate the back side of the tube 1006 relative to the camera 1010. The camera 1010 and lights may operate in a range of spectrums from ultraviolet to infrared.
The optical system may further be comprised of a processor, memory and software that may allow the images to be interpreted to provide a range of information on the status of the pump, tubing and flow that includes but is not limited to plunger position relative to the backstop 1005, the pinch valve position relative to the backstop 1005, the speed and direction of the plunger 1004 and pinch valve 1002, the presence of the tube 1006, the presence of liquid or gas in the tube 1006, the presence of gas bubbles in the tube 1006, the presence deformations in the tube 1006. The processor may further interpret the information on plunger and valve position to determine fluid flow rate, presence of an occlusion in the line, presence of a leak in the tubing,
The optical monitoring system recognizes and measures the positions of the plunger 1004 and valves 1002 relative to the anvil plate 1005. The anvil plate 1005 is the stationary part of the pump and elsewhere may be referred to as the counter surface or occlusion bed. The pump controller may command the optical monitoring system may take an image using the camera 1010 and front or rear light sources. A processor located in the camera or elsewhere may process the image using software to identify the relative distance and orientation of the plunger 1004 and valves 1002 relative to the anvil plate 1005. In one embodiment, the machine vision software may identify the elements 1002, 1004 and 1005 and their location within its field of view through an edge detection algorithm as described above. The detected edges may be e assigned to each element 1002, 1004 and 1005 based the edge location within the field of view. By way of an example, an edge detected in the up third of the field of view may be assigned as the anvil plate 1005, while an edge detected in the lower left quadrant may be assigned as the pinch valve 1002 if the camera 1010 is the on the left hand side as shown in FIG. 251.
In another embodiment, the machine vision software may identify the pinch valve 1002, plunger 1004 and anvil plate 1005 and their location within its field of view with fiducial marks located on each of the elements 1002, 1004 and 1005. Each element may include one or more fiducial marks that are located within the field of view of the camera 1010. Fiducial marks will be assigned to each element 1002, 1004, 1005 based on the region in the field of view that it is detected. Considering the left hand camera 1010 in FIG. 251 by way of example, fiducial marks in the lower left region may be assigned as the pinch valve 1002, while fiducial marks in the lower right region may be assigned as the plunger 1004 and fiducial marks in the upper region may be assigned to as the anvil plate 1005. A single fiducial mark may allow the optical monitoring system to measure the relative movement of the pinch valve 1002, and plunger 1004 to the anvil plate 1006. More than one fiducial mark on a single element may allow the optical monitoring system to identify elements that rotated in their plane of motion. The processor may signal a warning or an alarm if one or more of the elements 1002, 1004 and/or 1005 have rotated beyond an allowed amount. A significant rotation may indicate a mechanical break in the pinch valve 1002 or plunger 1004 or that the camera has rotated within its mounting on the camera door 1020.
The machine vision software may identify the fiducial elements by matching a stored template to the image. The vision software may be an off-the-shelf product such as Open Source Computer Vision referred to as OpenCV and available for download from the internet. The vision software may use the function or module TemplateMatching to identify the fiducial marks from a stored template.
The machine vision software may then calculate the relative position and orientation of elements 1002, 1004 and 1005 from observed location within the camera's field of view and stored geometric data of the pinch valve 1002, plunger 1004 and anvil plate 1005. The locations and orientations determined by the machine vision software may then be passed to algorithms to identify specific conditions which include, but are not limited to the following: pinch valve opening, pinch valve closing, plunger at maximum stroke, plunger at minimum stroke. Other algorithms may process the machine vision determined locations and orientation data to determine parameters that include but are not limited to the following, plunger speed, fluid flow rate, occlusion in the line, air in the line, external leaks. These conditions and parameters are determined in the same way as they are determined from hall effect sensors measuring the location of the plunger 1004 and pinch valves 1002, which is described above.
In other embodiments, the machine vision software may identify the conditions and determine the parameters described above. In other embodiments, the relative position and orientation of the pinch valve 1002, plunger 1004 and anvil plate 1006 may be calculated by algorithms outside the machine vision software.
The machine vision software or algorithms that process the output of the machine vision software may recognize a number of conditions including but not limited to the following: tubing is not present, tubing is not correctly placed, tubing is empty of fluid, tubing is full of fluid, tubing is deformed, and a gas bubble is present in the liquid.
The optical monitoring system may calculate the volume of the tube with fewer assumptions with data from an additional camera 1011 mounted at a substantial angle to camera 1010 as shown in FIG. 252. The back light 1102, light guide 1104 may supply infrared illumination to the back of the plunger 1004. The plunger 1004 may be nylon or similar material that is transparent to infrared radiation. The plunger is uncoated in the field of view of camera 1011 to provide a clear view of the tube through the plunger 1004 in the infrared spectrum. A machine vision software package may determine the profiles of the tube 1006 from camera 1010 and the profile from camera 1011. An algorithm may calculate a first thickness of the tube as seen by camera 1010 and a second distance as seen by camera 1011. The volume of the tube may then be calculated from the two distances and the known circumference of the tube. A comparison of the two distances and the tube circumference may identify buckling in the tube shape that would significantly change the volume of liquid in the tube.
The volume of fluid in the tube 1006 may depend on the shape taken by the filled-tube when the pinch valves 1002 are closed. The shape of the tube 1006 near the pinch valves 1002 may change after the pump is calibrated due to a number of factors including but not limited to changes in the tubing materials, changes in manufacturing, changes in humidity and temperature. The camera 1010 may observe the shape of the tube 1006 near the pinch valve 1002. The tube may be illuminated with visible or infrared light from the front or back. In a preferred embodiment, the tube may be illuminated from behind with infrared light. Here illuminating from behind refers to placing the source of the illumination on the opposite side of the tube 1006 from the camera 1010.
In one embodiment, the machine vision software may detect the tube shape using edge detection. An algorithm may compare the observed tube shape to a shape stored in the memory. In one embodiment the algorithm may correct the volume of fluid per stroke to account for the changed tube shape. In another embodiment, the algorithm evaluating the tube shape may signal a warming or alarm to a higher level algorithm. In another embodiment, the machine vision software may confirm an acceptable tube shape by attempting to match a template of the accepted tube shape to the image. The machine vision software or the next higher level of software control may signal a warning or alarm if an acceptable tube shape is not identified.
The cameras 1010, 1011 may include either CCD (charge coupled device) or CMOS (Complementary Metal Oxide Semiconductor) chips to convert light into electrical signals that can be processes to generate an image. One example of a camera is HM0357-ATC-00MA31 by Himax Imaging, Inc. of Irvine Calif. USA. The cameras 1010, 1011 and lights 1012 may be powered on only when taking measurements in order to reduce power consumption.
The pinch valve 1002, plunger 1004, tube 1006 and anvil plate 1005 may be illuminated from the front. Front illumination refers to a light source that is on the same side of the object of interest as the camera 1010 and supplies illumination to the camera 1010 by reflection from the object of interest. One embodiment to supply front illumination is comprised of a light bar 1012 that transmits light from LED's mounted in the camera door 1020. One embodiment of the light bar 1012 is shown in FIG. 253. Light is supplied to the end surfaces 1032 of the light bar from LED's or other light sources mounted in the camera door 1020. The front surface 1030 and back surface (not shown) are covered with a material that reflects the supplied light. In one embodiment, the front and back surfaces are covered with an aluminized tape. Holes 1036 provide a clear field of view for the cameras 1010. The light bar may include a surface around each hole 1036 that is roughened to provide a diffuse light that illuminates the front of the pinch valve 1002, plunger 1004, tube 1006 and anvil plate 1005. The area around the holes 1036 may be recessed and then roughened to provide more diffuse light.
It may be advantageous to provide backlighting or illumination from the opposite side of the tube 1006 relative to the camera 1010. Backlighting may allow clearer visualization of the tube shape and or the shape of the volume inside the tube 1006. One embodiment places the rear light source on the back of the pump 1000. The rear light source 1102 may be an LED or other light providing illumination in the ultraviolet, visible and or infrared range. A light guide 1104 may direct the light to the back of the plunger 1004. The plunger may be made from a material that is transparent to the spectrum of light emitted by the light source 1102. In one embodiment, the plunger is made from nylon and the light source 1102 provides infrared illumination, which the camera 1010 can sense. In some embodiments, the backlight may be a plurality of light sources. The plurality of light sources may be controlled and/or modulated such that only specific lights are on that are necessary to illuminate a pixel being exposed. For example, the camera may have a region of interest, and only the lights needed to illuminate the region of interest are turned on during the exposure time of pixels within the region of interest. In some embodiments, the lights may be rows and/or columns of lights and/or pixels of lights (e.g., an array of LED lights).
The spectrum of the rear light source 1102 and camera 1010 may be selected to maximize the visibility of the fluid in the tube. In one embodiment, the spectrum may be broad to provide the maximum light to visualize the tube. In another embodiment, a set of filters in front of the rear light source 1102 emits a narrow range of the infrared spectrum that passes through the light guide 1104, plunger 1004 and tube 1006, but is absorbed by the liquid in the tube. The light source 1102 may also emit a narrow range of the infrared spectrum that passes through the light guide 1104. In another embodiment, the filters to allow only the desired band of infrared are in front of the camera 1010.
Acoustic Volume Sensing
The follow discussion describes acoustic volume sensing that may be performed by a processor disclosed herein with a speaker and two microphones (e.g., a reference microphone and a variable-volume microphone) of a peristaltic pump, e.g., a peristaltic pump disclosed herein; AVS may be used to estimate liquid within a reservoir disclosed herein, to estimate an amount of liquid discharged from a reservoir disclosed herein, and/or to estimate a liquid discharge rate of a reservoir disclosed herein. Table 1 shows the definition of various terms as follows:



 
 
 



 
TABLE 1


 
 


 
Term
Definition


 
 




 
Symbols
 


 
P
Pressure


 
p
Pressure Perturbation


 
V
Volume


 
v
Volume Perturbation


 
Î³
Specific Heat Ratio


 
R
Specific Gas Constant


 
Ï
Density


 
Z
Impedance


 
f
Flow friction


 
A
Cross sectional Area


 
L
Length


 
Ï
Frequency


 
Î¶
Damping ratio


 
Î±
Volume Ratio


 
Subscripts


 
0
Speaker Volume


 
1
Reference Volume


 
2
Variable Volume


 
k
Speaker


 
r
Resonant Port


 
z
Zero


 
p
Pole


 
 





The acoustic volume sensor (âAVSâ) measures the fluid volume displaced by the non-liquid side of a reservoir in the AVS chamber, e.g., an acoustic housing or within a reservoir, etc. The sensor does not directly measure the fluid volume, but instead measures the variable volume of air, V2, within the AVS chamber; if the total volume of AVS chamber remains constant, the change in the V2 will be the direct opposite of the change in the fluid volume. The AVS chamber is the volume of air in fluid communication with a variable-volume microphone beyond the acoustic port.
The volume of air, V2, is measured using an acoustic resonance. A time-varying pressure is established in the fixed volume of the reference chamber, V1, using a speaker. This pressure perturbation causes cyclic airflow in the acoustic port connecting the two volumes, which in turn causes a pressure perturbation in the variable volume. The system dynamics are similar to those of a Helmholtz oscillator; the two volumes act together as a âspringâ and the air in the port connecting the volumes as a resonant mass. The natural frequency of this resonance is a function of the port geometry, the speed of sound, and the variable volume. The port geometry is fixed and the speed of sound can be found by measuring the temperature; therefore, given these two parameters, the variable volume can be found from the natural frequency. In some embodiments of the present disclosure, a temperature sensor is used within the acoustic housing and/or within the non-liquid side of a reservoir. In some embodiments, the temperature is considered to be a predetermined fixed value, e.g., is assumed to be room temperature, etc.
The natural frequency of the system is estimated by measuring the relative response of the pressures in the two volumes to different frequency perturbations created by the speaker. A typical AVS measurement will consist of taking an initial measurement. The liquid is then released from the liquid side of one or more reservoirs and delivered to the patient (after which a second volume measurement is taken). The difference between these measurements will be the volume of liquid delivered to the patient. In some embodiments a measurement will be taken before filling the liquid side of the one or more reservoirs and/or prior to discharging the liquid, e.g., when the syringe pump is preloaded, to detect any failures of the fluidic system.
An AVS measurement may occur in accordance with the following acts: (1) the processor will turn on power to the AVS electronics, enable the ADC of the processor, and initialize an AVS algorithm; (2) an AVS measurement consists of collecting data at a number of different frequencies; (3) optionally measuring the temperature; and (4) then running an estimation routine based on the collected data to estimate the volume of liquid in the liquid side of a reservoir.
To collect data at each frequency, the speaker is driven sinusoidally at the target frequency and measurements are taken from the two microphones over an integer number of wavelengths, e.g., the reference microphone and the variable volume microphone (as described above). Once the data has been collected, the processor disclosed herein performs a discrete Fourier transform algorithm on the data to turn the time-series data from the microphones into a single complex amplitude. Integrity checks are run on the data from the microphones to determine if the data is valid, e.g., the response is within a predetermined phase and/or amplitude range of the acoustic frequency.
The frequency measurements are taken at a number of different frequencies. This sine-sweep is then used by the estimation routine to estimate the variable volume. After the estimation is complete, other integrity checks is may be performed on the whole sine sweep, including a secondary check by a processor disclosed herein.
In some embodiments, after the a processor disclosed herein verifies the measurement integrity, the volume estimates are finalized and the sensor is powered off.
AVS Resonance Model
The governing equations for the AVS system can be found from first-principles given a few simplifying assumptions. The system is modeled as two linearized acoustic volumes connected by an idealized acoustic port.
Modeling the Acoustic Volumes
The pressure and volume of an ideal adiabatic gas can be related by Equation (35) as follows:

PV Î³ =Kââ(35),

where K is a constant defined by the initial conditions of the system. Equation 1 can be written in terms of a mean pressure, P, and volume, V, and a small time-dependent perturbation on top of those pressures, p(t), v(t) as illustrated in Equation (36) as follows:

(P+p(t))(V+v(t))Î³ =Kââ(36).

Differentiating Equation (36) results in Equation (37) as follows:

{dot over (p)}(t)(V+v(t))Î³+Î²(V+v(t))Î³â1(P+p(t)){dot over (v)}(t)=0ââ(37)

Equation (37) simplifies to Equation (38) as follows:










p
.

â¡

(
t
)


+

Î³
â¢

 

â¢


P
+

p
â¢

(
t
)




V
+

v
â¡

(
t
)




â¢


v
.

â¡

(
t
)




=
0.




(
38
)







If the acoustic pressure levels are much less than the ambient pressure the Equation (38) can be further simplified to Equation (39) as follows:










p
.

â¡

(
t
)


+



Î³
â¢

 

â¢
P

V

â¢


v
.

â¡

(
t
)




=
0.




(
39
)







Using the adiabatic relation, Equation (40) can be shown as follows:








P
V

=


(


P
+

p
â¡

(
t
)




V
+

v
â¡

(
t
)




)

â¢



(


P
+

p
â¡

(
t
)



P

)


-


Î³
+
1

Î³



.






(
40
)







Thus, the error assumption is shown in Equation 41 as follows:







error
=

1
-



(


P
+

p
â¡

(
t
)



P

)


-


Î³
+
1

Î³



.






(
41
)







A very loud acoustic signal (e.g., 120 dB) would correspond to pressure sine wave with amplitude of roughly 20 Pascal. Assuming air at atmospheric conditions has the parameters of Î³=1.4 and P=101325 Pa, the resulting error is 0.03%. The conversion from dB to Pa is shown in Equation (42) as follows:








Î»
=


20
â¢


log
10

(


p
rms


p
ref


)

â¢

 

â¢
or
â¢

 

â¢

p
rms


=


p
ref

â¢

10

Î»
20





,




(
42
)







where pref=20Â·Î¼Pa.
Applying the ideal gas law, P=ÏRT, and substituting in for pressure gives the result as shown in Equation (43) as follows:










p
.

â¡

(
t
)


+



Î³
â¢

 

â¢
RT
â¢

 

â¢
Ï

V

â¢


v
.

â¡

(
t
)




=
0.




(
43
)







This can be written in terms of the speed of sound in Equation (44) as follows:

a=â{square root over (Î²RT)}ââ(44).

And, substituting in Equation (44) in Equation (43) results in Equation (45) as follows:










p
.

â¡

(
t
)


+




 

â¢

Ï
â¢

 

â¢

a
2



V

â¢


v
.

â¡

(
t
)




=
0.




(
45
)







Acoustic impedance for a volume is defined in Equation 46 as follows:








Z
v

=



p
â¡

(
t
)




v
.

â¡

(
t
)



=

-


1


(

V

Ï
â¢

 

â¢

a
2



)

â¢
s


.







(
46
)







Modeling the Acoustic Port
The acoustic port is modeled assuming that all of the fluid in the port essentially moves as a rigid cylinder reciprocating in the axial direction. All of the fluid in the channel is assumed to travel at the same velocity, the channel is assumed to be of constant cross section, and the end effects resulting from the fluid entering and leaving the channel are neglected.
If we assume laminar flow friction of the form ÎP=fÏ{dot over (v)}, the friction force acting on the mass of fluid in the channel can be written: F=fÏA2{dot over (x)}. A second order differential equation can then be written for the dynamics of the fluid in the channel as shown in Equation (47) as follows:

ÏLA{umlaut over (x)}=ÎpAâfÏA 2 {umlaut over (x)}ââ(47),

or, in terms of volume flow rate as shown in Equation (48) as follows:








v
Â¨

=



-

fA
L


â¢

v
.


+

Î
â¢

 

â¢
p
â¢

 

â¢


A

Ï
â¢

 

â¢
L


.







(
48
)







The acoustic impedance of the channel can then be written as shown in Equation (49):








Z
p

=



Î
â¢

 

â¢
p


v
.


=



Ï
â¢

 

â¢
L

A

â¢


(

s
+

fA
L


)

.







(
49
)







System Transfer Functions
Using the volume and port dynamics define above, the AVS system can be described by the following system of Equations 50-53:











p
.

0

-



Ï
â¢

 

â¢

a
2



V
0


â¢


v
.

k



=
0

,




(
50
)










p
.

1

+



Ï
â¢

 

â¢

a
2



V
1


â¢

(



v
.

k

-


v
.

r


)



=
0

,




(
51
)










p
.

2

+



Ï
â¢

 

â¢

a
2



V
2


â¢


v
.

r



=
0

,
and




(
52
)








v
Â¨

r

=



-

fA
L


â¢


v
.

r


+


A

Ï
â¢

 

â¢
L


â¢


(


p
2

-

p
1


)

.







(
53
)







One equation can be eliminated if p0 is treated as the input substituting in
      v .  k  =    V 0   Ï â¢     â¢  a 2    â¢   p .  0      
as shown in Equations 54-56:












p
.

1

+



V
0


V
1


â¢


p
.

0


-



Ï
â¢

 

â¢

a
2



V
1


â¢


v
.

r



=
0

,




(
54
)










p
.

2

+



Ï
â¢

 

â¢

a
2



V
2


â¢


v
.

r



=
0

,
and




(
55
)








v
Â¨

r

=



-

fA
L


â¢


v
.

r


+


A

Ï
â¢

 

â¢
L


â¢

p
2


-


A

Ï
â¢

 

â¢
L


â¢


p
1

.







(
56
)







The relationship between the two volumes on each side of the acoustic port is referred to as the Cross Port transfer function. This relationship is illustrated in Equation (57) as follows:










p
2


p
1


=


Ï
n
2



s
2

+

2
â¢

Î¶Ï
n

â¢
s

+

Ï
n
2




,




(
57
)







where





Ï
n
2

=





a
2

â¢
A

L

â¢

1

V
2


â¢

 

â¢
and
â¢

 

â¢
Î¶

=


fA

2
â¢
L
â¢

 

â¢

Ï
n



.






This relationship has the advantage that the poles are only dependent on the variable volume and not on the reference volume. Note that the resonant peak is actually due to the inversion of the zero in the response of the reference volume pressure. This means that that pressure measurement in the reference chamber will have a low amplitude in the vicinity of the resonance which may influence the noise in the measurement.
Resonance Q Factor and Peak Response
The quality of the resonance is the ratio of the energy stored to the power loss multiplied by the resonant frequency. For a pure second-order system the quality factor can be expressed as a function of the damping ratio illustrated in Equation (58):







Q
=


1

2
â¢
Î¶


.





(
58
)







The ratio of the peak response to the low-frequency response can also be written as a function of the damping ratio shown in Equation (59):









ï
G
ï


Ï
d


=


1

Î¶
â¢


5
-

4
â¢
Î¶





.





(
60
)







This will occur at the damped natural frequency Ïd=Ïnâ{square root over (1âÎ¶)}.
Electrical and Mechanical Analogies
The acoustic resonator is analogous to either a spring-mass-damper system or a LRC circuit, e.g., a resistor, inductor and capacitor coupled together in series, for example.
Computing the Complex Response
To implement AVS, the system must get the relative response of the two microphones to the acoustic wave set up by the speaker. This is accomplished by driving the speaker with a sinusoidal output at a known frequency; the complex response of each microphone is then found at that driving frequency. Finally, the relative responses of the two microphones are found and corrected for alternating sampling of the analog-to-digital converter coupled to the a processor disclosed herein.
In addition, the total signal variance is computed and compared to the variance of pure tone extracted using the discrete Fourier transform (âDFTâ). This gives a measure of how much of the signal power comes from noise sources or distortion. In some embodiments of the present disclosure, this value can be used to reject and repeat bad measurements.
Computing the Discrete Fourier Transform
The signal from each microphone is sampled synchronously with the output to the speaker such that a fixed number of points, N, are taken per wavelength. The measured signal at each point in the wavelength is summed over an integer number of wavelengths, M, and stored in an array x by an interrupt service routine (âISRâ) in the processor disclosed herein after all the data for that frequency has been collected.
A discrete Fourier transform is done on the data at the integer value corresponding to the driven frequency of the speaker. The general expression for the first harmonic of a DFT is as follows in Equation (61):








x
k

=


2
MN

â¢


â

n
=
0


N
-
1


â¢


x
n

â¢


e


-


2
â¢
Ï
â¢

 

â¢
i

N


â¢
kn


.








(
61
)







The product MN is the total number of points and the factor of 2 is added such that the resulting real and imaginary portions of the answer match the amplitude of the sine wave illustrated in Equation (62):








x
n

=



re
â¡

(

x
k

)


â¢

cos
â¡

(



2
â¢
Ï

N

â¢
kn

)



+


im
â¡

(

x
k

)


â¢


sin
â¡

(



2
â¢
Ï

N

â¢
kn

)


.







(
62
)







This real part of this expression is illustrated in Equation (63):








re
â¡

(
x
)


=


2
MN

â¢


â

n
=
0


N
-
1


â¢


x
n

â¢


cos
â¡

(



2
â¢
Ï

N

â¢
n

)


.








(
63
)







We can take advantage of the symmetry of the cosine function to reduce the number of computations needed to compute the DFT. The expression above is equivalent to Equation (64) as follows:








re
â¡

(
x
)


=



2
MN

â¡

[


(


x
0

-

x


1
2

â¢
N



)

+


â

n
=
1




1
4

â¢
N

-
1


â¢


sin
â¡

(


Ï
2

-



2
â¢
Ï

N

â¢
n


)


â¡

[


(


x
n

-

x



1
2

â¢
N

+
n



)

-

(


x



1
2

â¢
N

-
n


-

x

N
-
n



)


]




]


.





(
64
)







Similarly, the imaginary portion of the equation is illustrated in Equation (65) as follows:
         im â¡  ( x )   =   -  2 MN   â¢   â  n = 0   N - 1   â¢   x n  â¢  sin â¡  (    2 â¢ Ï  N  â¢ n  )       ,     ( 65 )       
which may be expressed as Equation (66):









im
â¡

(
x
)


=

-



2
MN

â¡

[


(


x


1
4

â¢
N


-

x


3
4

â¢
N



)

+


â

n
=
1




1
4

â¢
N

-
1


â¢


sin
â¡

(



2
â¢
Ï

N

â¢
n

)


â¡

[


(


x
n

-

x



1
2

â¢
N

+
n



)

+

(


x



1
2

â¢
N

-
n


-

x

N
-
n



)


]




]


.






(
66
)







The variance of the signal at that driven frequency is illustrated in Equation (67) as follows:








Ï
tone
2

=


1
2

â¢


(



re
â¡

(
x
)


2

+


im
â¡

(
x
)


2


)

.






(
67
)







The tone variance is proportional to the acoustic power at the driven frequency. The maximum possible value of the real and imaginary portions of x is 211; this corresponds to half the A/D range. The maximum value of the tone variance is 221; half the square of the AD range.
Computing the Total Signal Variance
A good measure of the integrity of a measurement is the ratio of the acoustic power at the driven frequency relative to the total acoustic power at all frequencies. The total signal variance is given by the expression in Equation (68):








Ï
total
2

=




1
NM

â¢


â

n
=
0


MN
-
1


â¢

p
n
2



-


p
_

2


=



1
NM

â¢


â

n
=
0


MN
-
1


â¢

p
n
2



-



(


1
NM

â¢


â

n
=
0


MN
-
1


â¢

p
n



)

2

.







(
68
)







However, in some specific embodiments, the summations are performed in the A/D interrupt service routine (ISR) where there are time constraints and/or all of the microphone data must be stored for post-processing. In some embodiments, to increase efficiency, a pseudo-variance is calculated based on a single averaged wavelength. The pseudo-variance of the signal is calculated using the following relation illustrated in Equation (69) as follows:








Ï
total
2

=



1

NM
2


â¢


â

n
=
0


N
-
1


â¢

x
n
2



-


1


N
2

â¢

M
2



â¢



(


â

n
=
0


N
-
1


â¢

x
n


)

2

.







(
69
)







The result is in the units of AD counts squared. The summation will be on the order of
      â  n = 0   N - 1   â¢  x n 2   =  O â¡  (   NM 2  â¢  2 24   )      
for a 12-bit ADC. If N<27=128 and M<26=64 then the summation will be less than 243 and can be stored in a 64-bit integer. The maximum possible value of the variance would result if the ADC oscillated between a value of 0 and 212 on each consecutive sample. This would result in a peak variance of

      1 4  â¢   (  2 12  )  2   =  2 22     
so the result can be stored at a maximum of a Q9 resolution in a signed 32-bit integer.

Computing the Relative Microphone Response
The relative response of the two microphones, G, is then computed from the complex response of the individual microphones illustrated in Equations 70-72:







G
=



x
var


x
ref


=



x
var


x
ref


â¢



x
ref
*


x
ref
*


.







(
70
)







Re
â¡

(
G
)


=





Re
â¡

(

x
var

)


â¢

Re
â¡

(

x
ref

)



+


Im
â¡

(

x
var

)


â¢

Im
â¡

(

x
ref

)







Re
â¡

(

x
ref

)


2

+


Im
â¡

(

x
ref

)


2



.





(
71
)







Im
â¡

(
G
)


=





Re
â¡

(

x
ref

)


â¢

Im
â¡

(

x
var

)



-


Re
â¡

(

x
var

)


â¢

Im
â¡

(

x
ref

)







Re
â¡

(

x
ref

)


2

+


Im
â¡

(

x
ref

)


2



.





(
72
)







The denominator of either expression can be expressed in terms of the reference tone variance computed in the previous section, illustrated as follows in Equation 73:

Re(x ref)2 +IM(x ref)2=2Ïref 2ââ(73).

Correcting for A/D Skew
The speaker output may be updated at a fixed 32 times per sample. For example, as the driving frequency is changed, the speaker output frequency is also updated to maintain the fixed 32 cycles. The two microphones are sampled synchronous with the speaker output so the sampling frequency remains at a fixed interval of the driving frequency. The microphone A/D measurements, however, are not sampled simultaneously; the A/D ISR alternates between the two microphones, taking a total of N samples per wavelength for each microphone. The result will be a phase offset between the two microphones of
     Ï N  .    
To correct for this phase offset, a complex rotation is applied to the relative frequency response computed in the previous section.

To rotate a complex number an angle
    Ï N    
it is multiplied by

     e  i â¢  Ï N    =   cos â¡  (  Ï N  )   +  i â¢     â¢   sin â¡  (  Ï N  )   .       
The result is illustrated in Equation (74) as follows:






G
rotated

=


(



Re
â¡

(
G
)


â¢

cos
â¡

(

Ï
N

)



-


Im
â¡

(
G
)


â¢

sin
â¡

(

Ï
N

)




)

+


(



Im
â¡

(
G
)


â¢

cos
â¡

(

Ï
N

)



+


Re
â¡

(
G
)


â¢

sin
â¡

(

Ï
N

)




)

â¢
i






Time Delays
In some embodiments, one of the assumptions when deriving the AVS equations is that the pressure is uniform in the acoustic volumes. This assumption is true if the acoustic wavelength is large compared to the dimensions of the AVS chamber. The wavelength of a sound wave at a given frequency can be computed with the following Equation (75):







Î»
=


a
f

.





(
75
)







For example, the wavelength at 1 kHz is roughly 246 mm and at 5 kHz is roughly 49.2 mm. The AVS chamber may have a diameter such that the time delay associated with acoustic waves traveling through the volumes has a small but measurable effect. The effect can be modeled as a time delay (or time advance, depending on microphone orientation). The Laplace transform of a pure time delay, d, is illustrated in Equation (76) as follows:

G=e dsââ(76).

The phase is influenced by the time delay, but not the magnitude of system response. To correct for the time delays, the frequency response data may be corrected in advance by applying a model fit algorithm. The complex amplitude may be rotated as a function of frequency according the time delay equation above. The time delay may be assumed to be fixed, so the rotation is only a function of frequency.
The time delay may be determined by running an optimization routine to find the time delay to minimize the model fit error. Additionally or alternatively, there may be an apparent âtime advanceâ in the data. For example, the reference microphone may experience a pressure perturbation slightly in advance of the acoustic port and the variable microphone may experience a pressure perturbation slightly behind the acoustic port. These âadvancesâ and âdelaysâ may be the effects of the propagation of the pressure waves and are in addition to âresonantâ dynamics of the system, e.g., these effects may be accounted for.
Amplitude Leveling
The amplitude of the pressure measurements for a given speaker drive signal may vary from device-to-device and also as a function of the driven frequency. The device-to-device variations result from part-to-part differences in microphone and speaker sensitivities (e.g., roughly on the order of +/â3 dB). The frequency-based dependencies result from variations in speaker sensitivity over frequency as well as from the expected dynamics of the acoustic resonance.
To compensate, in some embodiments, the speaker gain is automatically tuned during the AVS measurement. The speaker gains are stored in an array with one entry for each of the sine-sweep frequencies, e.g., within the memory 22 of FIG. 2. The amplitude of the microphone signal (from either the variable or reference microphone) may be checked against the target amplitude. If it is either too large or too small a binary search routine may be employed to update the speaker gain at that frequency.
Checking Individual Measurement Integrity
It is possible for component errors, failures, or external disturbances to result in an erroneous measurement. Component failures might include a distorted speaker output or failed microphone. External disturbances might include mechanical shock to the pump housing or an extremely loud external noise. These types of failures can be detected using two different integrity checks: microphone saturation and out-of-band variance.
The microphone saturation check looks at the maximum and minimum values of the wavelength averaged signal for each microphone. If these values are close to the limits of the A/D then a flag within the processor disclosed herein is set indicating that the measurement amplitude was out of range.
The out-of-band variance check compares the tone variance to the total signal variance for each microphone. In the ideal case the ratio of these signals will be 1âall of the acoustic power will be at the driven frequency. In the event of shock or an extremely loud external acoustic noise, more power will be present at other frequencies and this value will be lower than unity. In some embodiments, normal operation may be considered to have a ratio greater than 0.99.
In some embodiments, if an individual data point fails either of these integrity checks, it may be repeated or excluded without having to repeat the entire sine-sweep to help facilitate AVS robustness. Other integrity checks may be done based on the complete sine-sweep and are described later.
Volume Estimation Using Swept Sine-Generalized Solution
The resonant frequency of the system may be estimated using swept-sine system identification. In this method the response of the system to a sinusoidal pressure variation may be found at a number of different frequencies. This frequency response data may be then used to estimate the system transfer function using linear regression.
The transfer function for the system can be expressed as a rational function of s. The general case is expressed below for a transfer function with an nth order numerator and an mth order denominator. N and D are the coefficients for the numerator and denominator respectively. The equation has been normalized such that the leading coefficient in the denominator is 1, as illustrated in Equations (77) and (78):








G
â¡

(
s
)


=




N
n

â¢

s
n


+


N

n
-
1


â¢

s

n
-
1



+
â¦
+

N
0




s
m

+


D

m
-
1


â¢

s

m
-
1



+


D

m
-
2


â¢

s

m
-
2



+
â¦
+

D
0







(
77
)





or



 







G
â¡

(
s
)


=




â

k
=
0

n

â¢


N
k

â¢

s
k





s
m

+


â

k
=
0


m
-
1


â¢


D
k

â¢

s
k





.





(
78
)







This equation can be re-written in the form of Equation 79 as follows:








Gs
m

=



â

k
=
0

n

â¢


N
k

â¢

s
k



-

G
â¢


â

k
=
0


m
-
1


â¢


D
k

â¢


s
k

.









(
79
)







Equation (80) shows this summation in matrix notation:








[





G
1

â¢

s
1
m






â®






G
k

â¢

s
k
m





]

=



[




s
1
n



â¦



s
1
0





-

G
1


â¢

s
1

m
-
1





â¦




-

G
1


â¢

s
1
0






â®



 



â®


â®



 



â®





s
k
n



â¦



s
k
0





-

G
k


â¢

s
k

m
-
1





â¦




-

G
k


â¢

s
k
0





]

â¡

[




N
n





â®





N
0






D

m
-
1






â®





D
0




]


.





(
80
)







Where k is the number of data points collected in the swept sine. To simplify the notation this equation can be summarized using the vectors y illustrated in Equation (81).

y=Xcââ(81).

Where y is k by 1, x is k by (m+nâ1) and c is (m+nâ1) by 1. The coefficients can then be found using a least square approach. The error function can be written as shown in Equation (82):

e=yâXcââ(82).

The function to be minimized is the weighted square of the error function; W is a kÃk diagonal matrix, as illustrated in Equations 83-84.

e T We=(yâXc)T W(yâXc)ââ(83).

e T We=y T Wyâ(y T WXc)T ây T WXc+c T x T WXcââ(84).

The center two terms are scalars so the transpose can be neglected, as illustrated in Equations 85-87:










e
T

â¢
We

=



y
T

â¢
Wy

-

2
â¢

y
T

â¢
WXc

+


c
T

â¢

x
T

â¢
WXc



,




(
85
)










â

e
T


â¢
We


â
c


=




-
2

â¢

X
T

â¢
Wy

+

2
â¢

X
T

â¢
WXc


=
0


,
and




(
86
)






c
=



(


X
T

â¢
WX

)


-
1


â¢

X
T

â¢

Wy
.






(
87
)







In some embodiments, the complex transpose in all of these cases is utilized. This approach can result in complex coefficients, but the process can be modified to ensure that all the coefficients are real. The least-square minimization can be modified to give only real coefficients if the error function is changed to Equation (88).

e T We=Re(yâXc)T WRe(yâXc)+Im(yâXc)T WIm(yâXc)ââ(88).

Then the coefficients can be found with the Equation (89):

c=(Re(X)T WRe(X)+Im(X)T WIm(X))â1(Re(X)T WRe(y)+Im(X)T WIm(y))ââ(89).

Volume Estimation Using Swept Sine-Solution for a 2nd Order System
For a system with 0th order numerator and a second order denominator as shown in the transfer function illustrated in Equation (90).








G
â¡

(
s
)


=



N
0



s
2

+


D
1

â¢
s

+

D
0



.





(
91
)







The coefficients in this transfer function can be found based on the expression found in the previous section as follows Equation (92):

c=(Re(X)T WRe(X)+Im(X)T WIm(X))â1(Re(X)T WRe(y)+Im(X)T WIm(y))ââ(92).

Where Equation (93) is as follows:








y
=

[





G
1

â¢

s
1
2






â®






G
k

â¢

s
k
2





]


,

X
=

[



1




-

G
1


â¢

s
1





-

G
1






â®


â®


â®




1




-

G
k


â¢

s
k





-

G
k





]


,


and
â¢

 

â¢
c

=


[




N
0






D
1






D
0




]

.






(
93
)







To simplify the algorithm we can combine some of terms as illustrated in Equations 94-96:

c=D â1 bââ(94),

where

D=Re(X)T WRe(X)+Im(X)T WIm(X)ââ(95), and

b=Re(X)T WRe(y)+Im(X)T WIm(y)ââ(96).

To find an expression for D in terms of the complex response vector G and the natural frequency s=jÏ we first split X into its real and imaginary parts as illustrated in Equations (97) and (98), respectively, as follows:









Re
â¡

(
X
)


=

[



1




Ï
k

â¢

Im
â¡

(

G
1

)






-

Re
â¡

(

G
1

)







â®


â®


â®




1




Ï
k

â¢

Im
â¡

(

G
k

)






-

Re
â¡

(

G
k

)






]


,
and




(
97
)







Im
â¡

(
X
)


=


[



0




-

Ï
k


â¢

Re
â¡

(

G
1

)






-

Im
â¡

(

G
1

)







â®


â®


â®




0




-

Ï
k


â¢

Re
â¡

(

G
k

)






-

Im
â¡

(

G
k

)






]

.





(
98
)







The real and imaginary portions of the expression for D above then become Equations (99) and (100), respectively:





 

â¢

(
99
)










Re
â¡

(
X
)


T

â¢
W
â¢

 

â¢

Re
â¡

(
X
)



=

â


[





â

i
=
1

k

â¢

w
i






â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Ï
i






-


â

i
=
1

k

â¢


w
i

â¢

Re
â¡

(

G
i

)











â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Ï
i







â

i
=
1

k

â¢


w
i

â¢


Im
â¡

(

G
i

)


2

â¢

Ï
i
2






-


â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Re
â¡

(

G
i

)


â¢

Ï
i









-


â

i
=
1

k

â¢


w
i

â¢

Re
â¡

(

G
i

)








-


â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Re
â¡

(

G
i

)


â¢

Ï
i








â

i
=
1

k

â¢


w
i

â¢


Re
â¡

(

G
i

)


2






]

,




â¢

 

â¢


and
â¢




â¢

 

â¢

(
100
)

â¢




â¢


Im
â¡

(
X
)


T

â¢
W
â¢

 

â¢

Im
â¡

(
X
)



=


[



0


0


0




0




â

i
=
1

k

â¢


w
i

â¢


Re
â¡

(

G
i

)


2

â¢

Ï
i
2







â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Re
â¡

(

G
i

)


â¢

Ï
i







0




â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Re
â¡

(

G
i

)


â¢

Ï
i







â

i
=
1

k

â¢


w
i

â¢


Im
â¡

(

G
i

)


2






]

.








Combining these terms gives the final expression for the D matrix. This matrix will contain only real values, as shown in Equation (101) as follows:





 

â¢

(
101
)







D
=


[





â

i
=
1

k

â¢

w
i






â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Ï
i






-


â

i
=
1

k

â¢


w
i

â¢

Re
â¡

(

G
i

)











â

i
=
1

k

â¢


w
i

â¢

Im
â¡

(

G
i

)


â¢

Ï
i










â

i
=
1

k

â¢


w
i

(



Re
â¡

(

G
i

)


2

+










Im
â¢


(

G
i

)

2


)

â¢

Ï
i
2







0





-


â

i
=
1

k

â¢


w
i

â¢

Re
â¡

(

G
i

)







0




â

i
=
1

k

â¢


w
i

â¡

(



Re
â¡

(

G
i

)


2

+

Im
â¢


(

G
i

)

2



)






]

.





The same approach can be taken to find an expression for the b vector in terms of G and Ï. The real and imaginary parts of y are illustrated in Equation 102-103.









Re
â¡

(
y
)


=

[





-

Re
â¡

(

G
1

)



â¢

Ï
1
2






â®






-

Re
â¡

(

G
k

)



â¢

Ï
k
2





]


,
and




(
102
)







Im
â¡

(
y
)


=


[





-

Im
â¡

(

G
1

)



â¢

Ï
1
2






â®






-

Im
â¡

(

G
k

)



â¢

Ï
k
2





]

.





(
103
)







Combining these two gives the expression for the b vector illustrated in Equation 104 as follows:







b
=





Re
â¡

(
X
)


T

â¢
W
â¢

 

â¢

Re
â¡

(
y
)



+



Im
â¡

(
X
)


T

â¢
W
â¢

 

â¢

Im
â¡

(
y
)




=


[




-


â

i
=
1

k

â¢


w
i

â¢

Re
â¡

(

G
i

)


â¢

Ï
i
2








0






â

i
=
1

k

â¢



w
i

â¡

(



Re
â¡

(

G
i

)


2

+


Im
â¡

(

G
i

)


2


)


â¢

Ï
i
2






]

.






(
104
)







The next step is to invert the D matrix. The matrix is symmetric and positive-definite so the number of computations needed to find the inverse will be reduced from the general 3Ã3 case. The general expression for a matrix inverse is shown in Equation (105) as:








D

-
1


=


1

det
â¡

(
D
)



â¢


adj
â¡

(
D
)


.






(
105
)







If D is expressed as in Equation (106):








D
=

[




d
11




d
12




d
13






d
12




d
22



0





d
13



0



d
33




]


,




(
106
)







then the adjugate matrix can be written as in Equation (107) as follows:








adj
â¡

(
D
)


=

â


[




ï




d
22



0




0



d
33




ï




-

ï




d
12



0





d
13




d
33




ï





ï




d
12




d
22






d
13



0



ï






-

ï




d
12




d
13





0



d
33




ï





ï




d
11




d
13






d
13




d
33




ï




-

ï




d
11




d
12






d
13



0



ï







ï




d
12




d
13






d
22



0



ï




-

ï




d
11




d
13






d
12



0



ï





ï




d
11




d
12






d
12




d
22




ï




]

=


[




a
11




a
12




a
13






a
12




a
22




a
23






a
13




a
32




a
33




]

.







(
107
)







Due to symmetry, only the upper diagonal matrix needs to be calculated. The Determinant can then be computed in terms of the adjugate matrix values, taking advantage of the zero elements in the original array as illustrated in Equation (108) as follows:

det(D)=a 12 d 12 +a 22 d 22ââ(108).

Finally, the inverse of D can be written in the form shown in Equation (109):








D

-
1


=


1

det
â¡

(
D
)



â¢


adj
â¡

(
D
)


.






(
109
)







In some embodiments, we may solve the value in Equation (110):








c
=



D

-
1


â¢
b

=


1

det
â¡

(
D
)



â¢

adj
â¡

(
D
)


â¢
b



;




(
110
)







So that Equation (111) is used:








c
=




1

det
â¡

(
D
)



â¡

[




a
11




a
12




a
13






a
12




a
22




a
23






a
13




a
32




a
33




]


â¡

[




b
1





0





b
3




]


=


1

det
â¡

(
D
)



â¡

[






a
11

â¢

b
1


+


a
13

â¢

b
3










a
12

â¢

b
1


+


a
23

â¢

b
3










a
13

â¢

b
1


+


a
33

â¢

b
3






]




,




(
111
)







To get a quantitative assessment of how well the data fits the model, the original expression for the error as shown in Equation (112) is utilized:

e T We=Re(yâXc)T WRe(yâXc)+Im(yâXc)T WIm(yâXc)ââ(112).

This can be expressed in terms of the D matrix and the b and c vectors illustrated in Equation (113):

e T We=hâ2c T b+c T Dcââ(113),

where:








h
=



Re
â¡

(

y
T

)


â¢
W
â¢

 

â¢

Re
â¡

(
y
)



+


Im
â¡

(

y
T

)


â¢
W
â¢

 

â¢

Im
â¡

(
y
)





,
and




(
114
)






h
=


â

i
=
1

k

â¢



w
i

â¡

(



Re
â¡

(

G
i

)


2

+


Im
â¡

(

G
i

)


2


)


â¢


Ï
i
4

.







(
115
)







In some embodiments, to compare the errors from different sine sweeps, the fit error is normalized by the square of the weighted by matrix as follows in Equation (116), where h is a scalar:

e T Weh â1=(hâ2c T b+c T Dc)h â1ââ(116).

Volume Estimation Using Swept Sine-Estimating Volume
The model fit may be used such that the resonant frequency of the port may be extracted from the sine sweep data. The delivered volume may be related to this value. The ideal relationship between the two can be expressed by the relation illustrated in Equation (117):








Ï
n
2

=




a
2

â¢
A

L

â¢


1

V
2


.






(
117
)







The speed of sound will vary with the temperature, so it is useful to split out the temperature effects as shown in Equation (118):








Ï
n
2

=



Î³
â¢

 

â¢
RA

L

â¢


T

V
2


.






(
118
)







The volume can then be expressed as a function of the measured resonant frequency and the temperature, illustrated in Equation (119) as follows:








V
2

=

C
â¢


T

Ï
n
2


.






(
119
)







Where C is the calibration constant illustrated in Equation (120) as follows:







C
=



Î³
â¢

 

â¢
RA

L

.





(
120
)







Volume Estimation Using Swept Sine-Volume Estimation Integrity Checks
In some embodiments, a second set of integrity check can be performed out of the output of the mode fit and volume estimation routines (the first set of checks is done at the FFT level). Checks may be done either through redundancy or through range checking for several values, such as: (1) model fit error, (2) estimated damping ratio, (3) estimated transfer function gain, (4) estimated natural frequency, (5) estimated variable volume, and (6) AVS sensor temperature.
In addition, portions of the AVS calculations may be done redundantly on the a processor disclosed herein using an independent temperature sensor and an independent copy of the calibration parameters to guard against RAM failures, in some specific embodiments.
Volume Estimation Using Swept Sine-Disposable Detection
The presence of the disposable, e.g., cartridges or reservoirs that are attachable, may be detected using a magnetic switch and mechanical interlock, in some specific embodiments. However, a second detection method may be used to 1) differentiate between the pump being attached to a disposable and a charger, and 2) provide a backup to the primary detection methods.
If the disposable is not present, the variable volume, V2, is effectively very large. As a result, there will be a normal signal from the reference microphone, but there will be very little signal on the variable microphones. If the mean amplitude of the reference microphone during a sine sweep is normal (this verifies that the speaker is working) and the mean amplitude of the variable microphone is small, a flag is set in the a processor disclosed herein indicating that the disposable is not present.
Implementation Details-Sizing V1 Relative to V2 
Sizing V1 may include trading off acoustic volume with the relative position of the poles and zeros in the transfer function. The transfer function for both V1 and V2 are shown below relative to the volume displacement of the speaker as illustrated in Equations 121-124, as follows:










p
2


v
k


=


-


Ï
â¢

 

â¢

a
2



V
1



â¢


Ï
n
2



s
2

+

2
â¢

 

â¢
Î¶
â¢

 

â¢

Ï
n

â¢
s

+

Î±
â¢

 

â¢

Ï
n
2






,
and




(
121
)








p
1


v
k


=


-


Ï
â¢

 

â¢

a
2



V
1



â¢



s
2

+

2
â¢

Î¶Ï
n

â¢
s

+

Î±
â¢

 

â¢

Ï
n
2





s
2

+

2
â¢

 

â¢
Î¶
â¢

 

â¢

Ï
n

â¢
s

+

 

â¢

Ï
n
2








(
122
)







where









Ï
n
2

=




a
2

â¢
A

L

â¢

1

V
2




,

Î¶
=


fA

2
â¢
L
â¢

 

â¢

Ï
n



â¢

 

â¢
and






(
123
)






Î±
=


(

1
+



 

â¢

V
2



V
1



)

.





(
124
)







As V1 is increased the gain decreases and the speaker must be driven at a higher amplitude to get the same sound pressure level. However, increasing V1 has the benefit of moving the complex zeros in the p1 transfer function toward the complex poles. In the limiting case where V1ââ then Î±â1 and you have pole-zero cancellation and a flat response. Increasing V1, therefore, has the reduces both the resonance and the notch in the p1 transfer function, and moves the p2 poles toward Ïa; the result is a lower sensitivity to measurement error when calculating the p2/p1 transfer function.
Implementation Details-Aliasing
Higher frequencies can alias down to the frequency of interest. The aliased frequency can be expressed in Equation (125) as follows:

f=|f n ânf s|ââ(125).

Where fs is the sampling frequency, fn is the frequency of the noise source, n is a positive integer, and f is the aliased frequency of the noise source.
The demodulation routine may filter out noise except at the specific frequency of the demodulation. If the sample frequency is set dynamically to be a fixed multiple of the demodulation frequency, then the frequency of the noise that can alias down to the demodulation frequency will be a fixed set of harmonics of that fundamental frequency.
For example, if the sampling frequency is 8 times the demodulation frequency then the noise frequencies that can alias down to that frequency are









f
n

f

=


{


1


n
â¢

 

â¢
Î²

+
1


,

1


n
â¢

 

â¢
Î²

-
1



}

=

{


1
7

,

1
9

,

1
15

,

1
17

,

1
23

,

1
25

,
â¦

}






(
126
)







where
       Î² =    f s  f  = 8.      ( 127 )       
For Î²=16 we would have the series










f
n

f

=


{


1
15

,

1
17

,

1
31

,

1
33

,
â¦

â¢

 

}

.





(
127
)







Sources of Avs Measurement Error-Avs Chamber Movement
In some embodiments, one of the assumptions of the AVS measurement is that the total AVS volume (V2 plus the volume taken up the by the other components) is constant. However, if the AVS housing flexes the total volume of the AVS chamber may change slightly and affect the differential volume measurement. In some embodiments, to keep the contribution of the volume error is kept to be less than 1.0% of the fluid delivery.
Sources of Avs Measurement Error-External Noise
In some embodiments, external noise sources may be filtered out.
Sources of Avs Measurement Error-Mechanical Shock
Mechanical shock to the pump housing during an AVS measurement will affect the microphone measurements and may result in an error in the frequency response data. This error, however, is detectable using the out-of-band variance check in the demodulation routine by the a processor disclosed herein. If such an error is detected, the data point can be repeated (e.g., another sample is taken) resulting in little or no effect on the resulting AVS measurement.
Sources of Avs Measurement Error-Air in the AVS Chamber
A mechanism for an air bubble to affect the AVS measurement is through a secondary resonance. This secondary resonance will make the system 4th order and, depending on the frequency and magnitude of the secondary resonance, can cause some error if the estimation is using a 2nd order model.
Sources of Avs Measurement Error-Electrical Component Failure
In general, failure an electrical component will result in no signal or in increased harmonic distortion. In either case the fault would be detected by AVS integrity checks and the measurement invalidated.
The one exception that has been identified is a failure of the oscillator used to control the DAC and ADC. If this oscillator were to drift out of tolerance it would introduce a measurement error that would not be detected by the low-level integrity check (it would be detected in an extreme case by the volume integrity checks described above). To guard against these failures, in some embodiments, the oscillator is checked against an independent clock whenever an AVS measurement is initiated.
L-Shaped Cam Follower Peristaltic Pump
 FIGS. 255-302 show another embodiment of a peristaltic pump 2990.
 FIG. 255 illustrates a peristaltic pump 2990 comprising a pumping mechanism 3000, display 2994, buttons 2996, chassis 2992, and clamp 2998. The chassis 2992 includes an extension 2992A above the pumping mechanism 3000 that deflects liquid away from the inside of the mechanism.
 FIGS. 256A-B illustrate a peristaltic pumping mechanism 3000 having L-shaped cam followers 3090, 3101, 3110 (see FIG. 274) in an exploded view. A housing, composed optionally of two halves, 3005, 3010 provides a mounting for a cam shaft 3080, a main PCB 3002, a cam-follower shaft 3120, a gear head assembly 3070, and hinge points 3010A to mount a door 3020. The two halves 3005, 3010 may be an upper half 3010 and a lower half 3005. The sensor housing 3015 may mount to the housing halves 3005, 3010 and provide an attachment point to a sensor mount 3060 and a rotation sensor board 3130 (FIG. 257). An air-in-line detector 3066 (see FIG. 257) and a pressure sensor 3068 (FIG. 257) may be attached to the sensor mount 3060.
 FIG. 257 illustrates the pumping mechanism 3000 having L-shaped cam followers 3090, 3101, 3110 (see FIG. 274) with the door assembly 3021 fully open and the infusion line 3210 and slide occluder 3200 mounted in the door 3020. The door assembly 3021 is mounted to the housing halves 3010, 3005 via two hinges 3010A and a hinge pin 3012 (FIG. 258). In the open position, the door assembly 3021 may provide convenient receiving elements, which may serve to locate an infusion line 3210 on the door assembly 3021. The receiving elements may locate the infusion line 3210 so that it properly interfaces or lines up with the sensors and active elements of the peristaltic pump 2990. The sensors may, for example, include a pressure sensor 3068 (FIG. 257) and/or an air-in-line sensor 3066 (FIG. 257). The active elements may include, for example, the plunger 3091, inlet valve 3101 and outlet valve 3111 (FIG. 260). The receiving elements in the door 3020 may include one or more of the following: grooves in the door 3020K (see FIG. 259), clips 3062A (FIG. 257), clip inserts 3024 (FIG. 257), platen 3022 (FIG. 257, 259). The clips 3062A (FIG. 257) and 3024 (FIG. 257) may be fabricated out of any suitable, non-deformable, non or minimally compliant material. The clips 3062A are preferably molded from plastic such as nylon, but many other materials including ABS plastic, aluminum, steel or ceramics may be used.
The door assembly 3021 (FIG. 257) may include a receiving element for the slide occluder 3200. The slide occluder 3200 receiving elements in the door assembly 3021 may hold the slide occluder 3200 in position so that the slide occluder 3200 enters a receiving opening in the pump body 3001 (FIG. 265). Some of the slide occluder 3200 receiving elements may include features that prevent the infusion set from being loaded incorrectly. In one embodiment, door split carriage 3040 includes a slot to receive the slide occluder 3200 and hold it perpendicular to the infusion line 3210 as the door assembly 3021 is closed against the pump body 3001. The slide occlude 3200 may include tabs 3040C (FIG. 259) that allow the slide occluder 3200 to only be inserted such that cutouts 3200A (FIG. 261) line up with tabs 3040C (FIG. 261). In another embodiment, the door 3020 may include tabs 3020F (FIG. 262, 263) that allow the slide occluder 3200 to only be inserted such that cutouts 3200A (FIG. 261) line up with tabs 3020F (FIG. 262). The door 3020 (FIG. 257) may include tabs 3020D (FIG. 259) that prevent the slide occluder 3200 (FIG. 257) from being inserted with the tab 3200B (FIG. 261) toward the door assembly 3021 (FIG. 257). The tabs 3020F located on the door 3020 and/or on the door-split-carriage 3040 (FIG. 257) may allow the slide occluder 3200 to be inserted in only one orientation and thereby force the correct orientation between the infusion set and the pumping mechanism 3000. The platen 3022 (FIG. 257) receives the infusion line 3210 and provides a general âUâ shape to constrain the infusion line 3210 as a plunger 3091 deforms the infusion line 3210 during pumping.
 FIG. 264 illustrates, in an exploded view, the door assembly 3021 including the lever 3025 and the split carriage 3041 of the peristaltic pumping mechanism 3000 (FIG. 257) having L-shaped cam followers 3090, 3101, 3110 (see FIG. 274). Infusion line 3210 receiving elements 3062, 3022 (FIG. 260) 3024 (FIG. 257) may be mounted respectively in recesses 3020A, 3020B, 3020E of the door 3020. The door assembly 3021 may include a door split carriage 3040 that is connected to the lever 3025 via link 3035. The door assembly 3021 may also include a flat spring 3032 that is a sheet of resilient material such as spring-steel. The flat spring 3032 may be pressed against the door 3020 by the latch pin 3034 as the lever 3025 grips the body pins 3011 (FIG. 297) on the pump body 3001 and draws the latch pin 3034 toward the pump body 3001. The latch pin 3034 moves along slot 3020C in the door 3020 as the latch hooks 3025C engage the body pins 3011.
 FIG. 265 illustrates the peristaltic pump 2990 (FIG. 255) having L-shaped cam followers 3090, 3101, 3110 (see FIG. 274) with the door assembly 3021 open and the lever 3025 retracted. The main PCB 3002, which includes the control processors and some sensors is shown attached to the top of the upper housing 3010. A motor 3072 and gear head 3070 are shown in position at one end of the upper housing 3010. The rotation sensor assembly 3130 may be mounted on the lower housing half 3005. The pump body 3001 may comprise housing halves 3005, 3010, the rotating, and reciprocating mechanisms inside the housing halves 3005, 3010, the motor 3072 and gearbox 3070, the sensors and the structure in which the above mount.
 FIG. 260 illustrates the peristaltic pump 2990 (FIG. 255) having L-shaped cam followers 3090, 3101, 3110 (see FIG. 274) with the door 3020 open and the upper housing 3010 and other elements removed to reveal the cam-shaft 3080, the plunger 3091 and valves 3101, 3111. The motor 3072 drives the cam shaft 3080 through the gearbox 3070. The motor 3072 may have a drive shaft whose the speed and/or position can be controlled. In one embodiment the motor 3072 is a brushless DC servo-motor 3072 controlled by a motor controller 3430 (see FIG. 325B) that may be mounted on the main PCB 3002. In alternative embodiments, the motor 3072 may be a stepper motor 3072, a DC brushed motor 3072 or an AC motor 3072 with the appropriate controller.
The motor 3072 may be fixedly coupled to the gearbox 3070 allowing the motor/gearbox unit to be attached as a unit to the cam shaft 3080 and upper housing 3010. The gear reduction of the gearbox 3070 increases the torque, while increasing the number of motor 3072 rotations per rotation of the cam shaft 3080 (FIG. 260). In one embodiment, the gearbox 3070 has a reduction ratio of 19:1. The gear reduction allows reasonable resolution on the cam shaft 3080 (FIG. 260) position with a relatively few number of hall sensors in the motor 3072. In one embodiment, three hall sensors and eight windings produce twenty-four crossings per revolution. The twenty-four crossings combined with a 19:1 gear ratio provides better than 0.8Â° angular resolution on the cam shaft 3080 (FIG. 260) rotation.
The rotation of the cam shaft 3080 (FIG. 260) may be directly measured with a rotation sensor 3130 (FIG. 257) that detects the position of the magnet 3125 on the end of the cam shaft 3080 (FIG. 260). In one embodiment, the sensor is a single-chip magnetic rotary encoder IC that employs 4 integrated Hall elements that detect the position of the magnet 3125 (FIG. 260), a high resolution analog to digital converter and a smart power management controller. The angle position, alarm bits and magnetic field information may be transmitted over a standard 3-wire or 4-wire SPI interface to a host controller. One example of a rotary encoder is model AS5055 manufactured by Austriamicrosystems of Austria that provides 4096 increments per rotation.
The movements of the valve 3101, 3110, and the plunger 3090 are controlled by the rotation of the cam shaft 3080 that turns individual cams 3083, 3084, 3082 (FIG. 266), which in turn deflects a roller end 3092, 3102, 3112 (FIG. 274) of the L-shaped followers 3090, 3100, 3110 (FIG. 274) downward. The L-shaped cam followers 3090, 3100, 3110 (FIG. 274) rotate about the cam-follower shaft 3120, so downward movement of the roller end 3092, 3102, 3112 causes the active end to pull away from the infusion line 3210 (FIG. 276). Torsional springs 3094, 3104, 3114 (FIG. 274) on each of the L-shaped cam followers 3090, 3100, 3110 (FIG. 274) urge the rollers 3092, 3102, 3112 upward against the cams 3082, 3083, 3084 (FIG. 276) and urge the active ends 3091. 3101, 3111 toward the infusion line 3210.
The profiles of the outlet valve cam 3084, plunger cam 3083, and inlet valve cam 3082 are pictured in FIGS. 271-273. These profiles produce a valve sequence similar to that plotted in FIG. 197. The cams 3084, 3083, 3082 may be connected to the cam shaft 3080 in any of the standard methods including adhesive, press fit, keyed shaft. In some embodiments, the cams 3084, 3083, 3082 may be physically integrated into the cam shaft 3080 as a single piece. In one embodiment, the cams 3084, 3083, 3082 have a key slot 3082A, 3083A, 3084A and are pressed onto the cam shaft 3080 against a shoulder (not shown) with a key (not shown) to rotationally locate the cams 3084, 3083, 3082 on the cam shaft 3080 and a circle clip 3085 to hold the cams 3084, 3083, 3082 in position along the axis of the cam shaft 3080. The cam shaft 3080 is mounted in the upper and lower housings 3005, 3010 by bearings 3086. In one embodiment, the bearings 3086 are sealed roller bearings.
 FIG. 274 illustrates the plunger L-shaped follower 3090, valve L-shaped cam followers 3101, 3110 and cam-follower shaft 3120 in an exploded view. The L-shaped cam followers 3090, 3100, 3110 mount on the cam-follower shaft 3120 and rotate freely on the cam-follower shaft 3120. The rotation of the L-shaped cam followers 3090, 3100, 3110 on the cam-follower shaft 3120 may be facilitated by bearings. In one embodiment, the bearings are solid flanged bushings 3095, 3105, 3115 pressed into the bodies 3093, 3103, 3113 of the L-shaped cam followers 3090, 3100, 3110. The bearings may be any low friction bushing including bronze, brass, plastic, nylon, polyacetal, polytetrafluoroethylene (PTFE), ultra-high-molecular-weight polyethylene (UHMWPE), rulon, PEEK, urethane, and vespel. The flanges on the bushings 3095, 3105, 3115 may serve as axial bearing surfaces between adjacent L-shaped cam followers 3090, 3100, 3110 and between the valve L-shaped cam followers 3101, 3110 and the housing halves 3005, 3010 (FIG. 265). The flanges on the bushings 3095, 3105, 3115 (FIG. 274) may also serve to properly space the active ends 3091, 3101, 3111 (FIG. 274) of the L-shaped cam followers 3090, 3100, 3110 (FIG. 274) relative to platen 3022 (FIG. 257) on the door assembly 3021 (FIG. 257).
The cam-follower shaft 3120 (FIG. 274) may include end sections 3120A (FIG. 274) that are eccentric relative to the center section 3120B (FIG. 274) of the cam-follower shaft 3120 (FIG. 274). The position of the cam-follower shaft 3120 (FIG. 274) relative to the cam-shaft 3080 (FIG. 260) and/or platen 3022 (FIG. 260) may be finely adjusted by turning the eccentric end 3120A. Turning the eccentric end 3120A allows adjustment of the lash between rollers 3092, 3102, 3112 and the cams 3084, 3083, 3082 (FIGS. 271-273) on the cam shaft 3080 (FIG. 260).
The end section 3120A of the cam-follower shaft 3120 (FIG. 274) may include a feature 3120C to receive a tool such as a screw driver, hex key or other tool capable of applying a torque to the cam-follower shaft 3120 (FIG. 274). In one embodiment, the feature is a slot sized to accept a slot-headed screw driver. The eccentric ends 3120A fit in holes formed by cut-outs 3005D, 3010D (see FIG. 278) in the housing halves 3005, 3010 respectively. In one embodiment, the holes formed by cutouts 3005D, 3010D (FIG. 278) do not bind the cam-follower shaft 3120 (FIG. 274) in order to allow adjustment. A clamping element may be added to secure the rotary position of the cam-follower shaft 3120 (FIG. 274). In one embodiment, the clamping element is a set screw in threaded hole 3120A.
The L-shaped cam followers 3090, 3100, 3110 (FIG. 274) or actuators comprise rollers 3092, 3102, 3112 that touch the cams 3084, 3083, 3082 (FIGS. 271-273), an elastic element 3094, 3104, 3114 that urges the contacting element toward the cam surface, and an L-shaped structure 3093, 3103, 3113 that includes a bore, which mounts on the cam-follower shaft 3120 and connects the rollers 3092, 3102, 3112 to the active element 3091, 3101, 3111 that in turn touches the infusion line 3210. The L-shaped cam followers 3090, 3100, 3110 (FIG. 274) additionally include flanged bearings 3095, 3105, 3115 mounted in the bore of the structure 3093, 3103, 3113 (FIG. 274).
In one embodiment, the rollers 3092, 3102, 3112 rotate about a shaft 3096, 3106, 3116 that is mounted in the structures 3093, 3103, 3113 (FIG. 274). Rollers are preferred as the contacting element in order to reduce the load on the motor 3072 and improve peristaltic pump 2990 repeatability. In other embodiments a different type of contacting element may be used.
In one embodiment, the active elements, or inlet valve 3101, plunger 3091, an outlet valve 3111, are formed as part of the L-shaped cam followers 3090, 3100, 3110 (FIG. 274). In one embodiment, the active elements, 3091, 3101, 3111 are removably attached to the structure of each L-shaped cam follower 3090, 3100, 3110 (FIG. 274). In one embodiment, the active elements 3091, 3101, 3111 (FIG. 274) may be mechanically attached with screws. In other embodiments, the active elements 3091, 3101, 3111 (FIG. 274) may include studs that pass through holes in the structures 3093, 3103, 3113 (FIG. 274) and are held in place with nuts, or the active elements 3091, 3101, 3111 (FIG. 274) may include plastic studs that snap into receiving elements in the structures 3093, 3103, 3113 (FIG. 274).
The elastic elements 3094, 3104, 3114 urge the L-shaped cam followers 3090, 3100, 3110 (FIG. 274) against the cam surfaces of the cams 3084, 3083, 3082 (FIGS. 271-273) and toward the platen 3022 (FIG. 260) and infusion line 3210. In one embodiment, the elastic elements 3094, 3104, 3114 (FIG. 274) are coiled torsion springs that wrap around the section of the structures 3093, 3103, 3113 (FIG. 274) that includes the bore. One end of the torsion springs press against the L-shaped cam follower structures 3090, 3100, 3110 (FIG. 274) between the bore and the rollers 3092, 3102 and 3112. The other end of the spring contacts the fixed structure of the peristaltic pump 2990. In one embodiment the other end of each spring contacts a spring retainer 3140 (FIGS. 275, 276) that may include a slot 3140A to capture the spring end. A retainer set screw 3142 (FIG. 275) can be turned to move the spring retainer 3140 within the upper housing 3010 and apply a load against the elastic elements 3094, 3104, 3114. At some cam 3084, 3083, 3082 (FIGS. 271-273) rotary positions, the load applied to the spring will in turn be applied by the active ends 3091, 3101, 3111 to the infusion line 3210. The compressive load of each active ends 3091, 3101, 3111 (FIG. 274) on the infusion line 3210 may be adjusted by turning the corresponding retainer set screw 3142.
In another embodiment, the elastic elements 3094, 3104, 3114 (FIG. 274) are helical springs that are located between the L-shaped cam followers 3090, 3100, 3110 (FIG. 274) and the structure of the pump body 3001. The helical springs are located such that they urge the follower-end or roller-end of the L-shaped cam followers 3090, 3100, 3110 (FIG. 274) toward the cams 3082, 3083, 3084 (FIG. 271-273). The helical springs may also urge the active end of the L-shaped cam followers 3090, 3100, 3110 (FIG. 274) toward the platen 3022 (FIG. 260). One arrangement of helical springs and L-shaped cam followers 3090, 3100, 3110 is shown in FIGS. 205, 206, 219, 220.
 FIG. 276 shows a cross-section of the pump mechanism 3000 including sections of the plunger cam 3083, plunger 3091 and platen 3022. The cam shaft 3080 turns the plunger cam 3083 which is keyed to the shaft at 3084A. The cam 3083 displaces the cam contacting element or cam roller 3092, which is part of the plunger 3091 L-shaped cam follower 3090. The plunger 3091 L-shaped cam follower 3090 rotates about the cam-follower shaft 3120. The plunger 3091 L-shaped cam follower 3090 is held against the plunger cam 3083 by the elastic element 3094. One end of the elastic element 3094A contacts the structure 3093, while the free end of the elastic element 3094B contacts the spring retainer 3140. The plunger 3091 compresses the infusion line 3210 against the platen 3022. The plunger 3091 retracts from the platen 3022, when the plunger cam 3083 depresses the cam-roller 3092.
 FIG. 277 presents a cross-section of the plunger 3091, platen 3022 and infusion line 3210 at the bottom of the plunger 3091 stroke. At the top of the plunger 3091 stroke, the non compressed infusion line 3210 has a nominally round cross section that contains a maximum volume. The pumping mechanism 3000 maximizes pumping per stroke by allowing the infusion line 3210 to completely fill at the top of the stroke and minimize the volume inside the infusion line 3210 at the bottom of the plunger 3091 stroke. The amount of volume pumped may be impacted by the shape of the plunger 3091, the length of the plunger 3091 stroke and the shape of the platen 3022. However, if the infusion line 3210 is completely crushed, the forces on the plunger 3091 may be higher than needed, which may necessitate larger elastic elements 3090, 3100, 3110 (FIG. 274) and or a larger motor 3072 or higher power draw. The higher power draw may shorten the time the peristaltic pump 2990 can run on a battery 3420 or may create a heavier peristaltic pump 2990 due to a large battery 3420. The design of the plunger 3091 and platen 3022 may be selected to balance increased volume against higher loads on the plunger 3091. In one embodiment, the plunger 3091 and platen 3022 are designed to avoid compressing infusion line 3210 walls by providing a gap between the plunger 3091 and the platen 3022 that is slightly larger than two times the infusion line 3210 wall thickness.
In one embodiment, the plunger cam 3083 and plunger L-shaped cam follower 3090 are designed provide a minimum clearance 3022G between the tip of the plunger 3091B and the bottom of the platen 3022D. In one example, the clearance 3022G is 2 to 3 times the infusion line 3210 wall thickness and sufficient such that the infusion line 3210 walls do not touch between the plunger tip 3091B and platen bottom 3022D. In one example, the clearance 3022G between the plunger tip 3091B and the bottom of the platen 3022D is approximately 0.048â³, which is 9% larger than twice the wall thickness of an example infusion line 3210. In another example, the clearance 3022G may be as small as 2% larger than twice the wall thickness of an example infusion line 3210. In another example the clearance 3022G may be as large as 50% larger than twice the wall thickness of an infusion line 3210.
In one embodiment, the dimensions of the platen 3022 and plunger tip 3091B are selected to provide a clearance 3022G that is 2 to 3 times the wall thickness of a single wall of the infusion line 3210. In one example, the clearance 3022G between the plunger tip 3091B and the platen 3022 is 8% to 35% larger than twice the wall thickness of an example infusion line 3210. The clearance 3022G will allow the sides of the infusion line 3210 to fold without pinching the fold shut. In one embodiment, the plunger tip 3091B has a radius of 0.05â³ and sides 3091C that have an angle between them of 35Â°. The sides 3091C may meet the plunger tip 3091B radius at a tangent angle. The length of the plunger tip 3091D may be 0.116â³. The platen bottom 3022D may be flat and have a radius 3022C on each side. The length of the platen bottom 3022D and radii 3022C are selected to maintain a clearance 3022G between the plunger tip 3091B and the platen 3022 that is more than twice the infusion line 3210 wall thickness. In one example, the platen bottom 3022D is 0.05 long and each radius 3022C is 0.06â³. Side 3022B is angled away from the plunger 3091. The shorter side 3022E is nearly vertical. Side 3022F is at a less vertical angle than the plunger walls 3091C to allow the plunger tip 3091B to enter the platen 3022 as the door assembly 3021 is closed.
The plunger 3091 and platen 3022 may include two flat sections 3091A and 3022A which provide a mechanical stop. The flat sections 3091A and 3022A may also be referred to herein as stops 3091A and 3022A. The mechanical stops 3091A, 3022A may improve the reliability and reduce the uncertainty of the volume measurement. As described elsewhere, the volume is determined from the change in plunger 3091 position from the beginning of the displacement stroke to the end of stroke. The stops 3091A and 3022A may remove the uncertainty or tolerance in the bottom of stroke measurement. The profile on the plunger cam 3083 may be designed to lift off the roller 3092, when the flat section 3091A contacts the platen 3022 at 3022A.
The plunger 3091 and platen 3022 may be formed of with a surface that easily slides on an infusion line 3210 material of PVC or Non-DEHP. In one embodiment, the plunger 3091 and platen 3022 may be formed of nylon. In another embodiment, the plunger 3091 and platen 3022 may be metal (e.g. aluminum) that is coated with PTFE. In other embodiments, other plastic may be used or other coatings applied to a metal plunger 3091 and/or platen 3022 that provide a low friction coefficient with a PVC or Non-DEHP infusion line 3210.
The cam shaft 3080 and the cam-follower shaft 3120 are mounted in cut-outs 3005C, 3005D, 3010C, 3010A in the lower and upper housing 3005, 3010 as shown in FIGS. 260, 278. The accuracy of the movements of the valves 3101, 3111 and the plunger 3091 as well as the usage life of the roller elements 3092, 3102, 3112 and cams 3082-3084 are improved by better parallel alignment and correct spacing of the two shafts 3080, 3120. The parallel alignment and spacing of the two shafts 3080, 3120 are controlled in part by the parallel alignment and spacing of the cutouts 3005C, 3005D, 3010C, 3010A. In one embodiment, the two parts of the housing 3005, 3010 are formed without the cutouts (FIGS. 278, 279). The two parts are then mechanically joined and the holes 3006, 3007 are drilled or bored by the same machine in the same setup (FIG. 280) at the same time. In some embodiments, the two housing parts 3005, 3010 include features to hold them in a fixed alignment with one another when assembled. In one example, the housing 3005, 3010 alignment features are pins pressed in one part and matching holes in the other. In another example, features on one part extend across the split line 3008 to engage features on the other part. The operation of accurately boring holes is sometimes referred to as line boring. Line boring may improve the parallel alignment of the cutouts 3005C, 3005D, 3010C, 3010A. The line boring of the cutouts 3005C, 3005D, 3010C, 3010A in the joined housing 3005, 3010 inexpensively creates cutouts 3005C, 3005D, 3010C, 3010A that combine to form more accurately circular holes 3006, 3007 and holes 3006, 3007 that are more parallel one to another.
The measurement of pumped volume is based on the measured position of the plunger 3091. In one embodiment as shown in FIGS. 281, 275, the plunger 3091 position is measured remotely without contacting the plunger 3091 L-shaped cam follower 3090. In one embodiment, the plunger 3091 position is measured with a linear hall effect encoder IC 3002A and a simple two-pole magnet 3096A (FIG. 282). The linear encoder 3002A (FIG. 282) is located on the main PCB 3002 and reports the position of the magnet 3096A located on the plunger 3091 L-shaped cam follower 3090 to the controller. The linear encoder IC 3002A is advantageously mechanically disconnected from the moving components, so the sensor will not wear, degrade or break with use. In one embodiment, the linear encoder IC 3002A is part AS5410 manufactured by Austriamicrosystems of Austria. The AS5410 allows the conversion of a wide range of geometries including curved movements, non-linear scales, and tilted chip/magnet geometries into a linear output signal. The flexibility of the linear encoder IC 3002A allows larger tolerances in the placement of the main PCB 3002 relative to the plunger magnet 3096A. Alternatively, the position of the plunger 3091 may be measured with a vision system that uses edges or datums located on the plunger 3091 L-shaped cam follower 3090. Alternatively, the plunger 3091 position may be measured with any of several sensors well known in the art including a linear potentiometer, a rotary potentiometer, rotary encoder, linear encoder, or LVDT. Methods to mechanically connect one of these sensors to the plunger L-shaped cam follower 3090 may be those apparent to one skilled in the art.
The slide occluder 3200 can be seen in FIG. 261. The slide occluder 3200 serves to pinch the infusion line 3210 closed, blocking flow, when the infusion line 3210 is in the narrow part of the opening 3200D (FIG. 261). Flow is allowed through the infusion line 3210 when it is located in the wide end of the opening 3200C at the front of the slide occluder 3200. The open position on the slide occluder 3200 refers to the infusion line 3210 being located in the wide end of the opening 3200C. The closed position of the slide occluder 3200 refers to the infusion line 3210 being located in the narrow part of the opening 3200D. The slide occluder 3200 includes at least one opening 3200A on the front end of the slide occluder 3200. A tab 3200B is located at the back end of the slide occluder 3200.
The process of closing the door and inserting the slide carriage 3041 to release the slide occluder 3200 is described with reference to FIGS. 283 to 293. FIG. 283 illustrates the slide occluder 3200 fully inserted into the door split carriage 3040 and the infusion line 3210 clipped into the clips 3062A, 3024. The door assembly 3021 will close by rotating about the hinges 3010A. The initial position of the body split carriage 3045 in the pump body 3001 can be seen in FIG. 284. The slot 3045E in the body split carriage 3045 receives the slide occluder 3200 when the door assembly 3021 is closed against the pump body 3001. The opening 3045B in the body split carriage 3045 accommodates the tab 3200B of the slide occluder 3200 allowing the back end of the slide occluder 3200 to enter the body split carriage 3045 and allowing the door assembly 3021 to close. The body split carriage 3045 and/or upper housing 3010 prevent the door assembly 3021 from closing when the slide occluder 3200 has been incorrectly oriented. The side of the body split carriage 3045 opposite the opening 3045B does not provide an opening or slot that could accommodate the tab 3200B on the slide occluder 3200. In one embodiment, the upper housing 3010 includes a rail 3010E that blocks the tab 3200B.
 FIG. 285 illustrates the two part split-carriage assembly 3041 in the open position. Such a position may be reached when the door assembly 3021 is open. FIG. 286 illustrates the two part split-carriage assembly 3041 in the closed position. Such a position may be reached when the door assembly 3021 is closed against the pump body 3001. The axis of the hinge 3040B is approximately in line with the axis of the upper housing 3010 hinge 3010A when the door assembly 3021 is open. The door split carriage 3040 includes at least one slot 3040D that allows it to accommodate at least one tab 3020D on the door 3020 and rail 3010E in the upper housing 3010. In an alternative embodiment shown in FIGS. 262-263, the slot 3040D may accommodate or be guided on tabs 3020D, 3020F. The body split carriage 3045 includes at least one slot 3045D to accommodate rail 3010A on the upper housing 3010 and/or rail 3015E on the sensor housing 3015. The slots 3040D and 3045D allow the split carriage 3041 to slide within the pump body 3001 and door 3020 when the door 3020 is closed against the body 3001.
 FIG. 287 illustrates the peristaltic pump 2990 having L-shaped cam followers 3090, 3100, 3110 with the door 3020 partially closed and some elements removed to reveal the slide occluder 3200 in the closed split-carriage 3041. The door assembly 3021 is closed and the lever 3025 has not begun to engage the body pins 3011. The position of the split carriage 3041 comprising parts 3045 and 3040 is controlled by the position of the lever 3025. The split carriage 3041 is pushed into the pump body 3001 by a rib 3025F as the lever 3025 is closed or rotated toward the pump body 3001. The split carriage 3041 is pulled partially out of the pump body 3001 by the lever link 3035 as the lever 3025 is opened or rotated away from the pump body 3001. The door split carriage 3040 is connected to the lever 3025 via the closed end of the lever link 3035C that fits over the carriage pin 3040A and the open end 3035B holds a pin 3026 that slides in a slotted rib 3025A on the lever 3025. The split carriage's 3041 travel is limited by the length of the slide occluder 3200. The slide occluder 3200 which may not provide sufficient rotation of the lever 3025 to engage the body pins 3011 and compress the infusion line 3210 against the inlet and/or outlet valves 3101, 3111 without inordinate manual force exerted against the lever 3025.
The lever 3025, split carriage 3021 and door assembly 3021 are designed to maintain the occlusion of the infusion line 3210 at all times during the door 3020 opening and closing processes. The infusion line 3210 is occluded by pressing the door 3020 against the body, before the slide occluder 3200 is moved by the split carriage 3041 during closing. In the opening process, the slide occluder 3200 is moved first to block the infusion line 3210 before the door 3020 is disengaged from the body and allows the infusion line 3210 to become decompressed.
The slotted rib 3025A and lever link 3035 allow the lever 3025 to rotate several degrees and begin engaging the body pins 3011 with the latch hooks 3025C without moving the split carriage 3041 when closing the lever 3025. Upon opening, the slotted rib 3025A and lever link 3035 allow the lever 3025 to retract the split carriage 3041 and block the infusion line 3201 before disengaging the body pins 3011 and releasing the infusion line 3210 from the valves 3101, 3111. The lever link 3035 mechanically connects the lever 3025 to the door split carriage 3041 such that the lever 3025 only applies a tension force on the lever link 3035. Limiting the force on the lever link 3035 to tension force removes the need to ensure the lever link 3035 is buckle resistant, allowing the lever link 3035 to be lighter and smaller.
The rotation of the lever 3025 toward the door 3020 and body 3001 compresses the infusion line 3210 between the platen 3022 and the valves 3101, 3111 and plunger 3091, latches the door 3020 shut and moves the slide occluder 3200 to an open position. The lever link 3035 and the slotted rib 3025A and the geometry of the latch hook 3025C assure that the infusion line 3210 is compressed against the valves 3101, 3111 before the slide occluder 3200 is moved to the open position when the lever 3025 is closed. The lever link 3035 and the slotted rib 3025A and the geometry of the latch hook 3025C also assure that the slide occluder 3200 is moved into the closed position before the infusion line 3210 is uncompressed against the valves 3101, 3111 when the lever 3025 is opened. This sequence of blocking flow through the infusion line 3210 with one element before releasing the second element assures that the infusion line 3210 is never in a free-flow state during the loading of the infusion line 3210 in the peristaltic pump 2990.
Alternatively, the door split carriage 3040 may be pulled out of the pump body 3001 by the lever 3025 that is connected to the door split carriage 3040 by two links 3036, 3037 as shown in FIG. 288. The first link 3036 fits over the split carriage pin 3040A and connects to the second link 3037 at hinge 3036A. The second link connects the first link 3036 to the lever 3025 at pivot point 3025G. The two links 3036, 3037 each have a flat 3036B, 3037B that limits the relative rotation of the links 3036, 3037 so that they never cross a center point and always fold toward each other in the same direction. In the pictured embodiment, the links 3036, 3037 can only fold so that their mutual pivot point 3036A moves away from the lever pivot 3025B as the lever 3025 closes. The two links 3036, 3037 allows the lever 3025 to rotate several degrees and begin engaging the body pins 3011 with the latch hooks 3025C and occlude the infusion line 3210 against at least one of the valves 3101, 3111 without moving the split carriage 3041. Once the two links 3036, 3037 have folded closed, the rib 3025F contacts the door split carriage 3040. The rib 3025F pushes the split carriage 3041 into the pump body 3001 as the lever 3025 completes its rotation toward the door assembly 3021.
Upon opening the lever 3025, or rotating the lever 3025 away from the door assembly 3021, the two links 3036, 3037 unfold and only begin to retract the split carriage 3041 after an initial lever 3025 rotation. During the second part of the lever 3025 rotation, the split carriage 3041 withdraws from the pump body 3001 and moves slide occluder 3200, which blocks the infusion line 3210 before disengaging the body pins 3011 and releasing the infusion line 3210 from the valves 3101, 3111. The infusion line 3210 is uncompressed during the third portion of the lever 3025 rotation.
Alternatively, the two links 3036, 3037 could be replaced with a flexible cable or wire, which pulls the split carriage 3041 out of the pump body 3001. The flexible cable may be attached to the door split carriage 3040 and to a fixed point on the lever 3025. The split carriage 3041 is pushed into the pump body 3001 by the rib 3025F as the lever 3025 rotates toward the pump body 3001.
 FIG. 274 illustrates the peristaltic pump 2990 having L-shaped cam followers 3090, 3100, 3110. The door 3020 is closed and the lever 3025 latched as shown in FIG. 289. The split carriage 3041 has been partially slid through the door 3020 and into the body 3001. The movement of the split carriage 3041 moves the slide occluder 3200 into the pump body 3001, while the infusion line 3210 is held in position. The movement of the slide occluder 3200 relative to the infusion line 3210 moves the infusion line 3210 into the wide end 3200C of the slide occluder 3200 allowing flow through the infusion line 3210.
 FIGS. 290-293 illustrate four steps of closing the door 3020 of the peristaltic pump 2990 having L-shaped cam followers 3090, 3100, 3110. In FIG. 290, the door assembly 3021 is open and the infusion line 3210 and slide occluder 3200 are installed. In FIG. 291, the door assembly 3021 is closed, the lever 3025 is open and the split carriage 3041 is fully retracted, so the infusion line 3210 is blocked by the slide occluder 3200. In FIG. 292, the lever 3025 is partially rotated toward the body 3001 to a point where the split carriage 3041 has not moved and the slide occluder 3200 blocks the infusion line, but the latch hooks 3025C have engaged the body pins 3011 and compressed the infusion line 3210 between the door assembly 3021 and at least one of the valves 3101, 3111. In FIG. 293, the lever 3025 is fully rotated toward the pump body 3001 or closed. In FIG. 293, the slide carriage 3041 is fully inserted into the pump body 3001, so that the infusion line 3210 is unblocked by the slide occluder 3200 and the door 3021 is fully preloaded against the pump body 3001 including at least one of the valves 3101, 3111.
 FIGS. 294-298 illustrate the elements of the door assembly 3021 and pump body 3001 and lever 3025 that together latch the door 3020 closed, and position the door assembly 3021 parallel to the face of the upper-housing 3010 and compress the infusion line 3210 between the platen 3022 and at least one of the valves 3101, 3111 and plunger 3091. The door assembly 3021 is positioned and pressed against the upper housing 3010 without placing a load on the hinge pin 3012 or requiring close tolerance on hinge pin 3012 and pivot holes 3020J, 3010F.
As described above and pictured in FIGS. 283, 287 the two latch hooks 3025C engage the body pins 3011, which are mounted in the upper housing 3010 tabs 3010B, when the door assembly 3021 has been rotated to contact the upper housing 3012 and the lever 3025 is rotated toward the door 3020. The latch hooks 3025C have tapered openings to assure engagement for a broader range of initial positions between the door assembly 3021 (FIG. 257) and the upper housing 3010 (FIG. 258). The opening in the latch hook 3025C is shaped to pull the latch pin 3034 (FIG. 299) closer to the body pin 3011 as the lever 3025 (FIG. 257) is rotated. The latch pin 3034 (FIG. 299) is free to move within the door 3020 along slots 3020C as the latch pin 3034 moves toward the body pin 3011 (FIG. 294). The slot structure 3020C on the top of the door 3020 in FIG. 294 is repeated toward the bottom of the door 3020 in FIG. 295, where the second latch 3025C engages the latch pin 3034.
In FIG. 298, the movement of the latch pin 3034 toward the upper housing 3010 deflects the door spring 3032 that is supported by the door 3020 at each end of the door spring 3032A. The deflection of the door spring 3032 generates a force that is applied to the door 3020 and directed toward the upper housing 3010 and the pump body 3001. The pump body 3010 includes protrusions or standoffs 3025H that contact the face of the upper housing 3010 in three or more places distributed around the valves 3101, 3111 and plunger 3091 (FIG. 260). In one embodiment, the standoffs 3025H are also positioned within and equal distance to the contact area between the door spring 3032 and the door 3020 so that the spring force is equally distributed to each standoff 3025H. In one embodiment as shown in FIG. 296, four standoffs 3020H are located around the platen 3022, near where the valves 3101, 3111 (FIG. 260) contact the infusion line 3210. The pivot holes 3020 in the door 3020 are slightly oversized for the hinge pin 3012 (FIG. 295), which allows the door 3020 to rest on the standoffs 3025H without being constrained by the hinge pin 3012.
 FIG. 297 shows the cross-section through the latch pin and includes the latches 3025C fully engaging body pins 3011. In one embodiment, the body pins 3011 include a plain bearing 3011A to reduce wear and friction. The plain bearing 3011A is tube of hard material that can rotate on the body pin 3011 to reduce wear on the latch hooks 3025C. The latch pin 3034 passes through the lever pivot holes 3025B and is free to move in the slots 3020C and deflect the door spring 3032. In FIG. 297, the plunger 3091 is in a position to compress the infusion line 3210 against the platen 3022. The force of the deflected door spring 3032 supplies the force to compress the infusion line 3210 from the platen 3022 side, while the plunger elastic element 3094 (FIG. 267) supplies the force on the plunger 3091 side.
 FIG. 298 shows the cross section across the middle of the door spring 3032 and perpendicular to the latch pin 3034. The deflection of the door spring 3032 is evident between the latch pin 3034 and an edge 3020F at each end of the door spring 3032 and of the spring cutout 3020G. FIG. 296 presents an embodiment where the standoffs 3020H are located between and equal distant to the locations where the door spring 3032 contacts the door 3020.
In one embodiment shown in FIG. 299-300, one of the latch hooks 3025C may comprise detents 3025G, 3025J and a spring pin 3027 or ball to engage the detents 3025G, 3025J. FIG. 299 illustrates the lever 3025 fully closed against the door 3020. The latch hook 3025C includes a first detent 3025G that is engaged by a spring pin 3027. The spring pin 3027 is mounted in the door 3020 at such a position that it engages the first detent 3025G when lever 3025 is closed.
 FIG. 300 illustrates the lever 3025 fully opened relative to door 3020 and the door split carriage 3040 retracted. The spring pin 3027 engages a second detent 3025J when the door 3020 is in the fully open position. In some embodiments, the detents 3025G, 3025J in the latch hooks 3025C may allow the lever 3025 to hold one or more positions relative to the door 3020.
 FIG. 301 illustrates a detection lever 3150 displaced by the slide occluder 3200, when the door assembly 3021 and the lever 3025 (FIG. 265) are fully are closed. The detection lever 3150 rotates on a pin 3151 that is attached to the upper housing 3010 and swings through a slot 3045F (FIG. 285) in the body split carriage 3045. If a slide occluder 3200 is present in the split carriage 3041 when the door 3020 is closed, the slide occluder 3200 will deflect the detection lever 3150 upward toward the main PCB 3002. A sensor 3152 on the main PCB 3002 will detect the nearness of a magnet 3150A on the detection lever 3150. The detection lever 3150, magnet 3150A and sensor 3152 may be designed to only detect a specific slide occluder 3200 geometry. Other slide occluders 3200 or slide occluder 3200 shapes may not deflect the detection lever 3150 enough for the sensor 3152 to detect the magnet 3150A or cause the detection lever 3150 to contact the main PCB 3002 and prevent the full insertion of the split carriage 3041 and closing of the lever 3025. A controller may only allow peristaltic pump 2990 operation when the sensor 3152 detects the displaced detection lever 3150 indicating that the appropriate slide occluder 3200 is present.
 FIG. 302 illustrates a latch hook detection slide 3160 displaced by the latch hook 3025C, when the door assembly 3021 and the lever 3025 are fully closed. The latch hook detection slide 3160 includes one or more slots 3160A that guide it past screws or posts on mounted in the upper housing 3010. A spring 3164 returns latch hook detection slide 3160 to a non-displaced position, when the latch hook 3025C is engaging the body pin 3011. The latch hook detection slide 3160 includes at least one magnet that is located so that a sensor 3163 mounted on the main PCB 3001 will detect it presence only when the detection slide 3160 is fully displaced. In one embodiment, the latch hook detection slide 3160 may include a second magnet 3162 that is detected by the sensor 3163 only when the latch hook detection slide 3160 is fully retracted. A controller may only allow peristaltic pump 2990 operation when the sensor 3163 detects the displaced latch hook detection slide 3160 indicating that the lever 3025 is fully closed.
 FIGS. 303-310 show various views related to a system 3200. FIG. 303 shows a system 3200 that includes several pumps 3201, 3202, and 3203. The pumps 3201, 3202, 3203 can be coupled together to form a group of pumps that are connectable to a pole 3208. The system 3200 includes two syringe pumps 3201, 3202 and a peristaltic pump 3203; however, other combinations of various medical devices may be employed.
Each of the pumps 3201, 3202, 3203 includes a touch screen 3204 which may be used to control the pumps 3201, 3202, 3203. One of the pumps' (e.g., 3201, 3202, 3203) touch screens 3204 may also be used to coordinate operation of all of the pumps 3201, 3202, 3203 and/or to control the one or more of the other pumps 3201, 3202, 3203.
The pumps 3201, 3202, and 3203 are daisy chained together such that they are in electrical communication with each other. Additionally or alternatively, the pumps 3201, 3202, and/or 3203 may share power with each other or among each other. For example, one of the pumps 3201, 3202, and/or 3203 may include an AC/DC converter that converts AC electrical power to DC power suitable to power the other pumps 3201, 3202, 3203.
Within the system 3200, the pumps 3201, 3202, and 3203 are stacked together using respective Z-frames 3207. Each of the Z-frames 3207 includes a lower portion 3206 and an upper portion 3205. A lower portion 3206 of one Z-frame 3207 (e.g., the lower portion 3206 of the pump 3201) can engage an upper portion 3205 of another Z-frame 3207 (e.g., the upper portion 3205 of the Z-frame 3207 of the pump 3202).
A clamp 3209 may be coupled to one of the pumps 3201, 3202, 3203 (e.g., the pump 3202 as shown in FIG. 304). That is, the clamp 3209 may be coupled to any one of the pumps 3201, 3202, and/or 3203. The clamp 3209 is attachable to the back of any one of the pumps 3201, 3202, and/or 3203. As is easily seen in FIG. 306, each of the pumps 3201, 3202, 3203 includes an upper attachment member 3210 and a lower attachment member 3211. A clamp adapter 3212 facilitates the attachment of the clamp 3209 to the pump 3202 via a respective pump's (e.g., 3201, 3202, or 3203) upper attachment member 3210 and lower attachment member 3211. In some embodiments, the clamp adapter 3212 may be integral with the clamp 3209.
 FIG. 307 shows a close-up view of a portion of an interface of a clamp (i.e., the clamp adapter 3212) that is attachable to the pump 3202 (or to pumps 3201 or 3203) shown in FIGS. 304-306 in accordance with an embodiment of the present disclosure. The clamp adapter 3212 includes a hole 3213 in which a lower attachment member 3211 (see FIG. 306) may be attached. That is, the lower attachment member 3211, a curved hook-like protrusion, may be inserted into the hole 3213 and thereafter rotated to secure the lower attachment member 3211 therein.
As is easily seen in FIG. 308, the clamp adapter 3212 also includes a latch 3214. The latch 3214 is pivotally mounted to the clamp adapter 3212 via pivots 3216. The latch 3214 may be spring biased via springs 3218 that are coupled to the hooks 3220. The stop members 3219 prevent the latch 3214 from pivoting beyond a predetermined amount. After the hole 3213 is positioned on the lower attachment member 3211, the clamp adapter 3212 may be rotated to bring the latch 3214 towards the upper attachment member 3210 such that the latch 3214 is compressed down by the upper attachment member 3210 until the protrusion 3215 snaps into a complementary space of the upper attachment member 3210. The hooks 3220 help secure the clamp adapter 3212 to the pump 3202.
Each of the Z-frames 3207 for each of the pumps 3201, 3202, 3203 includes a recessed portion 3223 on its upper portion 3205 (see FIG. 306) and each pump 3201, 3202, 3203 includes a protrusion 3224 (see FIG. 309). A protrusion 3224 of one pumps (e.g., pumps 3201, 3202, or 3203) may engage a recessed portion 3223 of another Z-frame to enable the pumps 3201, 3202, 3203 to be stacked on top of each other. Each of the pumps 3201, 3202, 3203 includes a latch engagement member 3221 that allows another one of the pumps 3201, 3202, 3203 to be attached thereto via a latch 3222 (see FIG. 309). The latch 3222 may include a small spring loaded flange that can âsnapâ into the space formed under the latch engagement member 3221. The latch 3222 may be pivotally coupled to the lower portion 3206 of the Z-frame 3207.
As is seen FIG. 304, the latch 3222 of the Z-frame of pump 3201 may be pulled to withdraw a portion of the latch 3222 out of the space under the latch engagement member 3221 of the pump 3202. Thereafter, the pump 3201 may be rotated to pull the protrusion 3224 of the pump 3201 out of the recessed portion 3223 of the Z-frame of pump 3202 such that the pump 3201 may be removed from the stack of pumps 3202, 3203 (see FIG. 305).
Each of the pumps 3201, 3202, 3203 includes a top connector 3225 (see FIG. 310) and a bottom connector 3226 (see FIG. 309). The connectors 3225 and 3226 allow the stacked pumps 3201, 3202, and 3203 to communication between each other and/or to provide power to each other. For example, if the battery of the middle pump 3202 (see FIG. 303) fails, then the top pump 3201 and/or the bottom pump 3203 may provide power to the middle pump 3202 as a reserve while one or more of the pumps 3201, 3202, 3203 is audibly alarming.
An example embodiment of the graphic user interface (hereafter GUI) 3300 is shown in FIG. 311. The GUI 3300 enables a user to modify the way that an agent may be infused by customizing various programming options. For purposes of example, the GUI 3300 detailed as follows uses a screen 3204 which is a touch screen as a means of interaction with a user. In other embodiments, the means of interaction with a user may be different. For instance, alternate embodiments may comprise user depressible buttons or rotatable dials, audible commands, etc. In other embodiments, the screen 3204 may be any electronic visual display such as a, liquid crystal display, L.E.D. display, plasma display, etc.
As detailed in the preceding paragraph, the GUI 3300 is displayed on the screen of the pumps 3203. All of the pumps 3201, 3202, 3203 may have their own individual screen 3204 as shown in FIGS. 303-305. In arrangements where one of the pumps 3201, 3202, 3203 is being used to control all of the pumps 3201, 3202, 3203, only the master pump may require a screen 3204. As shown, the pump is seated in a Z-frame 3207. As shown, the GUI 3300 may display a number of interface fields 3250. The interface fields 3250 may display various information about the pump or infusion status, the medication, etc. In some embodiments, the interface fields 3250 on the GUI 3300 may be touched, tapped, etc. to navigate to different menus, expand an interface field 3250, input data, and the like. The interface fields 3250 displayed on the GUI 3300 may change from menu to menu.
The GUI 3300 may also have a number of virtual buttons. In the non-limiting example embodiment in FIG. 311 the display has a virtual power button 3260, a virtual start button 3262, and a virtual stop button 3264. The virtual power button 3260 may turn the pump 3201, 3202, 3203 on or off. The virtual start button 3262 may start an infusion. The virtual stop button 3264 may pause or stop an infusion. The virtual buttons may be activated by a user's touch, tap, double tap, or the like. Different menus of the GUI 3300 may comprise other virtual buttons. The virtual buttons may be skeuomorphic to make their functions more immediately understandable or recognizable. For example, the virtual stop button 3264 may resemble a stop sign as shown in FIG. 305. In alternate embodiments, the names, shapes, functions, number, etc. of the virtual buttons may differ.
As shown in the example embodiment in FIG. 312, the interface fields 3250 of the GUI 3300 (see FIG. 311) may display a number of different programming parameter input fields. For the GUI 3300 to display the parameter input fields, a user may be required to navigate through one or a number of menus. Additionally, it may be necessary for the user to enter a password before the user may manipulate any of the parameter input fields.
In FIG. 312, a medication parameter input field 3302, in container drug amount parameter input field 3304, total volume in container parameter input field 3306, concentration parameter input field 3308, dose parameter input field 3310, volume flow rate (hereafter abbreviated as rate) parameter input field 3312, volume to be infused (hereafter VTBI) parameter input field 3314, and time parameter input field 3316 are displayed. The parameters, number of parameters, names of the parameters, etc. may differ in alternate embodiments. In the example embodiment, the parameter input fields are graphically displayed boxes which are substantially rectangular with rounded corners. In other embodiments, the shape and size of the parameter input fields may differ.
In the example embodiment, the GUI 3300 is designed to be intuitive and flexible. A user may choose to populate a combination of parameter input fields which are simplest or most convenient for the user. In some embodiments, the parameter input fields left vacant by the user may be calculated automatically and displayed by the GUI 3300 as long as the vacant fields do not operate independent of populated parameter input fields and enough information can be gleaned from the populated fields to calculate the vacant field or fields. Throughout FIGS. 312-316 fields dependent upon on another are tied together by curved double-tipped arrows.
The medication parameter input field 3302 may be the parameter input field in which a user sets the type of infusate agent to be infused. In the example embodiment, the medication parameter input field 3302 has been populated and the infusate agent has been defined as â0.9% NORMAL SALINEâ. As shown, after the specific infusate has been set, the GUI 3300 may populate the medication parameter input field 3302 by displaying the name of the specific infusate in the medication parameter input field 3302.
To set the specific infusate agent to be infused, a user may touch the medication parameter input field 3302 on the GUI 3300. In some embodiments, this may cull up a list of different possible infusates. The user may browse through the list until the desired infusate is located. In other embodiments, touching the in medication parameter input field 3302 may cull up a virtual keyboard. The user may then type the correct infusate on the virtual keyboard. In some embodiments, the user may only need to type only a few letters of the infusate on the virtual keyboard before the GUI 3300 displays a number of suggestions. For example, after typing âNOREâ the GUI 3300 may suggest âNOREPINEPHRINEâ. After locating the correct infusate, the user may be required to perform an action such as, but not limited to, tapping, double tapping, or touching and dragging the infusate. After the required action has been completed by the user, the infusate may be displayed by the GUI 3300 in the medication parameter input field 3302. For another detailed description of another example means of infusate selection see FIG. 322.
In the example embodiment in FIG. 312, the parameter input fields have been arranged by a user to perform a volume based infusion (for instance mL, mL/hr, etc.). Consequentially, the in container drug amount parameter input field 3304 and total volume in container parameter input field 3306 have been left unpopulated. The concentration parameter input field 3308 and dose parameter input field 3310 have also been left unpopulated. In some embodiments, the in container drug amount parameter input field 3304, total volume in container parameter input field 3306, concentration parameter input field 3308, and dose parameter input field 3310 may be locked, grayed out, or not displayed on the GUI 3300 when such an infusion has been selected. The in container drug amount parameter input field 3304, total volume in container parameter input field 3306, concentration parameter input field 3308, and dose parameter input field 3310 will be further elaborated upon in subsequent paragraphs.
When the GUI 3300 is being used to program a volume base infusion, the rate parameter input field 3312, VTBI parameter input field 3314, and time parameter input field 3316 do not operate independent of one another. A user may only be required to define any two of the rate parameter input field 3312, VTBI parameter input field 3314, and time parameter input field 3316. The two parameters defined by a user may be the most convenient parameters for a user to set. The parameter left vacant by the user may be calculated automatically and displayed by the GUI 3300. For instance, if a user populates the rate parameter input field 3312 with a value of 125 mL/hr (as shown), and populates the VTBI parameter input field 3314 with a value of 1000 mL (as shown) the time parameter input field 3316 value may be calculated by dividing the value in the VTBI parameter input field 3314 by the value in the rate parameter input field 3312. In the example embodiment shown in FIG. 312, the quotient of the above calculation, 8 hrs and 0 min, is correctly populated by the GUI 3300 into the time parameter input field 3316.
For a user to populate the rate parameter input field 3312, VTBI parameter input field 3314, and time parameter input field 3316 the user may touch or tap the desired parameter input field on the GUI 3300. In some embodiments, this may cull up a number pad with a range or number, such as 0-9 displayed as individual selectable virtual buttons. A user may be required to input the parameter by individually tapping, double tapping, touching and dragging, etc. the desired numbers. Once the desired value has been input by a user, a user may be required to tap, double tap, etc. a virtual âconfirmâ, âenterâ, etc. button to populate the field. For another detailed description of another example way of defining numerical values see FIG. 322.
 FIG. 313 shows a scenario in which the infusion parameters being programmed are not those of a volume based infusion. In FIG. 313, the infusion profile is that of a continuous volume/time dose rate. In the example embodiment shown in FIG. 313, all of the parameter input fields have been populated. As shown, the medication parameter input field 3302 on the GUI 3300 has been populated with âHEPARINâ as the defined infusate. As shown, the in container drug amount parameter input field 3304, total volume in container input field 3306, and concentration parameter input field 3308 are populated in FIG. 313. Additionally, since a volume/time infusion is being programmed the dose parameter input field 3310 shown in FIG. 312 has been replaced with a dose rate parameter input field 3318.
The in container drug amount parameter input field 3304 is a two part field in the example embodiment shown in FIG. 313. In the example embodiment in FIG. 313 the left field of the in container drug amount parameter input field 3304 is a field which may be populated with a numeric value. The numeric value may defined by the user in the same manner as a user may define values in the rate parameter input field 3312, VTBI parameter input field 3314, and time parameter input field 3316. In the example embodiment shown in FIG. 313, the numeric value displayed by the GUI 3300 in the in left field of the in container drug amount parameter input field 3304 is â25,000â.
The parameter defined by the right field of the in container drug amount parameter input field 3304 is the unit of measure. To define the right of the in container drug amount parameter input field 3304, a user may touch the in container drug amount parameter input field 3304 on the GUI 3300. In some embodiments, this may cull up a list of acceptable possible units of measure. In such embodiments, the desired unit of measure may be defined by a user in the same manner as a user may define the correct infusate. In other embodiments, touching the in container drug amount parameter input field 3304 may cull up a virtual keyboard. The user may then type the correct unit of measure on the virtual keyboard. In some embodiments the user may be required to tap, double tap, etc. a virtual âconfirmâ, âenterâ, etc. button to populate the left field of the in container drug amount parameter input field 3304.
In some embodiments, including the embodiment shown in FIG. 313, the right field of the in container drug amount parameter input field 3304 may have one or more acceptable values with may be dependent on the parameter input into one or more other parameter input fields. In the example embodiment, the meaning of the unit of measure âUNITSâ may differ depending on the infusate set in the medication parameter input field. The GUI 3300 may also automatically convert the value and unit of measure in respectively the left field and right field of the in container drug amount parameter input field 3304 to a metric equivalent if a user inputs a non-metric unit of measure in the right field of the in container drug amount parameter input field 3304.
The total volume in container parameter input field 3306 may be populated by a numeric value which defines the total volume of a container. In some embodiments, the GUI 3300 may automatically populate the total volume in container parameter input field 3306 based on data generated by one or more sensors. In other embodiments, the total volume in container parameter input field 3306 may be manually input by a user. The numeric value may defined by the user in the same manner as a user may define values in the rate parameter input field 3312, VTBI parameter input field 3314, and time parameter input field 3316. In the example embodiment shown in FIG. 313 the total volume in container parameter input field 3306 has been populated with the value â250â mL. The total volume in container parameter input field 3306 may be restricted to a unit of measure such as mL as shown.
The concentration parameter input field 3308 is a two part field similar to the in container drug amount parameter input field 3304. In the example embodiment in FIG. 313 the left field of the concentration parameter input field 3308 is a field which may be populated with a numeric value. The numeric value may defined by the user in the same manner as a user may define values in the rate parameter input field 3312, VTBI parameter input field 3314, and time parameter input field 3316. In the example embodiment shown in FIG. 313, the numeric value displayed by the GUI 3300 in the in left field of the concentration parameter input field 3308 is â100â.
The parameter defined by the right field of the concentration parameter input field 3308 is a unit of measure/volume. To define the right field of the concentration parameter input field 3308, a user may touch the concentration parameter input field 3308 on the GUI 3300. In some embodiments, this may cull up a list of acceptable possible units of measure. In such embodiments, the desired unit of measure may be defined by a user in the same manner as a user may define the correct infusate. In other embodiments, touching the concentration parameter input field 3308 may cull up a virtual keyboard. The user may then type the correct unit of measure on the virtual keyboard. In some embodiments the user may be required to tap, double tap, etc. a virtual âconfirmâ, âenterâ, etc. button to store the selection and move on to a list of acceptable volume measurements. The desired volume measurement may be defined by a user in the same manner as a user may define the correct infusate. In the example embodiment shown in FIG. 313 the right field of the concentration parameter input field 3308 is populated with the unit of measure/volume âUNITS/mLâ.
The in container drug amount parameter input field 3304, total volume in container input field 3306, and concentration parameter input field 3308 are not independent of one another. As such, a user may only be required to define any two of the in container drug amount parameter input field 3304, total volume in container input field 3306, and concentration parameter input field 3308. For instance, if a user were to populate the concentration parameter input field 3308 and the total volume in container parameter input field 3306, the in container drug amount parameter input field may be automatically calculated and populated on the GUI 3300.
Since the GUI 3300 in FIG. 313 is being programmed for a continuous volume/time dose, the dose rate parameter input field 3318 has been populated. The user may define the rate at which the infusate is infused by populating the dose rate parameter input field 3318. In the example embodiment in FIG. 313, the dose rate parameter input field 3318 is a two part field similar to the in container drug amount parameter input field 3304 and concentration parameter input field 3308 described above. A numeric value may defined in the left field of the dose rate parameter input field 3318 by the user in the same manner as a user may define values in the rate parameter input field 3312. In the example embodiment in FIG. 313, the left field of the dose rate parameter input field 3318 has been populated with the value â1000â.
The right field of the dose rate parameter input field 3318 may define a unit of measure/time. To define the right field of the dose rate parameter input field 3318, a user may touch the dose rate parameter input field 3318 on the GUI 3300. In some embodiments, this may cull up a list of acceptable possible units of measure. In such embodiments, the desired unit of measure may be defined by a user in the same manner as a user may define the correct infusate. In other embodiments, touching the dose rate parameter input field 3304 may cull up a virtual keyboard. The user may then type the correct unit of measure on the virtual keyboard. In some embodiments the user may be required to tap, double tap, etc. a virtual âconfirmâ, âenterâ, etc. button to store the selection and move on to a list of acceptable time measurements. The desired time measurement may be defined by a user in the same manner as a user may define the correct infusate. In the example embodiment shown in FIG. 313 the right field of the dose rate parameter input field 3318 is populated with the unit of measure/time âUNITS/hrâ.
In the example embodiment, the dose rate parameter input field 3318 and the rate parameter input field 3312 are not independent of one another. After a user populates the dose rate parameter input field 3318 or the rate parameter input field 3312, the parameter input field left vacant by the user may be calculated automatically and displayed by the GUI 3300 as long as the concentration parameter input field 3308 has been defined. In the example embodiment shown in FIG. 313, the rate parameter input field 3312 has been populated with an infusate flow rate of â10 mL/hrâ. The dose rate parameter input field 3318 has been populated with â1000â âUNITS/hrâ.
In the example embodiment shown in FIG. 313 the VTBI parameter input field 3314 and time parameter input field 3316 have also been populated. The VTBI parameter input field 3314 and time parameter input field 3316 may be populated by a user in the same manner described in relation to FIG. 306. When the GUI 3300 is being programmed to a continuous volume/time dose rate infusion, the VTBI parameter input field 3314 and the time parameter input field 3316 are dependent on one another. A user may only need to populate one of the VTBI parameter input field 3314 or the time parameter input field 3316. The field left vacant by the user may be calculated automatically and displayed on the GUI 3300.
 FIG. 314 shows a scenario in which the infusion parameters being programmed are those of a drug amount based infusion herein referred to as an intermittent infusion. In the example embodiment shown in FIG. 314, all of the parameter input fields have been populated. As shown, the medication parameter input field 3302 on the GUI 3300 has been populated with the antibiotic âVANCOMYCINâ as the defined infusate.
As shown, the in container drug amount parameter input field 3304, total volume in container input field 3306, and concentration parameter input field 3308 are laid out the same as in FIG. 314. In the example embodiment in FIG. 308, the left field of the in container drug amount parameter input field 3304 has been populated with â1â. The right field of the in container drug amount parameter input field 3304 has been populated with âgâ. Thus the total amount of Vancomycin in the container has been defined as one gram. The total volume in container parameter input field 3306 has been populated with â250â ml. The left field of the concentration parameter input field 3308 has been populated with â4.0â. The right field of the concentration parameter input field has been populated with âmg/mLâ.
As mentioned in relation to other possible types of infusions which a user may be capable of programming through the GUI 3300, the in container drug amount parameter input field 3304, total volume in container input field 3306, and concentration parameter input field 3308 are dependent upon each other. As above, this is indicated by the curved double arrows connecting the parameter input field names. By populating any two of these parameters, the third parameter may be automatically calculated and displayed on the correct parameter input field on the GUI 3300.
In the example embodiment in FIG. 314, the dose parameter input field 3310 has been populated. As shown, the dose parameter input field 3310 comprises a right and left field. A numeric value may defined in the right field of the dose parameter input field 3310 by the user in the same manner as a user may define values for other parameter input fields which define numeric values. In the example embodiment in FIG. 314, the left field of the dose parameter input field 3310 has been populated with the value â1000â.
The right field of the dose parameter input field 3310 may define a unit of mass measurement. To define the right field of the dose parameter input field 3310, a user may touch the dose parameter input field 3310 on the GUI 3300. In some embodiments, this may cull up a list of acceptable possible units of measure. In such embodiments, the desired unit of measure may be defined by a user in the same manner as a user may define the correct infusate. In other embodiments, touching the dose parameter input field 3310 may cull up a virtual keyboard. The user may then type the correct unit of measure on the virtual keyboard. In some embodiments the user may be required to tap, double tap, slide, etc. a virtual âconfirmâ, âenterâ, etc. button to store the selection and move on to a list of acceptable mass measurements. The desired mass measurement may be defined by a user in the same manner as a user may define the correct infusate. In the example embodiment shown in FIG. 314 the right field of the dose parameter input field 3310 is populated with the unit of measurement âmgâ.
As shown, the rate parameter input field 3312, VTBI parameter input field 3314, and the time parameter input field 3316 have been populated. As shown, the rate parameter input field 3312 has been populated with â125â mL/hr. The VTBI parameter input field 3314 has been defined as â250â mL. The time parameter input field 3316 has been defined as â2â hrs â00â min.
The user may not need to individually define each of the dose parameter input field 3310, rate parameter input field 3312, VTBI parameter input field 3314, and the time parameter input field 3316. As indicated by the curved double arrows, the dose parameter input field 3310 and the VTBI parameter input field 3314 are dependent upon each other. Input of one value may allow the other value to be automatically calculated and displayed by the GUI 3300. The rate parameter input field 3312 and the time parameter input field 3316 are also dependent upon each other. The user may need to only define one value and then allow the non-defined value to be automatically calculated and displayed on the GUI 3300. In some embodiments, the rate parameter input field 3312, VTBI parameter input field 3314, and the time parameter input field 3316 may be locked on the GUI 3300 until the in container drug amount parameter input field 3304, total volume in container parameter input field 3306 and concentration parameter input field 3308 have been defined. These fields may be locked because automatic calculation of the rate parameter input field 3312, VTBI parameter input field 3314, and the time parameter input field 3316 is dependent upon values in the in container drug amount parameter input field 3304, total volume in container parameter input field 3306 and concentration parameter input field 3308.
In scenarios where an infusate may require a body weight based dosage, a weight parameter input field 3320 may also be displayed on the GUI 3300. The example GUI 3300 shown on FIG. 315 has been arranged such that a user may program a body weight based dosage. The parameter input fields may be defined by a user as detailed in the above discussion. In the example embodiment, the infusate in the medication parameter input field 3302 has been defined as âDOPAMINEâ. The left field of the in container drug amount parameter input field 3304 has been defined as â400â. The right field of the in container drug amount parameter input field 3304 has been defined as âmgâ. The total volume in container parameter input field 3306 has been defined as â250â ml. The left field of the concentration parameter input field 3308 has been defined as â1.6â. The right field of the concentration parameter input field 3308 has been defined as âmg/mLâ. The weight parameter input field 3320 has been defined as â90â kg. The left field of the dose rater parameter input field 3318 has been defined as â5.0â. The right field of the dose rate parameter input field 3318 has been defined as âmcg/kg/minâ. The rate parameter input field 3312 has been defined as â16.9â mL/hr. The VTBI parameter input field 3314 has been defined as â250â mL. The time parameter input field 3316 has been defined as â14â hrs â48â min.
To define the weight parameter input field 3320, a user may touch or tap the weight parameter input field 3320 on the GUI 3300. In some embodiments, this may cull up a number pad with a range of numbers, such as 0-9 displayed as individual selectable virtual buttons. A user may be required to input the parameter by individually tapping, double tapping, touching and dragging, etc. the desired numbers. Once the desired value has been input by a user, a user may be required to tap, double tap, etc. a virtual âconfirmâ, âenterâ, etc. button to populate the field.
As indicated by the curved double arrows, some parameter input fields displayed on the GUI 3300 may be dependent upon each other. As in previous examples, the in container drug amount parameter input field 3304, total volume in container parameter input field 3306, and concentration parameter input field 3308 may be dependent upon each other. In FIG. 315, the weight parameter input field 3320, dose rater parameter input field 3318, rate parameter input field 3312, VTBI parameter input field 3314, and the time parameter input field 3316 are all dependent upon each other. When enough information has been defined by the user in these parameter input fields, the parameter input fields not populated by the user may be automatically calculated and displayed on the GUI 3300.
In some embodiments, a user may be required to define a specific parameter input field even if enough information has been defined to automatically calculate the field. This may improve safety of use by presenting more opportunities for user input errors to be caught. If a value entered by a user is not compatible with already defined values, the GUI 3300 may display an alert or alarm message soliciting the user to double check values that the user has entered.
In some scenarios the delivery of infusate may be informed by the body surface area (BSA) of a patient. In FIG. 316, the GUI 3300 has been set up for a body surface area based infusion. As shown, a BSA parameter input field 3322 may be displayed on the GUI 3300. The parameter input fields may be defined by a user as detailed in the above discussion. In the example embodiment, the infusate in the medication parameter input field 3302 has been defined as âFLUOROURACILâ. The left field of the in container drug amount parameter input field 3304 has been defined as â1700â. The right field of the in container drug amount parameter input field 3304 has been defined as âmgâ. The total volume in container parameter input field 3306 has been defined as â500â ml. The left field of the concentration parameter input field 3308 has been defined as â3.4â. The right field of the concentration parameter input field 3308 has been defined as âmg/mLâ. The BSA parameter input field 3320 has been defined as â1.7â m2. The left field of the dose rate parameter input field 3318 has been defined as â1000â. The right field of the dose rate parameter input field 3318 has been defined as âmg/m2/dayâ. The rate parameter input field 3312 has been defined as â20.8â mL/hr. The VTBI parameter input field 3314 has been defined as â500â mL. The time parameter input field 3316 has been defined as â24â hrs â00â min. The dependent parameter input fields are the same as in FIG. 309 with the exception that the BSA parameter input field 3322 has taken the place of the weight parameter input field 3320.
To populate the BSA parameter input field 3322, the user may touch or tap the BSA parameter input field 3322 on the GUI 3300. In some embodiments, this may cull up a number pad with a range of numbers, such as 0-9 displayed as individual selectable virtual buttons. In some embodiments, the number pad and any of the number pads detailed above may also feature symbols such as a decimal point. A user may be required to input the parameter by individually tapping, double tapping, touching and dragging, etc. the desired numbers. Once the desired value has been input by a user, a user may be required to tap, double tap, etc. a virtual âconfirmâ, âenterâ, etc. button to populate the field.
In some embodiments, a patient's BSA may be automatically calculated and displayed on the GUI 3300. In such embodiments, the GUI 3300 may query the user for information about the patient when a user touches, taps, etc. the BSA parameter input field 3322. For example, the user may be asked to define a patient's height and body weight. After the user defines these values they may be run through a suitable formula to find the patient's BSA. The calculated BSA may then be used to populate the BSA parameter input field 3322 on the GUI 3300.
In operation, the values displayed in the parameter input fields may change throughout the course of a programmed infusion to reflect the current state of the infusion. For example, as the infusate is infused to a patient, the values displayed by the GUI 3300 in the in container drug amount parameter input field 3304 and total volume in container parameter input field 3306 may decline to reflect the volume of the remaining contents of the container. Additionally, the values in the VTBI parameter input field 3314 and time parameter input field 3316 may also decline as infusate is infused to the patient.
 FIG. 317 is an example rate over time graph detailing the one behavioral configuration of a pump 3201, 3202, 3203 (see FIG. 303) over the course of an infusion. The graph in FIG. 317 details an example behavioral configuration of a pump 3201, 3202, 3203 where the infusion is a continuous infusion (an infusion with a dose rate). As shown, the graph in FIG. 317 begins at the initiation of infusion. As shown, the infusion is administered at a constant rate for a period of time. As the infusion progresses, the amount of infusate remaining is depleted. When the amount of infusate remaining reaches a pre-determined threshold, an âINFUSION NEAR END ALERTâ may be triggered. The âINFUSION NEAR END ALERTâ may be in the form of a message on the GUI 3300 and may be accompanied by flashing lights, and audible noises such as a series of beeps. The âINFUSION NEAR END ALERTâ allows time for the care giver and pharmacy to prepare materials to continue the infusion if necessary. As shown, the infusion rate may not change over the âINFUSION NEAR END ALERT TIMEâ.
When the pump 3201, 3202, 3203 (see FIG. 303) has infused the VTBI to a patient a âVTBI ZERO ALERTâ may be triggered. The âVTBI ZERO ALERTâ may be in the form of a message on the GUI 3300 and may be accompanied by flashing lights and audible noises such as beeps. As shown, the âVTBI ZERO ALERTâ causes the pump to switch to a keep-vein-open (hereafter KVO) rate until a new infusate container may be put in place. The KVO rate is a low infusion rate (for example 5-25 mL/hr). The rate is set to keep the infusion site patent until a new infusion may be started. The KVO rate is configurable by the group (elaborated upon later) or medication and can be modified on the pump 3201, 3202, 3203. The KVO rate is not allowed to exceed the continuous infusion rate. When the KVO rate can no longer be sustained and air reaches the pumping channel an âAIR-IN-LINE ALERTâ may be triggered. When the âAIR-IN-LINE-ALERTâ is triggered, all infusion may stop. The âAIR-IN-LINE ALERTâ may be in the form of a message on the GUI 3300 and may be accompanied by flashing lights and audible noises such as beeps.
 FIG. 318 shows another example rate over time graph detailing one behavioral configuration of a pump 3201, 3202, 3203 (see FIG. 303) over the course of an infusion. The graph in FIG. 318 details an example behavioral configuration of a pump 3201, 3202, 3203 where the infusion is a continuous infusion (an infusion with a dose rate). The alerts in the graph shown in FIG. 318 are the same as the alerts shown in the graph in FIG. 317. The conditions which propagate the alerts are also the same. The rate, however, remains constant throughout the entire graph until the âAIR-IN-LINE ALERTâ is triggered and the infusion is stopped. Configuring the pump to continue infusion at a constant rate may be desirable in situations where the infusate is a drug with a short half-life. By continuing infusion at a constant rate, it is ensured that the blood plasma concentration of the drug remains at therapeutically effective levels.
The pump 3201, 3202, 3203 (see FIG. 303) may also be used to deliver a primary or secondary intermittent infusion. During an intermittent infusion, an amount of a drug (dose) is administered to a patient as opposed to a continuous infusion where the drug is given at a specified dose rate (amount/time). An intermittent infusion is also delivered over a defined period of time, however, the time period and dose are independent of one another. The previously described FIG. 313 shows a setup of the GUI 3300 for a continuous infusion. The previously described FIG. 314 shows a setup of the GUI 3300 for an intermittent infusion.
 FIG. 319 is an example rate over time graph detailing the one behavioral configuration of a pump 3201, 3202, 3203 (see FIG. 303) over the course of an intermittent infusion. As shown, the intermittent infusion is given at a constant rate until all infusate programmed for the intermittent infusion has been depleted. In the example behavioral configuration, the pump 3201, 3202, 3203 has been programmed to issue a âVTBI ZERO ALERTâ and stop the infusion when all the infusate has been dispensed. In this configuration, the user may be required to manually clear the alert before another infusion may be started or resumed.
Other configurations may cause a pump 3201, 3202, 3203 (see FIG. 303) to behave differently. For example, in scenarios where the intermittent infusion is a secondary infusion, the pump 3201, 3202, 3203 may be configured to communicate with its companion pumps 3201, 3202, 3203 and automatically switch back to the primary infusion after issuing a notification that the secondary intermittent infusion has been completed. In alternate configurations, the pump may be configured issue a âVTBI ZERO ALERTâ and drop the infusion rate to a KVO rate after completing the intermittent infusion. In such configurations, the user may be required to manually clear the alert before a primary infusion is resumed.
A bolus may also be delivered as a primary intermittent infusion when it may be necessary or desirable to achieve a higher blood plasma drug concentration or manifest a more immediate therapeutic effect. In such cases, the bolus may be delivered by the pump 3201, 3202, 3203 (see FIG. 303) executing the primary infusion. The bolus may be delivered from the same container which the primary infusion is being delivery from. A bolus may be performed at any point during an infusion providing there is enough infusate to deliver the bolus. Any volume delivered via a bolus to a patient is included in the value displayed by the VTBI parameter input field 3314 of the primary infusion.
Depending on the infusate, a user may be forbidden from performing a bolus. The dosage of a bolus may be pre-set depending on the specific infusate being used. Additionally, the period of time over which the bolus occurs may be pre-defined depending on the infusate being used. In some embodiments, a user may be capable of adjusting these pre-sets by adjusting various setting on the GUI 3300. In some situations, such as those where the drug being infused has a long half-life (vancomycin, teicoplanin, etc.), a bolus may be given as a loading dose to more quickly reach a therapeutically effective blood plasma drug concentration.
 FIG. 320 shows another rate over time graph in which the flow rate of the infusate has been titrated to ârampâ the patient up on the infusate. Titration is often used with drugs which register a fast therapeutic effect, but have a short half life (such as norepinephrine). When titrating, the user may adjust the delivery rate of the infusate until the desired therapeutic effect is manifested. Every adjustment may be checked against a series of limits defined for the specific infusate being administered to the patient. If an infusion is changed by more than a predefined percentage, an alert may be issued. In the exemplary graph shown in FIG. 320, the rate has been up-titrated once. If necessary, the rate may be up-titrated more than one time. Additionally, in cases where titration is being used to âweanâ a patient off of a drug, the rate may be down-titrated any suitable number of times.
 FIG. 321 is another rate over time graph in which the infusion has been configured as a multi-step infusion. A multi-step infusion may be programmed in a number of different steps. Each step may be defined by a VTBI, time, and a dose rate. Multi-step infusions may be useful for certain types of infusates such as those used for parenteral nutrition applications. In the example graph shown in FIG. 321, the infusion has been configured as a five step infusion. The first step infuses a âVTBI 1â for a length of time, âTime 1â, at a constant rate, âRate 1â. When the time interval for the first step has elapsed, the pump moves on to the second step of the multi-step infusion. The second step infuses a âVTBI 2â for a length of time, âTime 2â, at a constant rate, âRate 2â. As shown, âRate 2â is higher than âRate 1â. When the time interval for the second step has elapsed, the pump moves on to the third step of the multi-step infusion. The third step infuses a âVTBI 3â for a length of time, âTime 3â, at a constant rate, âRate 3â. As shown âRate 3â is the highest rate of any steps in the multi-step infusion. âTime 3â is also the longest duration of any step of the multi-step infusion. When the time interval for the third step has elapsed, the pump move on to the fourth step of the multi-step infusion. The fourth step infuses a âVTBI 4â for a length of time, âTime 4â, at a constant rate, âRate 4â. As shown, âRate 4â has been down-titrated from âRate 3â. âRate 4â is approximately the same as âRate 2â. When the time interval for the fourth step of the multi-step infusion has elapsed, the pump move on to the fifth step. The fifth step infuses a âVTBI 5â for a length of time, âTime 5â, at a constant rate, âRate 5â. As shown, âRate 5â has been down-titrated from âRate 4â and is approximately the same as âRate 1â.
The âINFUSION NEAR END ALERTâ is triggered during the fourth step of the example infusion shown in FIG. 321. At the end of the fifth and final step of the multi-step infusion, the âVTBI ZERO ALERTâ is triggered. In the example configuration shown in the graph in FIG. 321, the rate is dropped to a KVO rate after the multi-step infusion has been concluded and the âVTBI ZERO ALERTâ has been issued. Other configurations may differ.
Each rate change in a multi-step infusion may be handled in a variety of different ways. In some configurations, the pump 3201, 3202, 3203 (see FIG. 303) may display a notification and automatically adjust the rate to move on to the next step. In other configurations, the pump 3201, 3202, 3203 may issue an alert before changing the rate and wait for confirmation from the user before adjusting the rate and moving on to the next step. In such configurations, the pump 3201, 3202, 3203 may stop the infusion or drop to a KVO rate until user confirmation has been received.
In some embodiments, the user may be capable of pre-programming infusions. The user may pre-program an infusion to automatically being after a fixed interval of time has elapsed (e.g. 2 hours). The infusion may also be programmed to automatically being at a specific time of day (e.g. 12:30 pm). In some embodiments, the user may be capable of programming the pump 3201, 3202, 3203 (see FIG. 303) to alert the user with a callback function when it is time to being the pre-programmed infusion. The user may need to confirm the start of the pre-programmed infusion. The callback function may be a series of audible beeps, flashing lights, or the like.
In arrangements where there are more than one pump 3201, 3202, 3203 (see FIG. 303), the user may be able to program a relay infusion. The relay infusion may be programmed such that after a first pump 3201, 3202, 3203 has completed its infusion, a second pump 3201, 3202, 3203 may automatically being a second infusion and so on. The user may also program a relay infusion such that the user is alerted via the callback function before the relay occurs. In such a programmed arrangement, the relay infusion may not being until confirmation from a user has been received. A pump 3201, 3202, 3203 may continue at a KVO rate until user confirmation has been received.
 FIG. 322 shows an example block diagram of a âDrug Administration Libraryâ. In the upper right hand corner there is a box which is substantially rectangular, though its edges are rounded. The box is associated with the name âGeneral Settingsâ. The âGeneral Settingsâ may include settings which would be common to all devices in a facility such as, site name (e.g. XZY Hospital), language, common passwords, and the like.
In FIG. 322, the âDrug Administration Libraryâ has two boxes which are associated with the names âGroup Settings (ICU)â and âGroup Settingsâ. These boxes form the headings for their own columns. These boxes may be used to define a group within a facility (e.g. pediatric intensive care unit, emergency room, sub-acute care, etc.) in which the device is stationed. Groups may also be areas outside a parent facility, for example, a patient's home or an inter-hospital transport such as an ambulance. Each group may be used to set specific settings for various groups within a facility (weight, titration limits, etc.). These groups may alternatively be defined in other manners. For example, the groups may be defined by user training level. The group may be defined by a prior designated individual or any of a number of prior designated individuals and changed if the associated patient or device is moved from one specific group within a facility to another.
In the example embodiment, the left column is âGroup Settings (ICU)â which indicates that the peristaltic pump 2990 is stationed in the intensive care unit of the facility. The right column is âGroup Settingsâ and has not been further defined. In some embodiments, this column may be used to designate a sub group, for example operator training level. As indicated by lines extending to the box off to the left of the block diagram from the âGroup settings (ICU)â and âGroup Settingsâ columns, the settings for these groups may include a preset number of default settings.
The group settings may include limits on patient weight, limits on patient BSA, air alarm sensitivity, occlusion sensitivity, default KVO rates, VTBI limits, etc. The group settings may also include parameters such as whether or not a review of a programmed infusion is necessary for high risk infusates, whether the user must identify themselves before initiating an infusion, whether the user must enter a text comment after a limit has been overridden, etc. A user may also define the defaults for various attributes like screen brightness, or speaker volume. In some embodiments, a user may be capable of programming the screen to automatically adjust screen brightness in relation to one or more conditions such as but not limited to time of day.
As also shown to the left of the block diagram in FIG. 322, each facility may have a âMaster Medication Listâ defining all of the infusates which may be used in the facility. The âMaster Medication Listâ may comprise a number of medications which a qualified individual may update or maintain. In the example embodiment, the âMaster Medication Listâ only has three medications: Heparin, 0.9% Normal Saline, and Alteplase. Each group within a facility may have its own list of medications used in the group. In the example embodiment, the âGroup Medication List (ICU)â only includes a single medication, Heparin.
As shown, each medication may be associated with one or a number of clinical uses. In FIG. 322 the âClinical Use Recordsâ are defined for each medication in a group medication list and appear as an expanded sub-heading for each infusate. The clinical uses may be used to tailor limits and pre-defined settings for each clinical use of the infusate. For Heparin, weight based dosing and non-weight based dosing are shown in FIG. 322 as possible clinical uses. In some embodiments, there may be a âClinical Use Recordâ setting requiring the user to review or re-enter a patient's weight (or BSA) before beginning an infusion.
Clinical uses may also be defined for the different medical uses of each infusate (e.g. stroke, heart attack, etc.) instead of or in addition to the infusate's dose mode. The clinical use may also be used to define whether the infusate is given as a primary continuous infusion, primary intermittent infusion, secondary infusion, etc. They may also be use to provide appropriate limits on the dose, rate, VTBI, time duration, etc. Clinical uses may also provide titration change limits, the availability of boluses, the availability of loading doses, and many other infusion specific parameters. In some embodiments, it may be necessary to provide at least one clinical use for each infusate in the group medication list.
Each clinical use may additionally comprise another expanded sub-heading in which the concentration may also be defined. In some cases, there may be more than one possible concentration of an infusate. In the example embodiment in FIG. 322, the weight base dosing clinical use has a 400 mg/250 mL concentration and an 800 mg/250 mL concentration. The non-weight based dosing clinical use only has one concentration, 400 mg/mL. The concentrations may also be used to define an acceptable range for instances where the user may customize the concentration of the infusate. The concentration setting may include information on the drug concentration (as shown), the diluents volume, or other related information.
In some embodiments, the user may navigate to the âDrug Administration Libraryâ to populate some of the parameter input fields shown in FIGS. 312-316. The user may also navigate to the âDrug Administration Libraryâ to choose from the clinical uses for each infusate what type of infusion the peristaltic pump 2990 will administer. For example, if a user were to select weight based Heparin dosing on FIG. 322, the GUI 3300 might display the infusion programming screen shown on FIG. 315 with âHeparinâ populated into the medication parameter input field 3302. Selecting a clinical use of a drug may also prompt a user to select a drug concentration. This concentration may then be used to populate the concentration parameter input field 3308 (see FIGS. 312-316). In some embodiments, the âDrug Administration Libraryâ may be updated and maintained external to the peristaltic pump 2990 and communicated to the peristaltic pump 2990 via any suitable means. In such embodiments, the âDrug Administration Libraryâ may not be changeable on the peristaltic pump 2990 but may only place limits and/or constraints on programming options for a user populating the parameter input fields shown in FIG. 312-316.
As mentioned above, by choosing a medication and clinical use from the group medication list, a user may also be setting limits on other parameter input fields for infusion programming screens. For example, by defining a medication in the âDrug Administration Libraryâ a user may also be defining limits for the dose parameter input field 3310, dose rate parameter input field 3318, rate parameter input field 3312, VTBI parameter input field 3314, time parameter input field 3316, etc. These limits may be pre-defined for each clinical use of an infusate prior to the programming of an infusion by a user. In some embodiments, limits may have both a soft limit and a hard limit with the hard limit being the ceiling for the soft limit. In some embodiments, the group settings may include limits for all of the medications available to the group. In such cases, clinical use limits may be defined to further tailor the group limits for each clinical usage of a particular medication.
Exemplary Battery and Speaker Test
 FIG. 323 shows a circuit diagram 13420 having a speaker 3615 and a battery 3420 in accordance with an embodiment of the present disclosure. The battery 3420 may be a backup battery 3450 (FIG. 325A) and/or the speaker 3615 may be a backup alarm speaker 3468 (FIG. 325B). That is, the circuit 13420 may be a backup alarm circuit, for example, a backup alarm circuit in a medical device, such as a peristaltic pump 2900.
In some embodiments of the present disclosure, the battery 3420 may be tested simultaneously with the speaker 3615. When a switch 13422 is in an open position, a voltmeter 13425 may be used to measure the open circuit voltage of the battery 3420. Thereafter, the switch 13422 may be closed and the closed-circuit voltage from the battery 3420 may be measured. The internal resistance of the battery 3420 may be estimated by using the known impedance, Z, of the speaker 3615. A processor may be used to estimate the internal resistance of the battery 3420 (e.g., a processor of a peristaltic pump 2900). The processor may correlate the internal resistance of the battery 3420 to the battery's 3420 health. In some embodiments of the present disclosure, if the closed-circuit voltage of the battery 3420 is not within a predetermined range (the range may be a function of the open-circuit voltage of the battery 3420), the speaker 3615 may be determined to have failed.
In some additional embodiments of the present disclosure, the switch 13422 may be modulated such that the speaker 3615 is tested simultaneously with the battery 3420. A microphone 3617 may be used to determine if the speaker 3615 is audibly broadcasting a signal within predetermined operating parameters (e.g., volume, frequency, spectral compositions, etc.) and/or the internal impedance of the battery 3420 may be estimated to determine if it is within predetermined operating parameters (e.g., the complex impedance, for example). The microphone 3617 (FIG. 325C) may be coupled to the processor. Additionally or alternatively, a test signal may be applied to the speaker 3615 (e.g., by modulating the switch 13422) and the speaker's 3615 current waveform may be monitored by an current sensor 13426 to determine the total harmonic distortion of the speaker 3615 and/or the magnitude of the current; a processor may be monitored these values using the current sensor 13426 to determine if a fault condition exists within the speaker 3615 (e.g., the total harmonic distortion or the magnitude of the current are not within predetermined ranges).
Various sine waves, periodic waveforms, and/or signals may be applied to the speaker 3615 to measure its impedance and/or to measure the impedance of the battery 3420. For example, a processor of a peristaltic pump 2900 disclosed herein may modulate the switch 13422 and measure the voltage across the battery 3420 to determine if the battery 3420 and the speaker 3615 has an impedance within predetermined ranges; if the estimated impedance of the battery 3420 is outside a first range, the processor may determine that the battery 3420 is in a fault condition, and/or if the estimated impedance of the speaker 3615 is outside a second range, the processor may determine that the speaker 3615 is in a fault condition. Additionally or alternatively, if the processor cannot determine if the battery 3420 or the speaker 3615 has a fault condition, but has determined that at least one exists in a fault condition, the processor may issue an alert or alarm that the circuit 13420 is in a fault condition. The processor may alarm or alert a user or a remote server of the fault condition. In some embodiments of the present disclosure, the peristaltic pump 2990 will not operate until the fault is addressed, mitigated and/or corrected.
Electrical System
The electrical system 4000 of the peristaltic pump 2990 is described in a block schematic in FIGS. 324, 325A-325G. The electrical system 4000 controls the operation of the peristaltic pump 2990 based on inputs from the user interface 3700 and sensors 3501. The electrical system 4000 may be a power system comprised of a rechargeable main battery 3420 and battery charging 3422 that plugs into the AC mains. The electrical system 4000 may be architected to provide safe operation with redundant safety checks, and allow the peristaltic pump 2990 to operate in fail operative modes for some errors and fail safe for the rest.
The high level architecture of multiple processors is shown in FIG. 324. In one example, the electrical system 4000 is comprised of two main processors, a real time processor 3500 and a User Interface and Safety Processor 3600. The electrical system may also comprise a watch-dog circuit 3460, motor control elements 3431, sensors 3501 and input/output elements. One main processor, referred to as the Real Time Processor (RTP) 3500 may controls the speed and position of the motor 3072 that actuates the plunger 3091, and valves 3101,3111. The RTP 3500 controls the motor 3072 based on input from the sensors 3501 and commands from the User Interface & Safety processor (UIP) 3600. The UIP 3600 may manage telecommunications, manage the user interface 3701, and provide safety checks on the RTP 3500. The UIP 3600 estimates the volume pumped based on the output of a motor encoder 3438 and may signal an alarm or alert when the estimated volume differs by more than a specified amount from a desired volume or the volume reported by the RTP 3500. The watch dog circuit 3460 monitors the functioning of the RTP 3500. If the RTP 3500 fails to clear the watch dog 3460 on schedule, the watch dog 3460 may disable the motor controller, sound an alarm and turn on failure lights at the user interface 3701. The sensor 3130 may measure the rotational position of the cam shaft 3080 and the plunger 3901. The RTP 3500 may use the sensor inputs to control the motor 3072 position and speed in a closed-loop controller as described below. The telecommunications may include a WIFI driver and antenna to communicate with a central computer or accessories, a bluetooth driver and antenna to communicate with accessories, tablets, cell-phones etc. and a Near Field Communication (NFC) driver and antenna for RFID tasks and a bluetooth. In FIG. 324 these components are collectively referred to with the reference number 3721. The user interface 3701 may include a display, a touch screen and one or more buttons to communicate with the user.
The detailed electrical connections and components of the electrical system 4000 are shown in FIG. 325A-325G. The sensors 3130, 3530, 3525, 3520 and part of the RTP 3500 are shown in FIG. 325A. The sensors monitoring the peristaltic pump 2990 that are connected to the RTP 3500 may comprise the rotary position sensor 3130 monitoring the cam shaft position and two linear encoders 3520, 3525 that measure the position of the plunger 3091 as shown. One linear encoder 3520 measures the position of the magnet (3096A in FIG. 268) upstream side of the plunger 3091. The other linear encoder 3525 measures the position of the magnet (3096A in FIG. 268) on the downstream side of the plunger 3091. In another embodiment, the position of the plunger may be measured with a single magnet and linear encoder. Alternatively, RTP 3500 may use output of only one linear encoder if the other fails. A thermistor 3540 provides a signal to the RTP 3500 indicative of the infusion line 3210 temperature. Alternatively the thermistor 3540 may measure a temperature in the peristaltic pump 2990.
As shown, the electrical system 4000 defines specific part numbers for various components. For example, the thermistor 3540 is defined as a â2X SEMITEC 103JT-050 ADMIN Set THERMISTORâ These part numbers should not be construed as limiting in any way whatsoever. In different embodiments, suitable replacement components may be used in place of the specific parts listed in the FIGS. 325A-325G. For example the thermistor 3540 may not be a â2X SEMITEC 103JT-050 ADMIN Set THERMISTORâ, but rather any suitable replacement thermistor 3540. In some embodiments, the electrical system 4000 may comprise additional components. In some embodiments the electrical system 4000 may comprises fewer components than the number of components shown in FIGS. 325A-325G 
The two infusion line sensors located downstream of the peristaltic pump 2990, an air-in-line sensor 3545 and an occlusion sensor 3535 may be connected to the RTP 3500. An air-in-line sensor 3545 detects the presence of air in the section of infusion line 3210 near the air-in-line sensor 3545. In one example, the air-in-line sensor 3545 may comprise an ultra-sonic sensor 3545B, a logic unit 3545A and a signal conditioning unit 3545C.
The occlusion sensor 3535 measures the internal pressure of fluid in the infusion line 3535. In an example embodiment, the occlusion sensor 3535 may comprise a force sensor 3535B, a current excitation IC 3535A, a signal amplifier 3535C and a data buffer 3535D. The data buffer chip 3535D may protect the RTP 3500 from over-voltages due to high forces form pressures applied to the force sensor 3535B.
The watchdog circuit 3460 is shown in FIGS. 325A-325C. The watch dog circuit is enabled by an I2C command from the RTP 3500. The watch dog circuit 3460 may signal an error and disable the motor control 3430 if it does not receive a signal from the RTP 3500 at a specified frequency. The watch dog circuit 3460 may signal the user via an audible alarm. The audible alarm may be issued via an amplifier 3464 and/or backup speaker 3468. The watch dog circuit 3460 may signal the user with visual alarm LEDs 3750 (shown in FIG. 325D). In one embodiment, the RTP 3500 must âclearâ the watch dog circuit 3460 between 10 ms and 200 ms after the watch dog circuit's last clear. In one embodiment, the watch dog circuit 3460 is comprised of a window watchdog 3450A, a logic circuit 3460B including one or more flip-flop switches and an IO expander 3460C that communicates with the RTP 3500 over an I2C bus. A backup battery 3450 provides power to the watchdog circuit 3460 and backup speaker system (which may comprise an audio amplifier 3464, and a backup speaker 3468) in case the main battery 3420 fails. The backup battery 3450 provides power to the RTP 3500 and UIP 3600 to maintain the internal timekeeping, which may be especially desirable when the main battery 3420 is changed. The RTP 3500 may also monitor the voltage of the backup battery 3450 with a switch such as the âFAIRCHILD FPF1005 LOAD SWITCHâ 3452 shown in FIG. 325A.
The RTP 3500 directly controls the speed and position of the motor 3072 which controls the position and speed of the plunger and valves. The motor 3072 may be any of a number of types of motors including a brushed DC motor, a stepper motor or a brushless DC motor. In the embodiment illustrated in FIGS. 325-325G, the peristaltic pump 2990 is driven by a brushless direct current (BLDC) servo motor 3072 where the rotary position sensor 3130 measures the position of the cam-shaft. In one example embodiment, the RTP 3500 receives the signals from the hall-sensors 3436 of a brushless DC motor 3072 and does the calculations to commutate power to the windings of the motor 3072 to achieve a desired speed or position. The commutation signals are sent to the motor driver 3430 which selectively connects the windings to the motor power supply 3434. The motor 3072 is monitored for damaging or dangerous operation via current sensors 3432 and a temperature sensor 3072 a.  
The signals from the hall sensors 3436 may be supplied to both the RTP 3500 and to an encoder 3438. In one embodiment, three hall sensor signals are generated. Any two of the three hall signals are sent to the encoder 3438. The encoder 3438 may use these signals to provide a position signal to the UIP 3600. The UIP 3600 estimates the total volume of fluid dispensed by the peristaltic pump 2990 by interpreting the position signal of the encoder 3438. The UIP 3600 estimates the total volume by multiplying the number of complete cam-shaft revolutions times a given stroke volume. The total volume estimate of the UIP 3600 assumes each plunger stroke supplies the given amount of fluid. The amount of fluid supplied per stroke is determined empirically during development and stored in memory. Alternatively, each peristaltic pump 2990 may be calibrated during assembly to establish the nominal volume/stroke that may be stored in memory. The UIP 3600 estimated volume may then be compared at regular intervals to the expected volume from the commanded therapy. In some embodiments, the interval between comparisons may be shorter for specific infusates, for example short-half life infusates. The therapy may specify, among other parameters, a flow rate, a duration, or a total volume to be infused (VTBI). In any case, the expected volume for a programmed therapy at a given time during that therapy may be calculated and compared to the volume estimated by the UIP 3600. The UIP 3600 may signal an alert if the difference between UIP 3600 estimated volume and the therapy expected volume is outside a predefined threshold. The UIP 3600 may signal an alarm if the difference between UIP 3600 estimated volume and the therapy expected volume is outside of another predefined threshold.
The UIP 3600 may also compare the estimated volume to the volume reported by the RTP 3500. The UIP 3600 may signal an alert if the difference between UIP 3600 estimated volume and the RTP 3500 reported volume is outside a predefined threshold. The UIP 3600 may signal an alarm if the difference between UIP 3600 estimated volume and the RTP 3500 reported volume is outside a second threshold.
In some embodiments, the UIP 3600 may compare the RTP 3500 reported volume to therapy expected volume and signal an alert if the two values differ by more than a predefined threshold. The UIP 3600 may signal an alarm if the difference between the RTP 3500 reported volume and the therapy expected volume differ by more than a predefined threshold. The values of the alert and alarm thresholds may be different for comparisons between different sets of volumes including the UIP 3600 estimated volume, the RTP 3500 calculated volume and the therapy expected volume. The thresholds may be stored memory. The thresholds may vary depending on a number of other parameters, such as but not limited to, medication, medication concentration, therapy type, clinical usage, patient or location. The thresholds may be included in the DERS database and downloaded from the device gateway server.
The slide clamp or slide occluder sensor 3152 and the door sensor 3162 communicate with both the RTP 3500 and the UIP 3600 as shown in FIGS. 325B, 325F. In one embodiment the sensors are magnetic null sensors that change state when for example the slide occluder 3200 is detected or the door latch hook 3025C engages the pump body. The RTP 3500 or the UIP 3600 may enable the motor power supply 3434 only while the processors receive signals indicating that the slide occluder 3200 is in place and the door assembly 3021 is properly closed.
An RFID tag 3670 (FIG. 325C) may be connected by an I2C bus to the UIP 3600 and to a near field antenna 3955. The RFID tag 3670 may be used by med-techs or other users or personnel to acquire or store information when the peristaltic pump 2990 is in an unpowered state. The UIP 3600 may store service logs or error codes in the RFID tag 3670 that can be accessed by an RFID reader. A med-tech, for example, could inspect unpowered peristaltic pumps 2990 in storage or evaluate non-functioning peristaltic pumps 2990 by using an RFID reader to interrogate the RFID tag 3670. In another example, a med-tech may perform service on the peristaltic pump 2990 and store the related service information in the RFID tag 3670. The UIP 3600 may then pull the latest service information from the RFID tag 3670 and store it in memory 3605.
The main battery 3420 may supply all the power to the peristaltic pump 2990. The main battery 3420 is connected via a system power gating element 3424 to the motor power supply 3434. All of the sensors and processors may be powered by one of the several voltage regulators 3428. The main battery 3420 is charged from AC power via a battery charger 3422 and an AC/DC converter 3426. The UIP 3600 may be connected to one or more memory chips 3605.
The UIP 3600 controls the main audio system which comprise a main speaker 3615 and the audio-chips 3610, 3612. The main audio system may be capable of producing a range of sounds indicating, for example, alerts and alarms. The audio system may also provide confirmatory sounds to facilitate and improve user interaction with the touch screen 3755 and display 3725. The main audio system may include a microphone 3617 that may be used to confirm the operation of the main speaker 3615 as well as the backup speaker 3468. The main audio system may produce one or more tones, modulation sequences and/or patterns of sound and the audio codec chip 3610 may compare the signal received from the microphone 3617 to the signal sent to the main speaker 3615. The use of one or more tones and comparison of signals may allow the system to confirm main speaker 3615 function independently of ambient noise. Alternatively the UIP 3600 or the audio codec 3610 may confirm that the microphone 3617 produced a signal at the same time a signal was sent to the speaker amplifier 3612.
The UIP 3600 may provide a range of different wireless signals for different uses. The UIP 3600 may communicate with the hospital wireless network via a dual band wifi using chips 3621, 3620 and 3622 and antennas 3720, 3722. The spatially diverse dual antenna may be desirable because it may be capable of overcoming dead spots within a room due to multiple paths and cancellation. A hospital device gateway may communicate DERS (Drug Error Reduction System), CQI (Continuous Quality Imporvement), prescriptions, etc. to the peristaltic pump 2990 via the wifi system.
The bluetooth system, using the same chips 3621, 3620 and 3622 and antennas 3720, 3722, provides a convenient method to connect auxiliaries to the peristaltic pump 2990 that may include pulse-oximeters, blood pressure readers, bar-code readers, tablets, phones, etc. The bluetooth may include version 4.0 to allow low power auxiliaries which may communicate with the peristaltic pump 2990 periodically such as, for example, a continuous glucose meter that sends an update once a minute.
The NFC system is comprised of an NFC controller 3624 and an antenna 3724. The controller 3624 may also be referred to as an RFID reader. The NFC system may be used to read RFID chips identifying drugs or other inventory information. The RFID tags may also be used to identify patients and caregivers. The NFC controller 3624 may also interact with a similar RFID reader on, for example, a phone or tablet computer to input information including prescriptions, bar-code information, patient, care-giver identities, etc. The NFC controller 3624 may also provide information to the phone or tablet computers such as the peristaltic pump 2990 history or service conditions. The RFID antennas 3720 and 3722 or NFC antenna 3724 may preferably be located around or near the display screen, so all interaction with the pump occurs on or near the screen face whether reading an RFID tag or interacting with the display touch screen 3725, 3735.
The UIP 3600 may include a medical grade connector 3665 so that other medical devices may plug into the peristaltic pump 2990 and provide additional capabilities. The connector 3665 may implement a USB interface.
The display 3700 includes the antennas 3720, 3722, 3725, the touch screen 3735, LED indicator lights 3747 and three buttons 3760, 3765, 3767. The display 3700 may include a backlight 3727 and an ambient light sensor 3740 to allow the screen brightness to automatically respond to ambient light. The first button 3760 may be the âPowerâ button, while another button 3765 may be an infusion stop button. These buttons 3760, 3765, 3767 may not provide direct control of the peristaltic pump 2990, but rather provide a signal to the UIP 3600 to either initiate or terminate infusion. The third button 3767 will silence the alarm at the main speaker and at the secondary speaker. Silencing the alarm will not clear the fault, but will end the audible alarm. The electric system 4000 described above, or an alternative embodiment of the electrical system 4000 described above, may be used with any of peristaltic pumps with linear position sensors.
Controls
The pumping algorithms provide substantially uniform flow by varying the rotation speed of the motor 3072 over a complete revolution. At low flows, the motor 3072 turns at a relatively high rate of speed during portions of the revolution when the plunger 3091 is not moving fluid toward the patient. At higher flow rates, the motor 3072 turns at a nearly constant speed throughout the revolution to minimize power consumption. At the high flow rates, the motor 3072 rotation rate is proportional to the desired the flow rate. The pump algorithm use linear encoders 3520, 3525 (FIG. 325A) above the plunger 3091 to measure volume of fluid pumped toward the patient. The pump algorithm use linear encoders 3520, 3525 (FIG. 325A) above the plunger 3091, the rotation encoder 3130 (FIG. 325A) near the cam-shaft 3080 and the air-in-line sensor 3545 downstream of the plunger 3091 to detect one or more of the following conditions: downstream occlusions, upstream occlusions/empty bag, leaks and the amount of air directed toward the patient.
One embodiment of the valve 3101, 3111 openings and plunger 3091 position is plotted in FIG. 326. Three time periods are identified in FIG. 326 including a refill 826, pressurization 835 and deliver 840 period. In addition, period âAâ occurs between the pressurization period 835 and Delivery period 840, and period âBâ occurs between the Delivery period 840 and Refill period 830. The inlet valve position 820, outlet valve position 825 and plunger position 815 are plotted on a sensor signal over cam angle graph over a complete cam shaft 3080 rotation.
The refill period 830 occurs while the inlet valve 820 is held off the infusion line 3210 and the plunger 3091 is lifted off the infusion line 3210 by the plunger cam 3083. The refill period 830 ends and the pressurization period 835 begins as the inlet valve 3101 is closing. The plunger cam 3083 is full retracted during the pressurization period 835 to allow the plunger 3091 to land on the filled infusion line 3210. The pressurization period 835 ends several cam angle degrees past the point where the plunger cam 3083 reaches its minimum value. After a waiting period âAâ, the plunger cam 3083 lifts until it reaches the height where the plunger 3091 is expected to be. The delivery period 840 begins when the outlet valve 3111 starts to open and lasts until the outlet valve 3111 closes again. The plunger cam 3083 rotates causing the plunger 3091 to descend during the delivery period 840 pushing fluid toward the patient.
The RTP 3500 may determine the volume of fluid delivered toward the patient for each stroke based on signals from the rotary encoder 3130 measuring the angle of the camshaft 3080 and from the linear encoder 3525, 3520 measurements plunger 3091 position. The volume of each stroke may be measured by subtracting the height of the plunger 3091 at the end of the delivery period 840 from the height of the plunger 3091 at the end of pressurization period 835. The height of the plunger 3091 may be determined from signals of one or both of the linear encoders 3020, 3025, where the height approximates the distance of the plunger tip 3091B from the platen 3022. The end of the delivery period 840 and the end of the pressurization period 835 may be determined from the rotary encoder 3130 measuring the angle of the crank shaft. The measured height difference 845 may be empirically associated with pumped volumes and the result stored in a lookup table or in memory in the controller. The volume vs. stroke table may be determined during development and be programmed into each peristaltic pump 2990 during manufacture. Alternatively, the measured change in plunger 3091 height may be calibrated to pumped volume for each peristaltic pump 2990 or pumping mechanism 3000 during the manufacturing process.
In one embodiment, the pumped volume is calibrated plunger 3091 positions as:

V i =A+B*(h P âh D)

where Vi is the pumped volume, A and B are fitting coefficients, hP is the plunger 3091 position at the end of the pressurization period 835 and hD is the plunger 3091 position at the end of the delivery period 840.

The speed of the motor 3072 varies with the flow rate and it varies over a single revolution for lower flow rates. In one example, the motor 3072 rotation is relatively constant for commanded flow rates above approximately 750 ml/hr. The motor 3072 speed is controlled to relatively slower speeds during intake and deliver flow rates for commanded flow rates below approximately 750 ml/hr.
The motor 3072 moves at a constant speed during the pressurization period 835 for all pumping rates. In one example the motor 3072 turns at the speed required to deliver fluid at the highest flow rate. In one example the motor 3072 turns at 800Â°/second during the pressurization period 835, which corresponds to the peristaltic pump 2990 to delivering 1200 mL/Hr. Running the motor 3072 at a fixed high speed during the pressurization period 835 may advantageously minimize no-flow periods which improve uniformity of fluid flow. Running the motor 3072 at a fixed high speed during the pressurization period 835 may advantageously create a consistent measurement of the filled infusion line 3210 height by compressing the plastic walls of the infusion line 3210 at the same rate each time. Not being limited to a single theory, one theory holds that the plastic infusion line 3210 continues to yield after being compressed, which would produce a lower height for the filled infusion line 3210 the longer the time between compression and measurement. The plastic may exhibit visco-elastic properties so that the amount of strain in the plastic changes with the rate of compression, which in turn would change the measured height of the plastic infusion line 3210.
Low Flow Mode
The pumping algorithm to produce a desired flow rate may control motor 3072 speed differently during the refill and delivery periods 830,840 for relatively lower flow rates as compared to higher flow.
In the low flow mode the motor 3072 is controlled during the delivery period 840 to control the cam-shaft 3080 position in order to produce a predefined volume trajectory. The volume trajectory is the volume of fluid delivered to the patient verses time. The predefined volume trajectory usually occurs over many cam-shaft 3080 rotations, so that the delivery period 840 must deliver a full revolution's worth of fluid at the trajectory speed in the shorter delivery period 840.
The motor 3072 speed during the refill period 830 is adjusted to produce a full infusion line 3210 as measured at the plunger 3091 position at the end of the pressurization period 835. The controller will slow the motor 3072 speed if the infusion line 3210 is not full in the previous pump cycle. The refill period 830 is selected such that the plunger 3091 lifts off of the hard stop 3022A (FIG. 277) slowly (at lower flow rates) in order to minimize cavitation and air bubble generation.
At all other times the motor 3072 spins at the Delivery Stroke Velocity. In short, this is the velocity at which the cam shaft 3080 must complete a revolution in order to keep up with the trajectory volume, limited to values greater than 500Â° per second.
High Flow Mode
In high flow mode, the refill and delivery periods 830, 840 occur at the Delivery Stroke Velocity. The pressurization period 835 continues to occur at 800Â° per second. The Delivery Stroke Speed is continuously updated based on the previous volume measurement.
Delivery Stroke Velocity
The Delivery Stroke Velocity is the velocity at which the cam shaft 3080 needs to rotate in order for the controller to maintain the requested flow rate. This value is limited to speeds greater than 500Â° per second (approx. 700 mL per Hr). This value is also limited to less than the velocity required to maintain the requested flow rate in the case where the peristaltic pump 2990 is only delivering 80 uLs per stroke. This would be a significant under-fill and likely the result of some issue upstream of the peristaltic pump 2990. The velocity is calculated using the current volume delivered, requested volume delivered, previous stroke volume, and requested flow rate as pictured in FIG. 327.





A
=

Trajectory
â¢

 

â¢
Volume


,

at
â¢

 

â¢
end
â¢

 

â¢
of
â¢

 

â¢
previous
â¢

 

â¢
stroke








B
=

Measured
â¢

 

â¢
Delivered
â¢

 

â¢
Volume


,

as
â¢

 

â¢
of
â¢

 

â¢
previous
â¢

 

â¢
stroke







D
=

Expected
â¢

 

â¢
Stroke
â¢

 

â¢
Volume







C
=

B
+
D
-
A







T
=

Requested
â¢

 

â¢
Trajectory
â¢

 

â¢
Flow
â¢

 

â¢
Rate







C
=

T
â¡

(
t
)








t
=


C
T

=


B
+
D
-
A

T










Î¸
.

=

Cam
â¢

 

â¢
Shaft
â¢

 

â¢
Velocity


,

deg
sec








Î¸
.

=



360
Â°

t

=



360
Â°

*
T


B
+
D
-
A







In order to achieve a consistent flow rate, particularly during low flow rate deliveries, the rate at which the plunger 3091 descends must be controlled. The goal is to keep the flow as continuous and as close to the trajectory volume as possible. This is complicated by periods where the peristaltic pump 2990 does not deliver (refill, pressurize, etc).
To achieve continuous flow, at the start of the delivery stroke the volume delivered as part of the previous stroke should be equal the trajectory volume. This ensures a smooth initial delivery (avoiding an initial ârushâ to catch up). In order to accomplish this, by the end of the previous stroke the peristaltic pump 2990 must have over-delivered by the volume that is accrued during the Refill and Pressurization 830, 835 phases. This Over-Delivery volume is applied throughout the delivery stroke, such that at the start none of it is applied, but by the end the full volume is added.
An additional consideration is the fill volume. Shown in FIG. 328 is a graph of the volume delivered versus the cam angle over various fill volumes for several pump cycles. In the case of a completely full pumping chamber (approx. 150 uLs), there is a spurt of fluid as the outlet valve 3111 first opens. Alternatively, in the case of fill volumes lower than about 130 uLs, there is a tendency to pull fluid. Both of these occurrences negatively affect flow continuity. In to temper this, in some embodiments a target fill volume is set to minimize these effects.
The graph in FIG. 328 shows multiple delivery strokes, with the volume delivered normalized to 135 uLs. Most of the stroke is repeatable, once adjusting for the fill volume. The result of all of this is a third-order function that calculates a desired cam shaft 3080 angle given a requested volume. See below for the pertinent equations.
Variables

 


n=Current Delivery Stroke
i=Current Motor Control ISR cycle
f(x)=3rd Order Polynomial Fit
En=Expected Pulse Volume given a Fill Volume per current delivery stroke
Pn=Pulse Volume per f(x) per delivery stroke (this is a constant)
Sn=Expected Volume Shortage of current stroke
Ti=Current Target Volume via Trajectory
Vnâ1=Measured Delivered Volume as of completion of previous delivery stroke
Qi=Target Volume to be Delivered at time i
Fi=Fraction of Stroke completed at time i
On=Overhead Volume (Trajectory volume increase during nondelivery portions of cycle)
Î¸i=Requested Cam Shaft Angle
Î¸0=Initial Cam Shaft Angle at start of delivery stroke






EQUATIONS






S
n

=


P
n

-

E
n









Q
i

=


T
i

-

V

n
-
1










F
i

=


Q
i


E
n









Î¸
i

=


f
â¡

(


Q
i

+

S
n

+


O
n

â¢

F
i



)


+

Î¸
0






In some embodiments, the motor 3072 velocity during the delivery stroke is limited to no faster than the Delivery Stroke Velocity. The result of this is that at high speeds, the requested position is always ahead of the speed-limited position. At lower flow rates, the cam shaft 3080 position quickly reaches the calculated position and subsequently follows the above algorithm.
Down-Stream Occlusion Detection
The controller may determine whether a downstream occlusion exists by comparing the pressures or forces measured at the occlusion detector 3535 (3068 in FIG. 257) during the delivery period 840, during the previous refill period 830 and the filtered pressure data from previous pump cycles. Here a pump cycle is a complete revolution of the cam-shaft 3080 producing a refill, pressurization and delivery period (830, 835, 840). A downstream occlusion will be determined to exist by the processor if any one of several conditions occur. The pressures or forces measured by the sensor 3545B may be low pass filtered to reject spurious noise. In one embodiment, the low pass filter may reject noise above 1000 Hz. A plot of filtered hypothetical pressures over time is plotted in FIG. 329, where the pressure oscillates between lower pressures 850 when outlet valve 3111 (FIG. 259) is closed and high pressures 851 when the outlet valve 3111 is open and flow is being forced through the infusion line 3210 that is pressed against the pressure sensor 3535B. A downstream occlusion may create greater flow resistance as fluid is pushed toward the patient resulting in higher peak pressures and/or higher pressures when the outlet valve 3111 is closed as the restricted fluid slowly flows past a partial occlusion.
A first example of a downstream occlusion test compares the measured change in minimum pressure (PMIN) of the current cycle to a constant value. If the change in PMIN is greater than a predefined value, the controller will declare an occlusion. The change in PMINi is the difference in the minimum pressure of the current pump cycle to the minimum pressure of the previous pump cycle PMINiâ1.
A downstream occlusion will be declared for cycle i, if P*MIN i exceeds a first given threshold.
    In another embodiment, the change in PMIN is calculated as a difference between the current change in PMIN to the filtered change in PMIN:

 P* MIN i =f*  P MIN i+(1âf)* P* MIN iâ1 

 FP MIN i =  P MIN i â  P* MIN iâ1.

where f is the weighting value for the newest data. In one example, the weighting value for f is 0.05. If FPMIN i is greater than a second given threshold, the controller may declare an occlusion for cycle i.

    In another embodiment, a downstream occlusion is declared when the sum of the changes in PMIN exceeds a third given threshold, where the sum of the changes in PMIN is calculated as:

 IP MIN =   P MIN i â  P L.

where PL is the initial pressure minus the minimum pressure. If IPMIN exceeds a third given value, then the controller may declare an occlusion.

    A forth example of a downstream occlusion test compares the maximum pressure to a minimum pressure (PMIN) of the current pump cycle:

 P P i =P MAX i âP MIN iâ1.

where PMAX I is the maximum pressure during the delivery period 840. The controller may declare a downstream occlusion if the PP i exceeds a forth given threshold.

    In the event of a downstream occlusion, the controller may command the pump to backflow fluid through the peristaltic pump 2990 in order to relieve the pressure on the occlusion. It may be beneficial to relieve the pressure on the occlusion to avoid a bolus of fluid to be directed to the patient when the occlusion is relieved. In one example, the occlusion may be cleared by unpinching or unkinking the infusion line 3210 between the peristaltic pump 2990 and the patient.
Upstream Occlusion/Air-in-Line Measurement
The controller may detect an upstream occlusion or determine the volume of air pumped toward the patient based on the measured volume per stroke and historical volume per stroke average. The controller calculates an under-deliver volume for each stroke VUD i as:

V UD i =V avg i âV i 

V avg i =fv*V i+(1âfv)*V avg iâ1 

where fv is a weighting factor for the volume and Vi is the volume of fluid pumped during cycle i. The controller maintains a buffer of several VUD values, dropping the oldest one as the newest VUD is added. If the air-in-line detector 3545 (3066 in FIG. 257) detects a bubble, the controller will assume the VUD i represents an air bubble. If the air-in-line detector 3545 does not detect air, then the VUD i is assumed to be under-delivered volume. The controller may declare an upstream occlusion, if VUD i is greater than a given value the air-in-line detector 3545 does not detect air. The controller may determine the volume of air pumped toward the patient and may signal an alert if the air volume exceeds a first value over a first time period and alarm if air volume exceeds a second value over a second time period. In one example, the controller calculates the volume of the air bubble (VBUBBLE) by summing the under-deliver volumes (VUD i) for each stroke when the air-in-line detector 3545 signals the presence of air and some number of VUD i before the first detection of air:

V BUBBLE =  V UD i.

In one example, VBUBBLE is calculated for each stroke when the air-in-line detector 3545 signals the presence of air and the three VUD i before the first detection of air.

    In an alternative embodiment, the controller calculates a under-deliver volume for each stroke VUD i as:

V UD i =V T âV i 

where VT is the nominal volume of one pump cycle that is stored in the controller. In this alternative embodiment, the controller calculates the total volume of the air bubble (VBUBBLE) by summing the under-deliver volumes (VUD i) for each stroke when the air-in-line detector 3545 signals the presence of air and some number of VUD i before the first detection of air:

V BUBBLE=(V UD I âV* UD i)

. V* UD i =fv*V* UD i+(1âfv)*V* UD iâ1 

where .VUD i is the filtered value of VUD and fv is the weighting average. In one example, VBUBBLE is calculated for each stroke when the air-in-line detector 3545 signals the presence of air and the three VUD i before the first detection of air.

In one embodiment, each bubble volume VBUBBLE is added to a buffer of bubble volumes covering a set period of time and the sum of the bubble volumes in the buffer are evaluated against a standard. If the sum of the bubble volumes exceeds a given threshold, then the controller alarms for air in line. The controller may reverse the peristaltic pump 2990 to pull the air back from the patient. In one example, the buffer captures the most recent 15 minutes of operation and the air volume threshold is set to a value between 50 and 1000 l. In one example, bubble volumes smaller than a given value may be counted in the summation of the bubble volume. In one example, bubble volumes less than 10 l may be ignored. The air volume threshold may be user setable, or may be part of the DERS data that is downloaded from the device server gateway. The DERS and device server gateway are described in detail in the cross referenced non-provisional application for SYSTEM, METHOD, AND APPARATUS FOR ELECTRONIC PATIENT CARE U.S. Pat. No. 13/723,253, filed Dec. 21, 2012.

    Leak Test
A leak is determined at the end of the pressurization period 835 by monitoring the plunger 3091 position while the plunger L-shaped cam follower 3090 is not resting on the plunger cam 3083 and the plunger tip 3091B is resting on the infusion line 3210. If the plunger 3091 moves by more than a given value over a given time indicating that fluid has leaked past the valves 3101, 3111. In one embodiment, the peristaltic pump 2990 is stopped for half a second every six seconds at the end of pressurization period 835 to monitor the plunger 3091 position to determine if a leak exists between the valves 3101, 3111.
State Diagram for Delivery of Fluid by the Peristaltic Pump
The state diagram for the software that controls the delivery of fluid is pictured in FIG. 330. The Delivery Top State (capitalized phases herein may refer to variables, processes, or data structures, etc. depending on context) is the SuperState for the entire pump controller 3430 and comprises the Idle State and the Running State. The Idle State is entered upon starting the pump controller 3430, completing a delivery, or stopping/aborting a delivery. The Running State is the SuperState for all states that involve actuating the motor 3072 or performing a delivery. The Running State also handles Freeze commands.
The Delivery State is the SuperState for all states involving performing a delivery. This state handles Stop commands, which had two behaviors depending on the current state. If commanded during an active delivery the peristaltic pump 2990 will finish delivery after current stroke is completed. If the peristaltic pump 2990 is currently in the freeze state, it will immediately end the delivery.
The Start Deliver State signifies the beginning of a delivery cycle, or one rotation of the cam shaft 3080. The peristaltic pump 2990 will transition to one of three states depending on the current conditions. If enough time has elapsed since the previous leak check, the Moving to Leak Check Position State is called. If the previous delivery was frozen and aborted mid-stroke, the Moving to Plunger Down State is entered in order to resume delivering where the previous delivery ended. Otherwise, the motor controller 3430 transitions to the Moving to Pressurized Position State.
The Moving to Leak Check Position State commands the motor controller 3430 to move to and hold position at the Valves Closed Plunger Down position. The motor 3072 velocity is commanded to move at 800Â° per second. Upon receiving notification that the cam shaft 3080 has reached the desired position the Pressurized Position measurement is taken for volume calculations and the Waiting for Leak Check State is called.
The Waiting for Leak Check State idles until a set amount of time has elapsed, allowing the infusion line 3210 to settle and, in the case of a leak, fluid to escape the pumping chamber. Once the time has elapsed, the plunger 3091 position is measured again and compared to the Pressurized Position in order to determine the presence of a leak condition. The Fault Detector is told that the delivery stroke is starting in order to monitor for air and occlusions and the Moving to Plunger Down Position State is called.
The Moving to Pressurized Position State commands the motor controller 3430 to move towards and send a notification upon reaching the Valves Closed Plunger Down position. It will continue to move upon reaching this position until a new command is issued. The motor 3072 velocity is commanded to move at 800Â° per second.
Upon receiving notification that the cam shaft 3080 has reached the desired position the Pressurized Position measurement is taken for volume calculations and the Moving to Plunger Down Position State is called. The Fault Detector is told that the delivery stroke is starting in order to monitor for air and occlusions.
The Moving to Plunger Down Position State controls the cam shaft 3080 position throughout the portion of the cam shaft 3080 rotation that the outlet valve 3111 is open. The cam shaft 3080 position is controlled in such a way as to attempt to keep the flow as consistent as possible. During this state, the motor 3072 velocity is again limited to no greater than the calculated Delivery Stroke Velocity. There are two paths by which the motor controller 3430 can exit this state. In the first case, the state is notified once the cam shaft 3080 reaches the Outlet Open Plunger Down position. Alternatively, if the total delivery volume reaches the commanded volume during the stroke, the cam shaft 3080 position is frozen and the state is notified that the stroke is complete.
Upon being notified that cam shaft 3080 has reached the Outlet Open Plunger Down position, the plunger 3091 position is stored as the Post Delivery Position measurement and the Fault Detector is told that the delivery stroke is complete. Using this measurement, the volume delivered is calculated (using the calibration in Section 3). If the peristaltic pump 2990 was stopped mid-stroke, the volume delivered is estimated using the current position and the fill volume. Using the updated delivery volume information, the updated Delivery Stroke Velocity is calculated. Finally, in the case where the delivery volume has been reached, the peristaltic pump 2990 calls the End Deliver State. Otherwise the Moving to Fill Position State is entered.
The Moving to Fill Position State commands the motor controller 3430 to move towards and send a notification upon reaching the Inlet Valve Open Plunger Up position (minus the Pre-Fill Window). It will continue to move upon reaching this position until a new command is issued. The motor 3072 velocity is commanded to move at the calculated Delivery Stroke Velocity. Once the desired position is reached, the Moving Through Fill Position State is called.
The Moving to Fill Position State commands the motor controller 3430 to move towards and send a notification upon reaching the Inlet Valve Open Plunger Up position (plus the Post-Fill Window). It will continue to move upon reaching this position until a new command is issued. The motor 3072 velocity is commanded to move at the calculated Refill Stroke Velocity (see Section 8.3). The Refill Stroke Velocity is calculated upon entering this state prior to issuing a new motor 3072 command.
Once the desired position is reached, the End Deliver State is called.
The End Deliver State checks if the delivery volume has been attained or a stop has been requested. If so, the motor controller 3430 enters the Idle State and the cam shaft 3080 position is commanded to go to the Inlet Valve Open Plunger Up position. Otherwise the Start Deliver State is called, and a new delivery cycle begins.
The Freeze State is called when the Running State processes a Freeze command. The cam shaft 3080 position is frozen at its current position and the Fault Detector and Volume Estimator are notified that the delivery if frozen.
If a Resume Delivery command is received while in the Freeze State, the state machine is returned to the state which it was in prior to entering the Freeze State. The Fault Detector and Volume Estimator are both informed that the delivery is resuming. If a Stop Delivery command is received, the Idle State is called.
The Calibration State is the SuperState for the states involved in calibrating the cam shaft 3080 and plunger 3091 positions.
The Finding Home State performs the cam shaft 3080 calibration. Entering this state, the IO Access class is notified that a calibration is beginning so certain sensor protections can be turned off. The state receives a notification once the process is completed. Upon receiving this notification, the calibration values are sent to the non-volatile memory. Finally, the Moving to Home State is called.
The Moving to Home State simply commands the peristaltic pump 2990 to move to the Inlet Valve Open Plunger Up position. Upon reaching this position the peristaltic pump 2990 returns to the Idle State.
 FIG. 331 rates a possible state chart of the code to detect to detect a fault of the peristaltic pump 2990 and FIG. 332 illustrates a occlusion detection state chart to detect an occlusion of the peristaltic pump 2990 in accordance with an embodiment of the present disclosure. FIG. 33 shows a feedback control loop to control the speed the peristaltic pump 2990 motor 3072 in a peristaltic pump 2990 in accordance with an embodiment of the present disclosure.
Software Architecture
The software architecture of the peristaltic pump 2990 is shown schematically in FIG. 334. The software architecture divides the software into cooperating subsystems that interact to carry out the required pumping action. The software may be equally applicable to all the embodiments described herein. The software may also be used for other pump embodiments which may not be described herein. Each subsystem may be composed of one or more execution streams controlled by the underlying operating system. Useful terms used in the art include operating system, subsystem, process, thread and task.
Asynchronous messages 4130 are used to âpushâ information to the destination task or process. The sender process or task does not get confirmation of message delivery. Data delivered in this manner is typically repetitive in nature. If messages are expected on a consistent schedule, the receiver process or task can detect a failure if a message does not arrive on time.
Synchronous messages 4120 may be used to send a command to a task or process, or to request (pull) information from a process or task. After sending the command (or request), the originating task or process suspends execution while awaiting a response. The response may contain the requested information, or may simply acknowledge the receipt of the sent message. If a response is not received in a timely manner, the sending process or task may time out. In such an event the sending process or task may resume execution and/or may signal an error condition.
An operating system (OS) is a collection of software that manages computer hardware resources and provides common services for computer programs. The operating system acts as an intermediary between programs and the computer hardware. Although some application code is executed directly by the hardware, the application code may frequently make a system call to an OS function or be interrupted by it.
The RTP 3500 runs on a Real Time Operating System (RTOS) that has been certified to a safety level for medical devices. An RTOS is a multitasking operating system that aims at executing real-time applications. Real-time operating systems often use specialized scheduling algorithms so that they can achieve a deterministic nature of behavior. The UIP 3600 runs on a Linux operating system. The Linux operating system is a Unix-like computer operating system.
A subsystem is a collection of software (and perhaps hardware) assigned a specific set of (related) system functionality. A subsystem has clearly defined responsibilities and a clearly defined interface to other subsystems. A subsystem is an architectural division of the software that uses one or more processes, threads or tasks.
A process is an independent executable running on a Linux operating system which runs in its own virtual address space. The memory management hardware on the CPU may be used to enforce the integrity and isolation of this memory, by write protecting code-space, and disallowing data access outside of the process' memory region. Processes can only pass data to other processes using inter-process communication facilities.
In Linux, a thread is a separately scheduled, concurrent path of program execution. On Linux, a thread is always associated with a process (which must have at least one thread and can have multiple threads). Threads share the same memory space as its âparentâ process. Data can be directly shared among all of the threads belonging to a process but care must be taken to properly synchronize access to shared items. Each thread has an assigned execution priority.
A task on an RTOS (Real Time Operating System) is a separately scheduled, concurrent path of program execution, analogous to a Linux âthreadâ. All tasks share the same memory address space which consists of the entire CPU memory map. When using an RTOS that provides memory protection, each task's effective memory map is restricted by the Memory Protection Unit (MPU) hardware to the common code space and the task's private data and stack space.
The processes on the UIP 3600, communicate via IPC calls as shown by the one-way arrows in FIG. 334. Each solid-lined arrow represents a synchronous message 4120 call and response, and dotted-line arrows are asynchronous messages 4130. The tasks on the RTP 3500 similarly communicate with each other. The RTP 3500 and UIP 3600 are bridged by an asynchronous serial line 3601, with one of an InterComm Process 4110 or InterComm Task 4210 on each side. The InterComm Process 4110 presents the same communications API (Application Programming Interface) on both sides of the bridge, so all processes and tasks can use the same method calls to interact.
The Executive Process 4320 may be invoked by the Linux system startup scripts after all of the operating system services have started. The Executive Process 4320 may then start the various executable files that comprise the software on the UIP 3600. If any of the software components should exit or fail unexpectedly, the Executive Process 4320 may be notified, and may generate the appropriate alarm.
While the system is running, the Executive Process 4320 may act as a software âwatchdogâ for various system components. After registering with the Executive process 4320, a process may be required to âcheck inâ or send a signal periodically to the executive process 4320. Failure to âcheck inâ at the required interval may be detected by the Executive Process 4320. Upon detection of a failed subsystem, the Executive Process 4320 may take remedial action of either: do nothing, declaring an alarm, or restarting the failed process. The remedial action taken may be predetermined by a table entry compiled into the Executive Process 4320. The âcheck-inâ interval may vary from process to process based in part on the importance of the process. The check-in interval may also vary during peristaltic pump 2990 operation to optimize the pump controller 4256 response by minimizing computer processes. In one example embodiment, during tube loading, the pump controller 4256 may check-in less frequently than during active pumping.
In response to the required check-in message, the Executive Process 4320 may return various system status items to processes that checked-in. The system status items may be the status of one or more components on the pump and/or errors. The system status items may include: battery status, WiFi connection status, device gateway connection status, device status (Idle, Infusion Running, Diagnostic Mode, Error, Etc.), technical error indications, and engineering log levels.
A thread running in the Executive Process 4320 may be used to read the state of the battery 3420 from an internal monitor chip in the battery 3420. This may be done at a relatively infrequent interval such as every 10 seconds.
The UI View 4330 may implement the graphical user interface (GUI), rendering the display graphics on the display screen 3725, and responding to inputs on the touch-screen 3735 or other data input means. The UI View 4330 design may be stateless. The screen being displayed may be commanded by the UI Model process 4340, along with any variable data to be displayed. The commanded display is refreshed periodically regardless of data changes.
The style and appearance of user input dialogs (Virtual keyboard, drop down selection list, check box etc.) may be specified by the screen design, and implemented entirely by the UI View 4330. User input may be collected by the UI View 4330, and sent to the UI Model 4340 for interpretation. The UI View 4330 may provide for multi-region, multi-lingual support with facilities for the following list including but not limited to: virtual keyboards, unicode strings, loadable fonts, right to left entry, translation facility (loadable translation files), and configurable numbers and date formats.
The UI Model 4340 may implement the screen flows, and so control the user experience. The US Model 4340 may interact with the UI View 4330, specifying the screen to display, and supply any transient values to be displayed on the screen. Here screen refers the image displayed on the physical display screen 3725 and the defined interactive areas or user dialogs i.e. buttons, sliders, keypads etc, on the touch screen 3735. The UI Model 4340 may interpret any user inputs sent from the UI View 4330, and may either update the values on the current screen, command a new screen, or pass the request to the appropriate system service (i.e. âstart pumpingâ is passed to the RTP 3500).
When selecting a medication to infuse from the Drug Administration Library, the UI Model 4340 may interact with the Drug Administration Library stored in the local data base which may be part of the Database System 4350. The user's selections may setup the run time configurations for programming and administering the desired medication.
While the operator may be entering an infusion program, the UI Model 4340 relays the user's input values to the Infusion Manager 4360 for validation and interpretation. Therapeutic decisions may not be made by the UI Model 4340. The treatment values may be passed from the Infusion Manager 4360 to the UI Model 4340 to the UI View 4330 to be displayed for the user.
The UI Model 4340 may continuously monitor the device status gathered from the Infusion Manager 4360 (current infusion progress, alerts, door sensor 3163 and slide clamp sensor 3152, etc.) for possible display by the UI View 4330. Alerts/Alarms and other changes in system state may provoke a screen change by the UI Model 4340.
Additional Dosage Safety Software Algorithm(s)
The Infusion Manager Process (IM) 4360 may validate and control the infusion delivered by the peristaltic pump 2990. To start an infusion, the user may interact with the UI View/Model 4330/4340 to select a specific medication and clinical use. This specification may select one specific Drug Administration Library (DAL) entry for use. The IM 4360 may load this DAL entry from the database 4350, for use in validating and running the infusion.
Once a Drug Administration Library entry is selected, the IM 4340 may pass the dose mode, limits for all user enterable parameters, and the default values (if set) up to the UI Model 4340. Using this data, the UI Model 4340 may guide the user in entering the infusion program.
As each parameter is entered by the user, the value may be sent from the UI View/Model 4330/4340 to the IM 4360 for verification. The IM 4360 may echo the parameters back to the UI View/Model 4330/4340, along with an indication of the parameter's conformance to the DAL limits. This may allow the UI View/Model 4330/4340 to notify the user of any values that are out of bounds.
When a complete set of valid parameters has been entered, the IM 4360 may also return a valid infusion indicator, allowing the UI View/Model 4330/4340 to present a âStartâ control to the user.
The IM 4360 may simultaneously make the infusion/pump status available to the UI View/Model 4330/4340 upon request. If the UI View/Model 4330/4340 is displaying a âstatusâ screen, it may request this data to populate it. The data may be a composite of the infusion state, and the pump state.
When requested to run the (valid) infusion, the IM 4360 may pass the âInfusion Worksheetâ containing user specified data and the âInfusion Templateâ containing the read-only limits from the DAL as a CRC'd binary block to the Infusion Control Task 4220 running on the RTP 3500. The Infusion Control Task 4220 on the RTP 3500 may take the same user inputs, conversions and DERS inputs and recalculate the Infusion Worksheet. The Infusion Control Task 4220 calculated results may be stored in a second CRC'd binary block and compared to the first binary block from the UIP 3600. The infusion calculations performed on the UIP 3600 may be recalculated and double checked on the RTP 3500 before the infusion is run.
Coefficients to convert the input values (i.e. â¡l, grams, %) to a standard unit such as ml may be stored in the UIP 3600 memory or database system 4350. The coefficients may be stored in a lookup table or at specific memory locations. The lookup table may contain 10's of conversion values. In order to reduce the chance that flipping a single bit will resulting in the wrong conversion factor being used, the addresses for the conversion values may be distributed among the values from zero to 4294967296 or 232. The addresses may be selected so that the binary form of one address is never just one bit different from a second address.
While an infusion is running, the IM 4360 may monitor its progress, sequences, pauses, restarts, secondary infusions, boluses and KVO (keep vein open) scenarios as needed. Any user alerts requested during the infusion (Infusion near complete, KVO callback, Secondary complete callback, etc) may be tracked and triggered by the IM 4360.
Processes on the UIP 3600 may communicate with each other via a proprietary messaging scheme based on a message queue library that is available with Linux. The system may provide for both acknowledged (synchronous message 4120) and unacknowledged (asynchronous message 4130) message passing.
Messages destined for the Real-time Processor (RTP) 3500 may be passed to the InterComm Process 4310 which may forward the messages to the RTP 3500 over a serial link 3601. A similar InterComm Task 4210 on the RTP 3500 may relay the message to its intended destination via the RTP 3500 messaging system.
The messaging scheme used on this serial link 3601 may provide for error detection and retransmission of flawed messages. This may be needed to allow the system to be less susceptible to electrical disturbances that may occasionally âgarbleâ inter-processor communications.
To maintain a consistent interface across all tasks, the message payloads used with the messaging system may be data classes derived from a common baseclass (MessageBase). This class adds both data identity (message type) and data integrity (CRC) to messages.
The Audio Server Process 4370 may be used to render sounds on the system. All user feedback sounds (key press beeps) and alarm or alert tones may be produced by playing pre-recorded sound files. The sound system may also be used to play music or speech if desired.
Sound requests may be symbolic (such as âPlay High Priority Alarm Soundâ), with the actual sound file selection built into the Audio Server process 4370. The ability to switch to an alternative soundscape may be provided. This ability may be used to customize the sounds for regional or linguistic differences.
The Device Gateway Communication Manager Process (DGCM) 4380 may manage communications with the Device Gateway Server over a Wi-Fi network 3620, 3622,3720. The DGCM 4380 may be started and monitored by the Executive Process 4320. If the DGCM 4380 exits unexpectedly, it may be restarted by the Executive Process 4320 but if the failures are persistent the system may continue to function without the gateway running.
It may be the function of the DGCM 4380 to establish and maintain the Wi-Fi connection and to then establish a connection to the Device Gateway. All interactions between the DGCM 4380 and the Device Gateway may system such as the system described in the cross-referenced nonprovisional application for System, Method, and Apparatus for Electronic Patient Care U.S. Pat. No. 13/723,253, filed Dec. 21, 2012.
If the connection to the gateway is unavailable or becomes unavailable, the DGCM 4380 may discontinue any transfers in progress, and attempt to reconnect the link. Transfers may be resumed when the link is reestablished. Network and Gateway operational states may be reported periodically to the Executive Process 4320. The Executive Process 4320 may distribute this information for display to the user.
The DGCM 4380 may function as an autonomous subsystem, polling the Device Gateway Server for updates, and downloading newer items when available. In addition the DGCM 4380 may monitor the logging tables in the database, uploading new log events as soon as they are available. Events that are successfully uploaded may be flagged as such in the database. After a reconnection to the Device Gateway Server, the DGCM 4380 may âcatch upâ with the log uploads, sending all items that were entered during the communications disruption. Firmware and Drug Administration Library updates received from the Gateway may be staged in the UIP's 3600 file system for subsequent installation. Infusion programs, clinical advisories, patient identification and other data items destined for the device may be staged in the database.
The DGCM 4380 may report connection status and date/time updates to the Executive Process 4320. There may be no other direct connections between the DGCM 4380 and any of the other operational software. Such a design decouples the operational software from the potentially transient availability of the Device Gateway and Wi-Fi network.
The Motor Check 4383 software reads a hardware counter or encoder 3438 (FIG. 325) that reports motor 3072 rotation. The software in this module independently estimates the motor's 3072 movements, and compares them to the expected motion based on the user inputs for rate of infusion. This is an independent check for proper motor control. However, the primary motor control software may be executed on the RTP 3500.
Event information may be written to a log via the Logging Process 4386 during normal operation. These events may consist of internal machine status and measurements, as well as therapy history events. Due to the volume and frequency of event log data, these logging operations may be buffered in a FIFO queue while waiting to be written to the database.
A SQL database (PostgreSQL) may be used to store the Drug Administration Library, Local Machine Settings, Infusion History and Machine Log data. Stored procedures executed by the database server may be used to insulate the application from the internal database structures.
The database system 4350 may be used as a buffer for log data destined for the Device Gateway server, as well as a staging area for infusion settings and warnings sent to the pump from the Gateway.
Upon requesting the start of an infusion, the DAL entry and all user selected parameters may be sent to the Infusion Control Task 4220. All of the DAL validations and a recalculation of the infusion rate and volume based upon the requested dose may be performed. The result may be checked against the results calculated by the IM 4360 on the UIP 3600. These results may be required to match to continue.
When running an infusion, the Infusion Control Task 4220 may control the delivery of each infusion âsegmentâ; i.e. one part of an infusion consisting of a volume and a rate. Examples of segments are: a primary infusion, KVO, bolus, remainder of primary after bolus, primary after titration, etc.
The infusion segments are sequenced by the IM Process 4360 on the UIP 3600.
The Pump Control task 4250 may incorporate the controllers that drive the pumping mechanism. The desired pumping rate and amount (VTBI) may be specified in commands sent from the Infusion Control Task 4220.
The Pump Control 4250 may receive periodic sensor readings from the Sensor Task 4264. The new sensor readings may be used to determine the motor 3072 speed and position, and to calculate the desired command to send to the Brushless Motor Control IRQ 4262. The receipt of the sensor message may trigger a recalculation of the controller output.
While pumping fluid, the Pump Control Task 4250 may perform at least one of the following tasks: controlling pumping speed, measuring volume delivered, measuring air detected (over a rolling time window), measuring fluid pressure or other indications of occlusions, and detecting upstream occlusions.
Relevant measurements may be reported to the RTP Status Task 4230 periodically. The Pump Control 4250 may execute one infusion segment at a time, stopping when the commanded delivery volume has been reached. The Sensor Task 4264 may read and aggregate the sensor data used for the dynamic control of the pumping system. The sensor data may include the rotary encoder 3130 measuring the cam-shaft, the linear encoders 3520, 3525 measuring the position of the plunger 3091.
The sensor task 4264 may be scheduled to run at a consistent 1 kHz rate (every 1.0 ms) via a dedicated counter/timer. After all of the relevant sensors are read, the data may be passed to the Pump Control Task 4250 via an asynchronous message 4120. The periodic receipt of this message may be used as the master time base to synchronize the peristaltic pump's 2990 control loops.
The RTP Status Task 4230 may be the central repository for both the state and the status of the various tasks running on the RTP 3500. The RTP Status Task 4230 may distribute this information to both the IM 4360 running on the UIP 3600, as well as to tasks on the RTP 3500 itself.
The RTP Status Task 4230 may also be charged with fluid accounting for the ongoing infusion. Pump starts and stops, as well as pumping progress may be reported to RTP Status 4230 by the Pump Control Task 4256. The RTP Status Task 4230 may account for at least one of the following: total volume infused, primary volume delivered, primary VTBI (counted down), volume delivered and VTBI of a bolus while the bolus is in progress, and volume delivered and VTBI of a secondary infusion while the secondary infusion is in progress.
All alerts or alarms originating on the RTP 3500 may be funneled through the RTP Status Task 4230, and subsequently passed up to the UIP 3600.
While the unit is in operation, the program flash, and RAM memory may be continually tested by the Memory Checker Task 4240. This non-destructive test may be scheduled so that the entire memory space on the RTP 3500 is tested every few hours. Additional periodic checks may be scheduled under this task if needed.
Tasks running on the RTP 3500 may be required to communicate with each other as well as to tasks that are executing on the UIP 3600.
The RTP messaging system may use a unified global addressing scheme to allow messages to be passed to any task in the system. Local messages may be passed in memory utilizing the facilities of the RTOS' message passing, with off-chip messages routed over the (asynchronous serial 3601) communications link by the InterComm Task 4210.
The InterComm Task 4210 may manage the RTP 3500 side of the serial link 3601 between the two processors. It is the RTP 3500 equivalent of the InterComm Process 4310 on the UIP 3600. Messages received from the UIP 3600 may be relayed to their destination on the RTP 3500. Outbound messages may be forwarded to InterComm Process 4310 on the UIP 3600.
All messages between the RTP 3500 and the UIP 3600 may be checked for data corruption using an error-detecting code (32 bit CRC). Messages sent over the serial link 3601 may be re-sent if corruption is detected. This provides a communications system that may be reasonably tolerant to ESD. Corrupted messages within the processor between processes may be handled as a hard system failure. All of the message payloads used with the messaging system may be data classes derived from a common baseclass (MessageBase) to assure consistency across all possible message destinations.
Brushless Motor control 4262 may not run as a task; it may be implemented as a strict foreground (interrupt context) process. Interrupts may be generated from the commutator or hall sensors 3436, and the commutation algorithm may be run entirely in the interrupt service routine.
 FIGS. 335 and 336 illustrate the geometry of two dual-band antennas that may be used with the peristaltic pump 2990 in accordance with an embodiment of the present disclosure. FIG. 335 shows a top and a bottom view of the antenna, which may be fabricated using metallic layers on a substrate, such as is typically made when manufacturing a printed circuit board. FIG. 336 may also be fabricated using a printed circuit board manufacturing method.
Various alternatives and modifications can be devised by those skilled in the art without departing from the disclosure. Accordingly, the present disclosure is intended to embrace all such alternatives, modifications and variances. Additionally, while several embodiments of the present disclosure have been shown in the drawings and/or discussed herein, it is not intended that the disclosure be limited thereto, as it is intended that the disclosure be as broad in scope as the art will allow and that the specification be read likewise. Therefore, the above description should not be construed as limiting, but merely as exemplifications of particular embodiments. And, those skilled in the art will envision other modifications within the scope and spirit of the claims appended hereto. Other elements, steps, methods and techniques that are insubstantially different from those described above and/or in the appended claims are also intended to be within the scope of the disclosure.
The embodiments shown in the drawings are presented only to demonstrate certain examples of the disclosure. And, the drawings described are only illustrative and are non-limiting. In the drawings, for illustrative purposes, the size of some of the elements may be exaggerated and not drawn to a particular scale. Additionally, elements shown within the drawings that have the same numbers may be identical elements or may be similar elements, depending on the context.
Where the term âcomprisingâ is used in the present description and claims, it does not exclude other elements or steps. Where an indefinite or definite article is used when referring to a singular noun, e.g., âa,â âan,â or âthe,â this includes a plural of that noun unless something otherwise is specifically stated. Hence, the term âcomprisingâ should not be interpreted as being restricted to the items listed thereafter; it does not exclude other elements or steps, and so the scope of the expression âa device comprising items A and Bâ should not be limited to devices consisting only of components A and B. This expression signifies that, with respect to the present disclosure, the only relevant components of the device are A and B.
Furthermore, the terms âfirst,â âsecond,â âthird,â and the like, whether used in the description or in the claims, are provided for distinguishing between similar elements and not necessarily for describing a sequential or chronological order. It is to be understood that the terms so used are interchangeable under appropriate circumstances (unless clearly disclosed otherwise) and that the embodiments of the disclosure described herein are capable of operation in other sequences and/or arrangements than are described or illustrated herein.