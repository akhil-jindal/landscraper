Function generator, crystal oscillation device and method of adjusting crystal oscillation device 
US-6292066-B1
Matsushita Electric Industrial Co., Ltd.
2001-09-18
https://patents.google.com/patent/US6292066B1/en
TECHNICAL FIELD
The present invention relates to a function generator for generating a control signal for compensating temperature dependency of an oscillation frequency output from a crystal oscillation device, a crystal oscillation device using the function generator and a method of adjusting the crystal oscillation device.
BACKGROUND ART
Recently, there is a sharp rise in demand for portable electronic equipment, and a compact and accurate crystal oscillation device for generating a reference clock signal is indispensable to such electronic equipment.
The oscillation frequency of a crystal oscillator in a crystal oscillation device has a temperature characteristic including cubic and linear components derived from a quartz oscillator used in the crystal oscillator. Specifically, with the abscissa indicating the ambient temperature Ta and the ordinate indicating the oscillation frequency f as is shown in FIG. 26(a), the oscillation frequency f of a crystal oscillator whose temperature characteristic is not compensated is represented as a substantially cubic curve 101 with a difference of approximately 10 ppm through 30 ppm between the maximum value and the minimum value. Herein, the ambient temperature Ta, is assumed to be approximately â30Â° C. through +80Â° C. Accordingly, when an ideal control voltage curve 102 as is shown in FIG. 26(b), with the abscissa indicating the ambient temperature Ta and the ordinate indicating a control voltage Vc, is generated and applied to the crystal oscillator, df/dTa can be zero and the oscillation frequency f can be substantially independent of the temperature as is shown in FIG. 26(c).
The temperature characteristic can be compensated, for example, as follows: A varactor diode (i.e.,a variable capacity diode) serving as a frequency adjustment device is connected with the crystal oscillator, and a control voltage having a cubic and linear temperature characteristic for compensating the temperature characteristic of the crystal oscillator is applied to the varactor diode. Thus, the temperature characteristic of the oscillation frequency can be stabilized.
Actually, it is technically very difficult to generate a control voltage Vc having the ideal temperature characteristic as is shown in FIG. 26(b). Therefore, in general, a control voltage having a pseudo cubic temperature characteristic is generated by any of various methods so as attain the temperature compensation of the oscillation frequency.
Now, a conventional temperature compensating crystal oscillation device disclosed in Japanese Laid-Open Patent Publication No. 8-288741 will be described with reference to accompanying drawings.
FIG. 27 shows the functional block configuration of the conventional temperature compensating crystal oscillation device. In the temperature compensation of this crystal oscillation device, the cubic and linear temperature characteristic of the crystal oscillator is divided into plural temperature regions, and voltages in the respective divided temperature regions represented as a function of the temperature are subjected to polygonal lines approximation to obtain temperature lines.
Specifically, a memory 111 of FIG. 27 stores each divided temperature region, a temperature coefficient (proportional coefficient) of the temperature line in the temperature region, and a voltage value at room temperature on the temperature line of each region of the voltage line. Voltage line data corresponding to the ambient temperature detected by a temperature sensor circuit 112 is selectively read from the memory 111, and a predetermined control voltage is generated in an amplifier circuit 113 on the basis of the read control voltage data. The thus generated control voltage is applied to a voltage control crystal oscillator 114, so that the oscillation frequency can be stabilized through the temperature compensation of the oscillation frequency.
Furthermore, as is shown in FIG. 28(a), the temperature sensor circuit 112 performs the polygonal lines approximation by using A/D conversion. Therefore, frequency skip, namely, temporary discontinuity of the voltage lines, is caused between temperature regions as is shown in FIG. 28(c). In order to avoid this frequency skip, a sample and hold circuit 115 is interposed between the amplifier circuit 113 and the voltage control crystal oscillator 114, so as to make the frequency vary smoothly with time.
However, since such a conventional temperature compensating crystal oscillation device uses the A/D conversion for the polygonal lines approximation for generating the control voltage to be used for the temperature compensation, a quantum noise is unavoidably caused, and the frequency skip cannot be avoided in principle. Moreover, a clock signal generator is indispensable, and hence, there arises a problem of a clock noise. In addition, it disadvantageously takes time to stabilize the oscillation frequency after the actuation due to a time constant of the sample and hold circuit 115.
Furthermore, in measurement and adjustment of the temperature characteristic, the temperature characteristic of the oscillation frequency of the crystal oscillation device is measured with the ambient temperature changed discretely in order to compensate the temperature characteristic. Therefore, an error can be caused in the adjustment itself. In order to reduce the error, it is necessary to increase the number of the divided temperature regions, which leads to another problem that the storage capacity of the memory 111 is increased.
The object of the invention is eliminating the frequency skip from the control voltage itself and easing the adjustment of the temperature compensation.
DISCLOSURE OF INVENTION
In order to achieve the aforementioned object, a control voltage for temperature compensation is generated in this invention by using merely analog circuits free from frequency skip in principle.
The function generator of this invention for generating a control signal as a function of a temperature, comprises a first analog signal generating circuit for generating and outputting a predetermined analog signal independent of an ambient temperature; a second analog signal generating circuit for outputting an analog signal dependent upon the ambient temperature; and a control circuit for receiving the signal from the first analog signal generating circuit and the signal from the second analog signal generating circuit, and for generating, with a feasible range of the ambient temperature continuously divided into a first temperature region, a second temperature region, a third temperature region, a fourth temperature region and a fifth temperature region in this order along a direction from a low temperature to a high temperature, control signals respectively corresponding to the five temperature regions, wherein the control circuit outputs a first control signal whose output value is varied in proportion to increase of the temperature at a first change rate when the ambient temperature is in the first temperature region; a second control signal whose output value is continuous with the first control signal and is a predetermined value independent of the temperature when the ambient temperature is in the second temperature region; a third control signal whose output value is continuous with the second control signal and is varied in proportion to increase of the temperature at a second change rate when the ambient temperature is in the third temperature region; a fourth control signal whose output value is continuous with the third control signal and is a predetermined value independent of the temperature when the ambient temperature is in the fourth temperature region; and a fifth control signal whose output value is continuous with the fourth control signal and is varied in proportion to increase of the temperature at a third change rate having the same polarity as the first change rate.
Thus, the function generator of this invention includes the first analog signal generating circuit for generating and outputting the predetermined analog signal independent of the ambient temperature, the second analog signal generating circuit for generating and outputting the analog signal dependent upon the ambient temperature and the control circuit for receiving the signal from the first analog signal generating circuit and the signal from the second analog signal generating circuit and for generating the control signals continuously corresponding to the entire regions ranging from the low temperature to the high temperature. Accordingly, although the ambient temperature is divided into the five regions, the frequency skip is not caused in the vicinity of the boundary between the regions, resulting in attaining good approximation with a small approximation error. Moreover, since the function generator includes the analog circuits alone, a clock generator is not required differently from a digital circuit, and hence, a clock noise can also be avoided.
Furthermore, when the ambient temperature is in the first temperature region, the first control signal whose output value is varied in proportion to the increase of the temperature at the first change rate is output; when the ambient temperature is in the second temperature region, the second control signal having the predetermined value independent of the temperature is output; when the ambient temperature is in the third temperature region, the third control signal whose output value is varied in proportion to the temperature at the second change rate is output; when the ambient temperature is in the fourth temperature region, the fourth control signal having the predetermined value independent of the temperature is output; and when the ambient temperature is in the fifth temperature region, the fifth control signal whose output value is varied in proportion to the temperature at the third change rate having the same polarity as the first change rate is output. Accordingly, the temperature function having a positive cubic component can be compensated through polygonal lines approximation using five straight lines. As a result, even though the number of lines used in the approximation is five and comparatively small, the approximation can be sufficiently performed. Therefore, the number of combinations of adjustment parameters such as proportional coefficients and constants of the lines used in the polygonal lines approximation can be decreased, and hence, the adjustment of the respective temperature functions to be compensated can be eased.
Preferably, in the function generator, the analog signal is a voltage signal, the first and third change rates are negative rates, and the second change rate is a positive rate. In this manner, the temperature function having the positive cubic component can be definitely compensated by the polygonal lines approximation using the five lines. Furthermore, when the voltage signal is used as a control signal for a voltage control crystal oscillating circuit controlled to have an oscillation frequency of a predetermined value through voltage control, a desired oscillation frequency whose dependency on the ambient temperature is negligible can be definitely obtained.
Preferably, in the function generator, on a graph of the first control signal, the second control signal, the third control signal, the fourth control signal and the fifth control signal for representing a temperature characteristic of a quartz oscillator against the ambient temperature, the first control signal and the fifth control signal are point-symmetrical about a coordinate point on the graph determined by a temperature of an inflection point of an oscillation frequency of the quartz oscillator and a value of the third control signal at the temperature of the inflection point, the second control signal and the fourth control signal are point-symmetrical about the coordinate point, and the third control signal is point-symmetrical about the coordinate point. In this manner, the number of the combinations of the adjustment parameters such as the proportional coefficients and the constants of the lines used in the polygonal lines approximation can be further decreased, and hence, the adjustment of the respective temperature functions to be compensated can be further eased.
Preferably, the function generator further comprises storage means, wherein when the ambient temperature is in the first temperature region, the storage means has a first proportion value for defining a relationship between a proportional coefficient between a temperature used for generating the first control signal and the output value thereof and a cubic coefficient of a temperature characteristic of an oscillation frequency of a quartz oscillator, and the first proportion value is output to the control circuit, when the ambient temperature is in the second temperature region, the storage means has a second proportion value for defining a relationship between a constant between a temperature used for generating the second control signal and the output value thereof and the cubic coefficient, and the second proportion value is output to the control circuit, when the ambient temperature is in the third temperature region, the storage means has a third proportion value for defining a relationship between a proportional coefficient between a temperature used for generating the third control signal and the output value thereof and the cubic coefficient, and the third proportion value is output to the control circuit, when the ambient temperature is in the fourth temperature region, the storage means has a fourth proportion value for defining a relationship between a constant between a temperature used for generating the fourth control signal and the output value thereof and the cubic coefficient, and the fourth proportion value is output to the control circuit, when the ambient temperature is in the fifth temperature region, the storage means has a fifth proportion value for defining a relationship between a proportional coefficient between a temperature used for generating the fifth control signal and the output value thereof and the cubic coefficient, and the fifth proportion value is output to the control circuit, and the storage means stores the first proportion value, the second proportion value, the third proportion value, the fourth proportion value and the fifth proportion value. In this manner, in the adjustment of a cubic temperature coefficient of a quartz oscillator, circuit constants corresponding to the proportional coefficients of the lines and circuit constants corresponding to the constants of the lines can be set in a batch. Therefore, fluctuations of a cubic temperature coefficient and a linear temperature coefficient derived from the AT cut angle of a quartz oscillator and fluctuation of the absolute value of the oscillation frequency can be easily and definitely adjusted.
Preferably, in the function generator, the control circuit includes a first NPN transistor whose collector is supplied with a supply voltage, whose base is supplied with a first electric signal decreasing in proportion to the ambient temperature and whose emitter is connected with an input of a first current source; a second NPN transistor whose collector is supplied with the supply voltage, whose base is supplied with a second electric signal retaining a predetermined value independent of the ambient temperature and whose emitter is connected with the input of the first current source; a third NPN transistor whose collector is supplied with the supply voltage, whose base is supplied with a third electric signal increasing inproportion to the ambient temperature and whose emitter is connected with the input of the first current source; a fourth NPN transistor whose collector and base are connected with an output of a second current source having a current value a half as large as a current value of the first current source and whose emitter is connected with the input of the first current source; a first PNP transistor whose base is connected with the collector of the fourth NPN transistor, whose emitter is connected with an output of a third current source and whose collector is grounded; a second PNP transistor whose base is supplied with a fourth electric signal retaining a predetermined value independent of the ambient temperature, whose emitter is connected with the output of the third current source and whose collector is grounded; a third PNP transistor whose base is supplied with a fifth electric signal decreasing in proportion to the ambient temperature, whose emitter is connected with the output of the third current source and whose collector is grounded; and a fourth PNP transistor whose emitter is connected with the output of the third current source and whose collector and base are connected with an input of a fourth current source having a current value a half as large as a current value of the third current source, the fourth NPN transistor selects an electric signal having a maximum voltage value among the first electric signal, the second electric signal and the third electric signal and outputs the selected electric signal at the collector thereof as a sixth electric signal, the fourth PNP transistor selects an electric signal having a minimum voltage value among the fourth electric signal, the fifth electric signal and the sixth electric signal and outputs the selected electric signal at the collector thereof as a seventh electric signal, and the control circuit outputs the seventh electric signal as the control signal. In this manner, the control signal can be definitely generated by using the analog signals alone.
Preferably, in the function generator, a first resistance is serially connected between the emitter of the first NPN transistor and the first current source, a second resistance is serially connected between the emitter of the second NPN transistor and the first current source, a third resistance is serially connected between the emitter of the third NPN transistor and the first current source, a fourth resistance is serially connected between the emitter of the fourth NPN transistor and the first current source, a fifth resistance is serially connected between the emitter of the first PNP transistor and the third current source, a sixth resistance is serially connected between the emitter of the second PNP transistor and the third current source, a seventh resistance is serially connected between the emitter of the third PNP transistor and the third current source, and an eighth resistance is serially connected between the emitter of the fourth PNP transistor and the third current source. In this manner, connecting portions of the control signals in the boundaries between the temperature regions can be smoothed, and hence, even though the polygonal lines approximation is adopted, the approximation error at the connecting portion can be made small.
The crystal oscillation device of this invention comprises a first analog signal generating circuit for generating and outputting a predetermined analog signal independent of an ambient temperature; a second analog signal generating circuit for generating and outputting an analog signal dependent upon the ambient temperature; a control circuit for receiving the signal from the first analog signal generating circuit and the signal from the second analog signal generating circuit, and for generating, with a feasible range of the ambient temperature continuously divided into a first temperature region, a second temperature region, a third temperature region, a fourth temperature region and a fifth temperature region in this order along a direction from a low temperature to a high temperature, control signals respectively corresponding to the five temperature regions; and a crystal oscillating circuit for receiving a control signal from the control circuit so as to be controlled to have an oscillation frequency at a predetermined value by the control signal, wherein the control circuit compensates a temperature dependency of the oscillation frequency output by the crystal oscillating circuit by outputting a first control signal whose output value is decreased in proportion to increase of the temperature when the ambient temperature is in the first temperature region; a second control signal whose output value is continuous with the first control signal and is a predetermined value independent of the temperature when the ambient temperature is in the second temperature region; a third control signal whose output value is continuous with the second control signal and is increased in proportion to increase of the temperature when the ambient temperature is in the third temperature region; a fourth control signal whose output value is continuous with the third control signal and is a predetermined value independent of the temperature when the ambient temperature is in the fourth temperature region; and a fifth control signal whose output value is continuous with the fourth control signal and is decreased in proportion to increase of the temperature when the ambient temperature is in the fifth temperature region.
The crystal oscillation device of this invention includes the first analog signal generating circuit for generating and outputting the predetermined analog signal independent of the ambient temperature, the second analog signal generating circuit for generating and outputting the analog signal dependent upon the ambient temperature, and the control circuit for receiving the signal from the first analog signal generating circuit and the signal from the second analog signal generating circuit and for generating the control signals continuously corresponding to the entire regions ranging from the low temperature and the high temperature. Accordingly, even when the ambient temperature is divided into the five regions, the frequency skip is not caused in the vicinity of the boundary between the regions, resulting in attaining good approximation. Moreover, when the ambient temperature is in the first temperature region, the first control signal whose output value is decreased in proportion to the increase of the temperature is output; when the ambient temperature is in the second temperature region, the second control signal having the predetermined value independent of the temperature is output; when the ambient temperature is in the third temperature region, the third control signal whose output value is varied in proportion to the temperature is output; when the ambient temperature is in the fourth temperature region, the fourth control signal having the predetermined value independent of the temperature is output; and when the ambient temperature is in the fifth temperature region, the fifth control signal whose output value is decreased in proportion to the increase of the temperature is output. Accordingly, the temperature function having a positive cubic component can be compensated through the polygonal lines approximation using five straight lines.
Preferably, in the crystal oscillation device, on a graph of the first control signal, the second control signal, the third control signal, the fourth control signal and the fifth control signal for representing a temperature characteristic of a quartz oscillator against the ambient temperature, the first control signal and the fifth control signal are point-symmetrical about a coordinate point on the graph determined by a temperature of an inflection point of an oscillation frequency of the quartz oscillator and a value of the third control signal at the temperature of the inflection point, the second control signal and the fourth control signal are point-symmetrical about the coordinate point, and the third control signal is point-symmetrical about the coordinate point. In this manner, the number of the combinations of the adjustment parameters such as the proportional coefficients and the constants of the lines used in the polygonal lines approximation can be further decreased, resulting in further easing the adjustment of the respective temperature functions to be compensated.
Preferably, the crystal oscillation device further comprises storage means, wherein when the ambient temperature is in the first temperature region, the storage means has a first proportion value for defining a relationship between a proportional coefficient between a temperature used for generating the first control signal and the output value thereof and a cubic coefficient of a temperature characteristic of an oscillation frequency of a quartz oscillator, and the first proportion value is output to the control circuit, when the ambient temperature is in the second temperature region, the storage means has a second proportion value for defining a relationship between a constant between a temperature used for generating the second control signal and the output value thereof and the cubic coefficient, and the second proportion value is output to the control circuit, when the ambient temperature is in the third temperature region, the storage means has a third proportion value for defining a relationship between a proportional coefficient between a temperature used for generating the third control signal and the output value thereof and the cubic coefficient, and the third proportion value is output to the control circuit, when the ambient temperature is in the fourth temperature region, the storage means has a fourth proportion value for defining a relationship between a constant between a temperature used for generating the fourth control signal and the output value thereof and the cubic coefficient, and the fourth proportion value is output to the control circuit, when the ambient temperature is in the fifth temperature region, the storage means has a fifth proportion value for defining a relationship between a proportional coefficient between a temperature used for generating the fifth control signal and the output value thereof and the cubic coefficient, and the fifth proportion value is output to the control circuit, and the storage means stores the first proportion value, the second proportion value, the third proportion value, the fourth proportion value and the fifth proportion value. In this manner, in the adjustment of a cubic temperature coefficient of a quartz oscillator, circuit constants corresponding to the proportional coefficients of the lines and circuit constants corresponding to the constants of the lines can be set in a batch. As a result, fluctuations of a cubic temperature coefficient and a linear temperature coefficient derived from the AT cut angle of a quartz oscillator and fluctuation of the absolute value of the oscillation frequency can be easily and definitely adjusted.
Preferably, in the crystal oscillation device, the control circuit includes a first NPN transistor whose collector is supplied with a supply voltage, whose base is supplied with a first electric signal decreasing in proportion to the ambient temperature and whose emitter is connected with an input of a first current source; a second NPN transistor whose collector is supplied with the supply voltage, whose base is supplied with a second electric signal retaining a predetermined value independent of the ambient temperature and whose emitter is connected with the input of the first current source; a third NPN transistor whose collector is supplied with the supply voltage, whose base is supplied with a third electric signal increasing in proportion to the ambient temperature and whose emitter is connected with the input of the first current source; a fourth NPN transistor whose collector and base are connected with an output of a second current source having a current value a half as large as a current value of the first current source and whose emitter is connected with the input of the first current source; a first PNP transistor whose base is connected with the collector of the fourth NPN transistor, whose emitter is connected with an output of a third current source and whose collector is grounded; a second PNP transistor whose base is supplied with a fourth electric signal retaining a predetermined value independent of the ambient temperature, whose emitter is connected with the output of the third current source and whose collector is grounded; a third PNP transistor whose base is supplied with a fifth electric signal decreasing in proportion to the ambient temperature, whose emitter is connected with the output of the third current source and whose collector is grounded; and a fourth PNP transistor whose emitter is connected with the output of the third current source and whose collector and base are connected with an input of a fourth current source having a current value a half as large as a current value of the third current source, the fourth NPN transistor selects an electric signal having a maximum voltage value among the first electric signal, the second electric signal and the third electric signal and outputs the selected electric signal at the collector thereof as a sixth electric signal, the fourth PNP transistor selects an electric signal having a minimum voltage value among the fourth electric signal, the fifth electric signal and the sixth electric signal and outputs the selected electric signal at the collector thereof as a seventh electric signal, and the control circuit outputs the seventh electric signal as the control signal. In this manner, the control signal can be definitely generated by using the analog signals alone.
Preferably, in the crystal oscillation device, a first resistance is serially connected between the emitter of the first NPN transistor and the first current source, a second resistance is serially connected between the emitter of the second NPN transistor and the first current source, a third resistance is serially connected between the emitter of the third NPN transistor and the first current source, a fourth resistance is serially connected between the emitter of the fourth NPN transistor and the first current source, a fifth resistance is serially connected between the emitter of the first PNP transistor and the third current source, a sixth resistance is serially connected between the emitter of the second PNP transistor and the third current source, a seventh resistance is serially connected between the emitter of the third PNP transistor and the third current source, and an eighth resistance is serially connected between the emitter of the fourth PNP transistor and the third current source. In this manner, connecting portions of the control signals in the boundaries between the temperature regions can be smoothed, and hence, even though the polygonal lines approximation is adopted, the approximation error at the connection portion can be made small.
Preferably, the crystal oscillation device further comprises a RAM circuit for storing parameters, for compensating the temperature dependency of the oscillation frequency of the crystal oscillating circuit, of the first through fifth control signals output by the control circuit, with varying each of the parameters with regard to each of the control signals; and a programmable ROM circuit for storing optimal parameters of the parameters with regard to each of the control signals. In this manner, the control signals can be adjusted with appropriately varying externally input data of the RAM circuit on each of the control signals and an optimal control signal characteristic can be detected. In addition, the detected optimal data can be read, after writing them in a PROM circuit, under actual use conditions, so as to confirm that a control signal in accordance with the ambient temperature can be definitely output.
Preferably, the crystal oscillation device further comprises optimizing means for optimizing the control signals output by the control circuit independently of one another and in accordance with a cubic temperature coefficient, a linear temperature coefficient, a frequency difference from a reference frequency at a temperature of an inflection point and the temperature of the inflection point of the temperature dependency of the oscillation frequency of the crystal oscillating circuit. In this manner, the temperature dependency of the oscillation frequency of each quartz oscillator can be definitely coped with, resulting in improving the approximation characteristic of the temperature compensation.
The method of this invention of adjusting a crystal oscillation device is adopted in a crystal oscillation device including a first analog signal generating circuit for generating and outputting a predetermined analog signal independent of an ambient temperature; a second analog signal generating circuit for generating and outputting an analog signal dependent upon the ambient temperature; a control circuit for receiving the signal from the first analog signal generating circuit and the signal from the second analog signal generating circuit, and for generating, with a feasible range of the ambient temperature continuously divided into a first temperature region, a second temperature region, a third temperature region, a fourth temperature region and a fifth temperature region in this order along a direction from a low temperature to a high temperature, control signals respectively corresponding to the five temperature regions; a crystal oscillating circuit for receiving a control signal from the control circuit so as to be controlled to have an oscillation frequency at a predetermined value by the control signal; a RAM circuit for storing parameters, for compensating a temperature dependency of the oscillation frequency of the crystal oscillating circuit, of the first through fifth control signals output by the control circuit, with varying each of the parameters with regard to each of the control signals; and a programmable ROM circuit for storing optimal parameters of the parameters with regard to each of the control signals, the control circuit outputting a first control signal whose output value is decreased in proportion to increase of the temperature when the ambient temperature is in the first temperature region; a second control signal whose output value is continuous with the first control signal and is a predetermined value independent of the temperature when the ambient temperature is in the second temperature region; a third control signal whose output value is continuous with the second control signal and is increased in proportion to increase of the temperature when the ambient temperature is in the third temperature region; a fourth control signal whose output value is continuous with the third control signal and is a predetermined value independent of the temperature when the ambient temperature is in the fourth temperature region; and a fifth control signal whose output value is continuous with the fourth control signal and is decreased in proportion to increase of the temperature when the ambient temperature is in the fifth temperature region, and the method comprises a peculiar parameter determining step of determining peculiar parameters by allowing the crystal oscillation device to stand at a temperature continuously varying from the first temperature region to the fifth temperature region and by calculating parameters of the control signals respectively corresponding to a cubic temperature coefficient, a linear temperature coefficient, a frequency difference from a reference frequency at a temperature of an inflection point and the temperature of the inflection point of the temperature characteristic of the crystal oscillating circuit so as to make variation of the oscillation frequency output by the crystal oscillating circuit caused by the temperature substantially zero; an initial parameter determining step of determining initial parameters by measuring an initial temperature characteristic of the control signals output by the control circuit and by calculating the parameters of the control signals respectively corresponding to the cubic temperature coefficient, the linear temperature coefficient, the frequency difference from the reference frequency at the temperature of the inflection point and the temperature of the inflection point; and an optimal parameter writing step of obtaining change amounts of the control signals per unit of data corresponding to temperature compensating parameters stored in the RAM circuit by measuring a change amount of the initial temperature characteristic with changing the data corresponding to the temperature compensating parameters, obtaining differences between the initial parameters and the peculiar parameters, determining optimal parameters of the control signals so as to minimize the differences on the basis of the change amounts of the control signals per unit of the data, and writing the optimal parameters in the ROM circuit.
According to the method of this invention of adjusting a crystal oscillation device, each peculiar parameter of the control signal is determined, by allowing the crystal oscillation device to stand at a temperature continuously changing from the first temperature region to the fifth temperature region, so that the variation of the oscillation frequency output by the crystal oscillating circuit caused by the change of the temperature can be substantially zero. After determining each initial parameter of the control signal, by measuring the change amount of the initial temperature characteristic with changing data corresponding to the temperature compensating parameter stored in the RAM circuit, the change amount of the control signal per unit of the data corresponding to the temperature compensating parameter is obtained. After obtaining the difference between the initial parameter and the peculiar parameter, the optimal parameter of the control signal is determined on the basis of the change amount of the control signal per unit of the data so as to make the difference small. Accordingly, the fluctuation of the AT cut angle of a quartz oscillator, offset fluctuation of the oscillation frequency, and the fluctuation of the temperature of an inflection point can be easily and definitely adjusted with regard to each crystal oscillation device. Moreover, since the ambient temperature is divided into five regions and polygonal lines approximation using five lines is adopted, the number of the temperature characteristic compensating parameters can be small. As a result, the circuit scale of the RAM circuit and the ROM circuit can be made small, and hence, the entire device can easily attain compactness.
BRIEF DESCRIPTION OF DRAWINGS
FIG. 1 is a functional block diagram for showing a temperature compensating crystal oscillation device according to a first embodiment of the invention;
FIG. 2 is a circuit diagram of a voltage control crystal oscillating circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 3 is a circuit diagram of a constant voltage circuit and a temperature sensor circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 4 is a detailed circuit diagram of the constant voltage circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 5 is a detailed circuit diagram of the temperature sensor circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 6 is another circuit diagram of the constant voltage circuit and the temperature sensor circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 7 is another detailed circuit diagram of the constant voltage circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 8 is another detailed circuit diagram of the temperature sensor circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 9 is another detailed circuit diagram of the temperature sensor circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 10 is a detailed circuit diagram of a control circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIGS. 11(a) through 11(c) show compensation of an oscillation frequency of the voltage control crystal oscillating circuit using a control voltage in the temperature compensating crystal oscillation device of the first embodiment, wherein FIG. 11(a) is a graph for showing the ambient temperature dependency of the oscillation frequency before temperature compensation, FIG. 11(b) is a graph for showing the ambient temperature dependency of the control voltage used for the temperature compensation output by the control circuit and FIG. 11(c) is a graph for showing the ambient temperature dependency of a difference between the oscillation frequency and a reference frequency attained by applying the control voltage to the voltage control crystal oscillating circuit;
FIG. 12 is a graph for showing the ambient temperature dependency of the control voltage to be used for the temperature compensation using polygonal lines approximation in the temperature compensating crystal oscillation device of the first embodiment;
FIG. 13 is a detailed circuit diagram of a ROM/RAM circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 14 is a timing chart of RAM data input to the ROM/RAM circuit of the temperature compensating crystal oscillation device of the first embodiment;
FIG. 15 is a detailed circuit diagram of a control circuit of a temperature compensating crystal oscillation device according to a first modification of the first embodiment;
FIGS. 16(a) through 16(c) show compensation of an oscillation frequency of a voltage control crystal oscillating circuit using a control voltage in a temperature compensating crystal oscillation device according to a second modification of the first embodiment, wherein FIG. 16(a) is a graph for showing the ambient temperature dependency of the oscillation frequency before temperature compensation, FIG. 16(b) is a graph for showing the ambient temperature dependency of the control voltage to be used for the temperature compensation output by a control circuit and FIG. 16(c) is a graph for showing the ambient temperature dependency of a difference between the oscillation frequency and a reference frequency attained by applying the control voltage to the voltage control crystal oscillating circuit;
FIGS. 17(a) through 17(c) show compensation of an oscillation frequency of a voltage control crystal oscillating circuit using a control voltage in a temperature compensating crystal oscillation device according to a third modification of the first embodiment, wherein FIG. 17(a) is a graph for showing the ambient temperature dependency of the oscillation frequency before temperature compensation, FIG. 17(b) is a graph for showing the ambient temperature dependency of the control voltage used for the temperature compensation output by a control circuit and FIG. 17(c) is a graph for showing the ambient temperature dependency of a difference between the oscillation frequency and a reference frequency attained by applying the control voltage to the voltage control crystal oscillating circuit;
FIG. 18 is a table for showing comparison in a memory capacity attained by various control circuit systems of the control circuit in the temperature compensating crystal oscillation device of the first embodiment;
FIG. 19(a) is a graph for showing the ambient temperature dependency attained by different cubic temperature coefficients of the oscillation frequency before the temperature compensation and FIG. 19(b) is a graph for showing the ambient temperature dependency of a control voltage output by a control circuit of a crystal oscillation device according to a fourth modification of the first embodiment;
FIGS. 20(a) through 20(c) are graphs for showing generation of the control voltage output by the control circuit of the crystal oscillation device of the fourth modification of the first embodiment;
FIG. 21(a) is a graph for showing the respective ambient temperature dependencies of the control voltage output by the control circuit of the crystal oscillation device of the fourth modification of the first embodiment and an ideal control voltage peculiar to a quartz oscillator and FIG. 21(b) is a graph for showing a difference between the ideal control voltage and an approximation control voltage;
FIG. 22 is a functional block diagram of a functional generator used for temperature compensation in a temperature compensating crystal oscillation device according to a second embodiment of the invention;
FIGS. 23(a) through 23(d) are graphs for explaining variation of a control voltage through adjustment of temperature compensating parameters and a inflection point temperature in the temperature compensating crystal oscillation device of the second embodiment;
FIG. 24 is a functional block diagram for illustrating adjustment of an oscillation frequency in a temperature compensating crystal oscillation device according to a third embodiment of the invention;
FIG. 25 is a flowchart for showing the adjustment of the temperature compensating crystal oscillation device of the third embodiment;
FIGS. 26(a) through 26(c) are graphs for illustrating adjustment of an ideal temperature compensating crystal oscillation device, wherein FIG. 26(a) is a graph for showing the ambient temperature dependency of an oscillation frequency before temperature compensation, FIG. 26(b) is a graph for showing the ambient temperature dependency of a control voltage used for the temperature compensation and FIG. 26(c) is a graph for showing the ambient temperature dependency of a difference between the oscillation frequency and a reference frequency after the temperature compensation;
FIG. 27 is a functional block diagram of a conventional temperature compensating crystal oscillation device; and
FIGS. 28(a) through 28(c) are graphs for explaining temperature compensation of the conventional temperature compensating crystal oscillation device.
BEST MODE FOR CARRYING OUT THE INVENTION
Embodiment 1
A first embodiment of the invention will now be described with reference to the accompanying drawings.
FIG. 1 is a functional block diagram of a temperature compensating crystal oscillation device of the first embodiment. The temperature compensating crystal oscillation device (TCXO) 10 shown in FIG. 1 is, for example, an oscillation device for generating a reference clock signal in a portable telephone, and is required to have stable frequency accuracy such that variation of the oscillation frequency can be within a range of Â±2.5 ppm or less in the entire temperature range.
As is shown in FIG. 1, the temperature compensating crystal oscillation device 10 includes a constant voltage circuit 12 serving as a first analog signal generating circuit for generating and outputting a predetermined voltage independent of the ambient temperature; a temperature sensor circuit 13 serving as a second analog signal generating circuit for generating and outputting a voltage varied in proportion to the ambient temperature; a third analog signal generating circuit 17 for receiving the constant voltage output by the constant voltage circuit 12 and the voltage in proportion to the temperature output by the temperature sensor circuit 13 and for outputting a voltage which corresponds to a given temperature within each of five temperature regions obtained by dividing the entire range of a feasible ambient temperature into five parts; and a control circuit 14 for receiving the voltage outputted from the third analog signal generating circuit 17 and for generating a control voltage Vc used for polygonal lines approximation of a negative cubic curve by using continuous straight lines for compensating the temperature characteristic of a quartz oscillator in the entire range of the ambient temperature; a voltage control crystal oscillating circuit (hereinafter referred to as the VCXO) 15 whose oscillation frequency is controlled to be a predetermined value by the control voltage Vc received from the control circuit 14; and a ROM/RAM circuit 16 for storing temperature compensating parameters for compensating the temperature characteristic of the control voltage Vc for optimizing the oscillation frequency output by the VCXO 15 in accordance with the control voltage Vc output by the control circuit 14.
In this case, the ambient temperature may be the temperature of VCXO 15 or may be the temperature of the crystal oscillation device 10.
FIG. 2 is an exemplified circuit diagram of the VCXO 15 of this embodiment and shows a known circuit configuration. As is shown in FIG. 2, an input terminal 21 for receiving the control voltage Vc is connected with one terminal of a quartz oscillator 23 with a bias resistance 22 interposed therebetween. Between the bias resistance 22 and the quartz oscillator 23 is connected the cathode terminal of a varactor diode 24 with its anode terminal grounded. The oscillation frequency of the quartz oscillator 23 is changed by varying the capacitance of the varactor diode 24 by changing the control voltage Vc. The other terminal of the quartz oscillator 23 is connected with a Colpitts crystal oscillating circuit 25, and the oscillation output fout of the Colpitts crystal oscillating circuit 25 is output to an output terminal 26.
Now, the constant voltage circuit 12 and the temperature sensor circuit 13 of this embodiment are described in detail with reference to the accompanying drawings.
FIG. 3 is a circuit diagram for showing the configuration of a monotone decrease voltage generating circuit 30, including the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1, for generating and outputting a first control voltage y1 or a fifth control voltage y5 which decreases in proportion to increase of the ambient temperature Ta. As is shown in FIG. 3, the monotone decrease voltage generating circuit 30 includes a constant voltage circuit 31, and a bandgap reference circuit 32 and a current mirror circuit 33 working as the temperature sensor circuit. A reference voltage V0 of approximately 1.25 V independent of the ambient temperature Ta is generated in the bandgap reference circuit 32, and a constant current I0 is generated on the basis of the reference voltage V0 in the constant voltage circuit 31.
Also, a current IT0 dependent upon the ambient temperature Ta is generated in the bandgap reference circuit 32, and a current IT in proportion to the ambient temperature Ta is generated in the current mirror circuit 33, so that a difference current I0âIT between the constant current I0 and the current IT in proportion to the ambient temperature Ta can be taken out at a node between the constant voltage circuit 31 and the current mirror circuit 33. The difference current I0âIT is subjected to current/voltage conversion by using a resistance 34, thereby generating the first control voltage y1 or the fifth control voltage y5 which decreases in accordance with the increase of the ambient temperature Ta. At this point, the absolute value of the first control voltage y1 or the fifth control voltage y5 is set by adjusting a resistance value of a resistance 31 a supplied with a supply voltage Vcc in the constant voltage circuit 31.
FIG. 4 is a circuit diagram for showing another configuration of the constant voltage circuit 31 shown in FIG. 3. As is shown in FIG. 4, the constant voltage circuit 31 includes an operational amplifier 311 supplied, at its positive terminal, with the reference voltage V0 independent of the ambient temperature Ta output by the bandgap reference circuit 32; an NPN transistor 312 whose base is supplied with the output of the operational amplifier 311 and whose emitter is connected with a negative terminal of the operational amplifier 311 and the resistance 31 a; a PNP transistor 313 whose collector is connected with the collector of the NPN transistor 312; and the resistance 31 a connected with the emitter of the NPN transistor 312 at its one end and grounded at the other end. A current I00 flowing from PNP transistors 315 through PNP transistors 316 flows into the resistance 31 a, so as to generate the reference voltage V0 independent of the ambient temperature Ta, namely, a voltage Vbc at the base of the PNP transistor 313 makes a contribution to the generation of the constant current I0 independent of the ambient temperature Ta.
Also, the constant voltage circuit 31 is connected with the ROM/RAM circuit 16 of FIG. 1, so that plural temperature compensating parameters can be adjusted. For example, in order to copewith change of a 5-bit signal Ti for defining an inflection point temperature input from the ROM/RAM circuit 16, the constant voltage circuit 31 includes five PNP transistors 315 supplied with the base voltage Vbc at their shared base, five PNP transistors 316 for feeding back a current to the emitter of the NPN transistor 312 and five switching NPN transistors 317 each of which is closed/opened in accordance with each bit of the 5-bit signal Ti.
FIG. 5 shows another circuit configuration of the bandgap reference circuit 32 and the current mirror circuit 33 shown in FIG. 3. As is shown in FIG. 5, the bandgap reference circuit 32 includes a pair of PNP transistors 321 and 322 connected with each other at their bases; four NPN transistors 323, 324, 325 and 326 connected in parallel with the collector and the base of the PNP transistor 321 and connected with each other at their bases; an NPN transistor 328 sharing the base with the NPN transistors 323, 324, 325 and 326 and connected with the collector of the PNP transistor 322 through a resistance 327; and a resistance 329 connected with the emitter shared by the four NPN transistors 323, 324, 325 and 326 at its one end and grounded at the other end. The base voltage Vbt of the pair of PNP transistors 321 and 322 is a voltage used for transferring a current increasing in proportion to the ambient temperature Ta.
Furthermore, the current mirror circuit 33 of FIG. 5 is connected with the ROM/RAM circuit 16 of FIG. 1, so that the temperature compensating parameters can be adjusted. For example, in order to cope with change of a 4-bit signal b1 corresponding to the constant term of the first control voltage y1 or a 4-bit signal b5 corresponding to the constant term of the fifth control voltage y5 input from the ROM/RAM circuit 16, the current mirror circuit 33 includes four PNP transistors 331 supplied with the base voltage Vbc from the constant voltage circuit 31 at their shared base, four PNP transistors 332 for transferring the constant current I0, and four switching NPN transistors 333 respectively connected in parallel with the four PNP transistors 332 and closed/opened in accordance with the 4-bit signal b1 or b5. Furthermore, the current mirror circuit 33 includes four PNP transistors 334 supplied, at their shared base, with the base voltage Vbt dependent upon the temperature supplied from the bandgap reference circuit 32; eight NPN transistors 335 constituting four current mirror circuits respectively connected in parallel with the four PNP transistors 334 for absorbing a current through mirror inversion; and four switching NPN transistors 336 connected in parallel with the four groups of NPN transistors 335 and closed/opened in accordance with a 4-bit signal a1 corresponding to the proportional coefficient of the first control voltage y1 or a 4-bit signal a5 corresponding to the proportional coefficient of the fifth control voltage y5. When, among the four switching NPN transistors 333, the number of transistors in an on-state is changed in accordance with the 4-bit signal b1 or b5, the constant current I0 is increased/decreased, and when, among the four switching NPN transistors 336, the number of transistors in an on-state is changed in accordance with the 4-bit signal a1 or a5, the current IT dependent upon the temperature is increased/decreased. As a result, the output current I0âIT for determining the first control voltage y1 or the fifth control voltage y5 is increased/decreased.
FIG. 6 shows the detailed circuit configuration of a monotone increase voltage generating circuit 40, including the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1, for generating and outputting a third control voltage y3 which increases in accordance with the increase of the ambient temperature Ta. As is shown in FIG. 6, the monotone increase voltage generating circuit 40 includes a constant voltage circuit 41, and a bandgap reference circuit 42 and a current mirror circuit 43 serving as the temperature sensor circuit. A reference voltage V0 of approximately 1.25 V independent of the ambient temperature Ta is generated in the bandgap reference circuit 42, and a constant current I0 is generated on the basis of the reference voltage V0 in the constant voltage circuit 41.
Also, a current IT0 dependent upon the ambient temperature Ta is generated in the bandgap reference circuit 42, and a current IT in proportion to the ambient temperature Ta is generated in the current mirror circuit 43, so that a difference current ITâI0 between the current IT in proportion to the ambient temperature Ta and the constant current I0 can be taken out at a node between the constant voltage circuit 41 and the current mirror circuit 43. The difference current ITâI0 is subjected to the current/voltage conversion by using a resistance 44, thereby generating the third control voltage y3 in proportion to the ambient temperature Ta. At this point, a difference at room temperature between the third control voltage y3 and a voltage for attaining a reference frequency at the inflection point temperature is set by adjusting the resistance value of a resistance 41 a of the constant voltage circuit 41.
FIG. 7 shows the detailed circuit configuration of the constant voltage circuit 41. In FIG. 7, like reference numerals are used to refer to like elements shown in FIG. 4 and the description is omitted. In this case, it goes without saying that the constant voltage circuit 41 has a different circuit constant from the constant voltage circuit 31.
FIG. 8 shows the detailed circuit configuration of the bandgap reference circuit 42 and the current mirror circuit 43. The bandgap reference circuit 42 of FIG. 8 has the same configuration as the bandgap reference circuit 32 of FIG. 5, and hence, the description is omitted with like reference numerals used to refer to like elements shown in FIG. 5. In FIG. 8, the current mirror circuit 43 is connected with the ROM/RAM circuit 16 of FIG. 1, so that the temperature compensating parameters can be adjusted. For example, in order to cope with change of a 4-bit signal a3 corresponding to the proportional coefficient of the third control voltage y3 input from the ROM/RAM circuit 16, the current mirror circuit 43 includes four PNP transistors 431 supplied, at their shared base, with the base voltage Vbt dependent upon the temperature input from the band gap reference circuit 42, four PNP transistors 432 for transferring the current IT in proportion to the ambient temperature Ta, and four switching NPN transistors 433 respectively connected in parallel with the four PNP transistors 432 and closed/opened in accordance with the 4-bit signal a3. Moreover, the current mirror circuit 43 includes four PNP transistors 434 supplied, at their shared base, with the base voltage Vbc input from the constant voltage circuit 41, eight NPN transistors 435 constituting four current mirror circuits respectively connected in parallel with the four PNP transistors 434 for absorbing the current through the mirror inversion, and four switching NPN transistors 436 respectively connected in parallel with the four groups of NPN transistors 435 and closed/opened in accordance with the 4-bit signal a3. When, the number of transistors in an on-state among the four switching NPN transistors 433 and the number of transistors in an on-state among the four switching NPN transistors 436 are changed in accordance with the 4-bit signal a3, the output current ITâI0 for determining the third control voltage y3 is increased/decreased.
FIG. 9 shows a part of the circuit configuration of a constant voltage generating circuit, including the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1, for generating and outputting a second control voltage y2 and a fourth control voltage y4 independent of the ambient temperature. This constant voltage generating circuit includes a constant voltage circuit (not shown) and a bandgap reference circuit 42A and a current mirror circuit 43A serving as the temperature sensor circuit. The constant voltage circuit has a configuration equivalent to the constant voltage circuit 41 of FIG. 7. The bandgap reference circuit 42A of FIG. 9 has the same configuration as the bandgap reference circuit 42 of FIG. 8, and hence, the description is omitted with like reference numerals used to refer to like elements shown in FIG. 8.
Also, the current mirror circuit 43A of FIG. 9 is connected with the ROM/RAM circuit 16 of FIG. 1, so that the temperature compensating parameters can be adjusted. For example, in order to cope with change of a 4-bit signal b4 corresponding to the constant term of the fourth control voltage y4 input from the ROM/RAM circuit 16, the current mirror circuit 43A includes four PNP transistors 431 supplied, at their shared base, with the base voltage Vbc input from the constant voltage circuit, four PNP transistors 432 for transferring the constant current I0, and four switching NPN transistors 433 respectively connected in parallel with the PNP transistors 432 and closed/opened in accordance with the 4-bit signal b4. The current mirror circuit 43A further includes four PNP transistors 434 supplied, at their shared base, with the base voltage Vbc input from the constant voltage circuit, eight NPN transistors 435 constituting four current mirror circuits respectively connected in parallel with the four PNP transistors 434 for absorbing the current through the mirror inversion, and four switching NPN transistors 436 respectively connected in parallel with the four groups of NPN transistors 435 and closed/opened in accordance with a 4-bit signal b2. When the number of transistors in an on-state among the four switching NPN transistors 433 is changed in accordance with the 4-bit signal b4, the current for determining the fourth control voltage y4 is increased/decreased, and when the number of transistors in an on-state among the four switching NPN transistors 436 is changed in accordance with the 4-bit signal b2, the current for determining the second control voltage y2 is increased/decreased.
Next, the control circuit 14 of this embodiment will be described with reference to the accompanying drawings.
FIG. 10 shows the detailed circuit configuration of the control circuit 14 of FIG. 1. As is shown in FIG. 10, the control circuit 14 for generating the control voltage Vc used for the temperature compensation of the VCXO 15 includes a MAX circuit 14 a for receiving the first control voltage y1, the second control voltage y2 and the third control voltage y3 generated by the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1 and for outputting the maximum voltage among these control voltages as a sixth control voltage y6; and a MIN circuit 14 b for receiving the fourth control voltage y4 and the fifth control voltage y5 generated by the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1 and the sixth control voltage y6 output by the MAX circuit 14 a and for outputting the minimum voltage among these control voltages as a seventh control voltage y7. The seventh control voltage y7 works as the control voltage Vc for the temperature compensation.
The MAX circuit 14 a includes a first NPN transistor Q1 whose collector is supplied with a supply voltage Vcc, whose base is supplied with the first control voltage y1 and whose emitter is connected with the input of a first constant current source I1; a second NPN transistor Q2 whose collector is supplied with the supply voltage Vcc, whose base is supplied with the second control voltage y2 and whose emitter is connected with the input of the first constant current source I1; a third NPN transistor Q3 whose collector is supplied with the supply voltage Vcc, whose base is supplied with the third control voltage y3 and whose emitter is connected with the input of the first constant current source I1; and a fourth NPN transistor Q7 whose collector and base are connected with the output of a second constant current source I2 for supplying a current with a value a half as large as that of the first constant current source I1 and whose emitter is connected with the input of the first constant current source I1, for outputting, at its collector, the maximum voltage among the first control voltage y1, the second control voltage y2 and the third control voltage y3 as the sixth control voltage y6.
The MIN circuit 14 b includes a first PNP transistor Q6 whose base is connected with the collector of the fourth NPN transistor Q7, whose emitter is connected with the output of a third constant current source I3 and whose collector is grounded; a second PNP transistor Q4 whose base is supplied with the fourth control voltage y4, whose emitter is connected with the output of the third constant current source I3 and whose collector is grounded; a third PNP transistor Q5 whose base is supplied with the fifth control voltage y5, whose emitter is connected with the output of the third constant current source I3 and whose collector is grounded; and a fourth PNP transistor Q8 whose emitter is connected with the output of the third constant current source I3 and whose collector and base are connected with the input of a fourth constant current source I4 for supplying a current with a value a half as large as that of the third constant current source I3, for outputting, at its collector, the minimum voltage among the fourth control voltage y4, the fifth control voltage y5 and the sixth control voltage y6 as the seventh control voltage y7.
The MAX circuit 14 a and the MIN circuit 14 b having the aforementioned configurations are operated as follows:
In the MAX circuit 14 a, the first NPN transistor Q1, the second NPN transistor Q2 and the third NPN transistor Q3 mutually share the collector and the emitter, the current from the second constant current source I2 flows through the fourth NPN transistor Q7 to the first constant current source I1 and the current value I2 is set at I1/2. Therefore, the remaining current value I1/2 of the current value I1 flows to one transistor supplied with the largest voltage at the base thereof among the first NPN transistor Q1, the second NPN transistor Q2 and the third NPN transistor Q3. As a result, a potential difference between the base and the emitter of the fourth NPN transistor Q7 is equal to a potential difference between the base and the emitter of that one transistor supplied with the largest voltage among the first NPN transistor Q1, the second NPN transistor Q2 and the third NPN transistor Q3. Accordingly, a voltage shared by the collector and the base of the fourth NPN transistor Q7 is equal to the maximum voltage among the first control voltage y1, the second control voltage y2 and the third control voltage y3.
Also, in the MIN circuit 14 b, the first PNP transistor Q6, the second PNP transistor Q4 and the third PNP transistor Q5 mutually share the emitter, and the collectors of these transistors are all grounded. Therefore, a voltage shared by the collector and the base of the fourth PNP transistor Q8 is equal to the minimum voltage among those supplied to the first PNP transistor Q6, the second PNP transistor Q4 and the third PNP transistor Q5.
In this manner, according to the control circuit 14 of this embodiment for generating the control voltage Vc for the temperature compensation of the VCXO 15, the polygonal lines approximation of the temperature compensation characteristic can be performed by outputting a group of five continuously and linearly changing control voltages as the seventh control voltage y7 corresponding to the control voltage Vc by using plural simple bipolar circuits.
Furthermore, since all of the constant voltage circuit 12, the temperature sensor circuit 13 and the control circuit 14 together working as a function generator for generating the control voltage Vc for the temperature compensation include analog circuits alone, there is no possibility of occurrence of a quantum noise in principle, and hence, frequency skip can be prevented from occurring at the connecting portion between polygonal lines. In addition, since there is no need to provide the function generator with a clock generator, a clock noise can also be avoided.
Although the output of the MAX circuit 14 a is received by the MIN circuit 14 b in FIG. 10, the order of the connection of the MAX circuit 14 a and the MIN circuit 14 b can be reversed. Specifically, in that case, the third control voltage y3, the fourth control voltage y4 and the fifth control voltage y5 are input to the MIN circuit 14 b, whose output is used as the sixth control voltage y6. The sixth control voltage y6, the first control voltage y1 and the second control voltage y2 are input to the MAX circuit 14 a, whose output is used as the seventh control voltage y7, namely, the output of the control circuit 14.
Now, the control voltage Vc used for the temperature compensation generated by the constant voltage circuit 12, the temperature sensor circuit 13 and the control circuit 14 of FIG. 1 together working as the function generator will be described by using graphs and formulas.
FIGS. 11(a) through 11(c) show the compensation of the oscillation frequency f of the VCXO 15 using the temperature compensating control voltage Vc, and FIG. 11(a) shows the dependency on the ambient temperature Ta of the oscillation frequency f output by the VCXO 15 without the temperature compensation, wherein f0 indicates a reference frequency determined by a specification of, for example, a portable telephone. FIG. 11(b) shows the dependency on the ambient temperature Ta of the control voltage Vc (i.e., the seventh control voltage y7) for the temperature compensation output by the control circuit 14, and FIG. 11(c) shows the temperature dependency of a difference Îf between the oscillation frequency f of the VCXO 15 and the reference frequency f0 attained by applying the control voltage Vc to the VCXO 15.
FIG. 12 shows the details of the graph of FIG. 11(b), and shows a group of polygonal lines respectively corresponding to the first control voltage y1 in a first temperature region (T0â¦Ta<T1), the second control voltage y2 in a second temperature region (T1â¦Ta<T2), the third control voltage y3 in a third temperature region (T2â¦Ta<T3), the fourth control voltage y4 in a fourth temperature region (T3â¦Ta<T4), and the fifth control voltage y5 in a fifth temperature region (T4â¦Ta<T5). As is shown in FIG. 12, the X-axis indicates the ambient temperature Ta, the Y-axis indicates the control voltage Vc, a center temperature of the control voltage Vc is indicated as Ti, and a voltage difference from a voltage for attaining the reference frequency at the center temperature Ti is indicated as Î³.
The linear functional formulas of y1 through y5 are:


 y 1 =âa 1(T a âT i)âb 1+Î³ââ(1)


(whereas T0â¦Ta<T1, a1>0, and b1>0)


 y 2 =âb 2+Î³ââ(2)


(whereas T1â¦Ta<T2 and b2>0)


 y 3 =a 3(T a âT i)+Î³ââ(3)


(whereas T2â¦Ta<T3 and a3>0)


 y 4 =b 4+Î³ââ(4)


(whereas T3â¦Ta<T4 and b4>0)


 y 5 =âa 5(T aâTi)+b 5+Î³ââ(5)


(whereas T4â¦Taâ¦T5, a5>0, b5>0, a1âa5, b2âb4 and b1âb5)
At this point, the center temperature Ti corresponds to the inflection point temperature of a quartz oscillator, and is approximately 25Â° C. in a general quartz oscillator.
Now, the relationship between the sixth control voltage y6 and the first through third control voltages y1, y2 and y3 and the relationship between the seventh control voltage y7, namely, the control voltage Vc, and the fourth through sixth control voltages y4, y3 and y6 will be described on the basis of the MAX circuit 14 a and the MIN circuit 14 b of FIG. 10.
In the MAX circuit 14 a, when the emitter currents of the first NPN transistor Q1, the second NPN transistor Q2, the third NPN transistor Q3 and the fourth NPN transistor Q7 are indicated as IEQ1, IEQ2, IEQ3 and IEQ7, respectively, the following relationship holds:


 I EQ1 +I EQ2 +I EQ3 =I EQ7 =I 1/2=I 2ââ(6)


Also, the emitter currents of the respective NPN transistors are represented as follows:


 I EQ1 =I SN exp{(q/kT)Â·(y 1 âV 1)}ââ(7)




 I EQ2 =I SN exp{(q/kT)Â·(y 2 âV 1)}ââ(8)




 I EQ3 =I SN exp{(q/kT)Â·(y 3 âV 1)}ââ(9)




 I EQ7 =I SN exp{(q/kT)Â·(y 6 âV 1)}ââ(10)


wherein ISN indicates a reverse saturation current of the NPN transistor, q indicates a charge amount of electrons, k indicates the Boltzmann's constant, T indicates an absolute temperature, and V1 indicates the shared emitter potential of the NPN transistor.
Accordingly, when the formulas (7) through (10) are substituted for the formula (6) and the resultant formula is solved for y6, the following formula (11) representing the relationship between the sixth control voltage y6 and the first through third control voltages y1, y2 and y3 can be obtained:


 y 6=(kT/q)Â·ln{exp(qy 1 /kT)+exp(qy 2 /kT)+exp(qy 3 /kT)}ââ(11)


Similarly, in the MIN circuit 14 b, the emitter currents of the first PNP transistor Q6, the second PNP transistor Q4, the third PNP transistor Q5 and the fourth PNP transistor Q8 are indicated as IEQ6, IEQ4, IEQ5 and IEQ8, respectively, the following relationship holds:


 I EQ6 +I EQ4 +I EQ5 =I EQ8 =I 3/2=I 4ââ(12)


Furthermore, the emitter currents of the respective PNP transistors are represented as follows:


 I EQ6 =I SP exp{(q/kT)Â·(V 2 ây 6)}ââ(13)




 I EQ4 =I SP exp{(q/kT)Â·(V 2 ây 4)}ââ(14)




 I EQ5 =I SP exp{(q/kT)Â·(V 2 ây 5)}ââ(15)




 I EQ8 =I SP exp{(q/kT)Â·(V 2 ây 7)}ââ(16)


wherein ISP indicates a reverse saturation current of the PNP transistor, q indicates a charge amount of electrons, k indicates the Boltzmann's constant, T indicates an absolute temperature, and V2 indicates the shared emitter potential of the PNP transistor.
Accordingly, when the formulas (13) through (16) are substituted for the formula (12) and the resultant is solved for y7, the following formula (17) representing the relationship between the seventh control voltage y7 and the fourth through sixth control voltages y4, y5 and y6 can be obtained:
ây 7=(âkT/q)Â·ln{exp(âqy 6 /kT)+exp(âqy 4 /kT)+exp(âqy 5 /kT)}ââ(17)
Furthermore, by substituting the sixth control voltage y6 represented by the formula (11) for the formula (17), the desired formula (18) can be obtained as follows:


 y 7=(âkT/q)Â·ln[1/{exp(qy 1 /kT)+exp(qy 2 /kT)+exp(qy 3 /kT)}+exp(âqy 4 /kT)+exp(âqy 5 /kT)]ââ(18)


Next, an exemplified configuration of the ROM/RAM circuit 16 of this embodiment shown in FIG. 1 will be described.
FIG. 13 shows the circuit configuration of the ROM/RAM circuit 16 used in the temperature compensating crystal oscillation device of this embodiment. As is shown in FIG. 13, though it is merely one example, the ROM/RAM circuit 16 includes a RAM data input circuit 161 as a serial data input portion including serially connected four flip-flops, a PROM circuit 162 including four programmable ROMs each receiving and storing each bit of output data of the RAM data input circuit 161, and a switch circuit 163 for externally receiving a selection signal SEL and selecting either the output data of the RAM data input circuit 161 or output data of the PROM circuit 162. In this case, the output data of the ROM/RAM circuit 16 is output, for example, to the current mirror circuit 33 of FIG. 5 as the 4-bit signal a1 or the like. Although the exemplified ROM/RAM circuit 16 has a configuration for coping with 4-bit data, the invention is not limited to this configuration and the bit number can be determined in accordance with the number of the temperature compensating parameters described below.
The operation of the ROM/RAM circuit 16 will now be described with reference to a timing chart of RAM data input shown in FIG. 14.
First, in order to write desired data in the PROM circuit 162, a C/E signal which corresponds to an enable signal in the RAM data input circuit 161 is activated so as to enable the data input, and a read/write signal W/R in the PROM circuit 162 is set in the write mode. Serial data of, for example, 1, 0, 1 and 1 are successively input from the data input terminal DATA to the RAM data input circuit 161 at a rise of a clock signal CLK. As a result, as is shown in FIG. 14, the first output data â1â is output to the output terminal OUT1 of the first flip-flop, the second output data â0â is output to the output terminal OUT2 of the second flip-flop, the third output data â1â is output to the output terminal OUT3 of the third flip-flop, and the fourth output data â1â is output to the output terminal OUT4 of the fourth flip-flop. Next, in the PROM circuit 162 of FIG. 13, the first output data is stored in the PROM1, the second output data is stored in the PROM2, the third output data is stored in the PROM3 and the fourth output data is stored in the PROM4.
In order to directly output the data having been input to the RAM data input circuit 161, the selection signal SEL in the switch circuit 163 is set at a level for passing the data through. In order to read the data stored in the PROM circuit 162, the selection signal SEL in the switch circuit 163 is set at a level for selecting the PROM.
Modification 1 of Embodiment 1
A first modification of the first embodiment will now be described with reference to the accompanying drawing.
FIG. 15 shows the circuit configuration of a control circuit of a crystal oscillation device according to the first modification. In FIG. 15, like reference numerals are used to refer to like elements used in the control circuit of FIG. 10, and the description is omitted. The control circuit 14 of FIG. 15 includes a MAX circuit 14 c for receiving the first control voltage y1, the second control voltage y2 and the third control voltage y3 generated by the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1 and for outputting the maximum voltage among these control voltages as the sixth control voltage y6; and a MIN circuit 14 d for receiving the fourth control voltage y4 and the fifth control voltage y5 generated by the constant voltage circuit 12 and the temperature sensor circuit 13 of FIG. 1 and the sixth control voltage y6 output from the MAX circuit 14 c and for outputting the minimum voltage among these control voltages as the seventh control voltage y7.
In the MAX circuit 14 c, a first resistance R1 is serially connected between the emitter of the first NPN transistor Q1 and the first constant current source I1, a second resistance R2 is serially connected between the emitter of the second NPN transistor Q2 and the first constant current source I1, a third resistance R3 is serially connected between the emitter of the third NPN transistor Q3 and the first constant current source I1, and a fourth resistance R7 is serially connected between the emitter of the fourth NPN transistor Q7 and the first constant current source I1.
Similarly, in the MIN circuit 14 d, a fifth resistance R6 is serially connected between the emitter of the first PNP transistor Q6 and the third constant current source I3, a sixth resistance R4 is serially connected between the emitter of the second PNP transistor Q4 and the third constant current source I3, a seventh resistance R5 is serially connected between the emitter of the third PNP transistor Q5 and the third constant current source I3, and an eighth resistance R8 is serially connected between the emitter of the fourth PNP transistor Q8 and the third constant current source I3.
In this modification, since the resistances are serially connected with the emitters of the NPN transistors Q1, Q2, Q3 and Q7 in the MAX circuit 14 c and the resistances are serially connected with the emitters of the PNP transistors Q6, Q4, Q5 and Q8 in the MIN circuit 14 d, the connecting portions between the respective temperature regions in the control voltage Vc shown in FIG. 12 can be smoothed. In general, in cubic functional approximation using polygonal lines, an approximation error Îf (=fâf0) corresponding to a difference between the oscillation frequency f after the temperature compensation and the reference frequency f0 of a quartz oscillator is largest at a connecting portion of the polygonal lines. However, the connecting portions between the temperature regions can be thus smoothed, the approximation error can be reduced.
Modification 2 of Embodiment 1
A second modification of the first embodiment will now be described with reference to the accompanying drawings.
FIGS. 16(a) through 16(c) show the temperature dependency of an oscillation frequency attained by using a control circuit of a crystal oscillation device according to the second modification, wherein FIG. 16(a) shows the temperature dependency of the oscillation frequency before the temperature compensation, FIG. 16(b) shows the temperature dependency of a control voltage Vc used for the temperature compensation of a VCXO generated by the control circuit of this modification and FIG. 16(c) shows the temperature dependency of a difference Îf between the oscillation frequency f attained after the temperature compensation by using the control voltage Vc and a reference frequency f0.
As a characteristic of this modification, the lines of the control voltages to be connected in the boundaries between the temperature regions are smoothly connected in an analog manner by gradually transforming the lines of the control voltages in accordance with temperature change. Therefore, the generated control voltage can be more approximated to a cubic function, resulting in decreasing the difference Îf in the oscillation frequency.
Furthermore, when the ambient temperature Ta is divided into three regions of, T0â¦Ta<T1, T1â¦Ta<T2 and T2â¦Taâ¦T3, and straight lines y11, y12 and y13 of three control voltages alone are used as is shown in FIG. 17, the same effect as is exhibited by the approximation using the five straight lines y1 through y5 can be attained by making the connecting portions smooth in an analog manner.
In the adjustment of the temperature compensation, decrease in the number of straight lines used for the polygonal lines approximation can be a significant factor to decrease the storage capacity of the ROM/RAM circuit, which will be described below.
Modification 3 of Embodiment 1
A third modification of the first embodiment will now be described.
The temperature characteristic of the oscillation frequency f of a quartz oscillator is point-symmetrical about the inflection point temperature Ti at a lower temperature side and a higher temperature side as is shown in FIG. 11(a), and in this modification, the point-symmetry is used for generating a group of control voltages Vc which are point-symmetrical about the inflection point temperature Ti at the lower temperature side and the higher temperature side.
Specifically, in the aforementioned formulas (1) through (5) representing the first through fifth control voltages y1 through y5, the proportional coefficient a1 of the formula (1) is equal to the proportional coefficient a5 of the formula (5), the constant b1 of the formula (1) is equal to the constant b5 of the formula (5), and the constant b2 of the formula (2) is equal to the constant b4 of the formula (4).
In this manner, the circuit constant of one internal element of the control circuit 14 which determines the temperature characteristic at the lower temperature side and the higher temperature side can be designed by using a predetermined proportion to the circuit constant of another internal element, and hence, the storage capacity of the ROM/RAM circuit 16 can be largely decreased.
At this point, the control voltage Vc for the temperature compensation of a quartz oscillator is assumed to be represented by the following cubic function:


 Vc=Î±(TâT i)3+Î²(TâT i)+Î³ââ(19)


wherein Î± indicates a negative cubic temperature coefficient, Î² indicates a linear temperature coefficient, Î³ is a constant corresponding to a voltage difference from a voltage for attaining a reference frequency at an inflection point temperature, T indicates an absolute temperature and Ti indicates the inflection point temperature corresponding to an inflection point of the cubic function.
FIG. 18 is a table listing memory capacities of the ROM/RAM circuit required by various control circuit systems. In the case where the parameter for adjusting the temperature compensation of the control voltage is limited to the parameter Î± of the cubic temperature characteristic, in order to dependently adjust the temperature compensating parameters of the first through fifth control voltages y1 through y5 and attain the stability of the oscillation frequency f of Â±2.5 ppm in the desired temperature range, each of the proportional coefficients a1, a3 and a5 requires 4 bits, each of the constants b1 and b5 requires 4 bits, and each of the constants b2 and b4 requires 2 bits in the aforementioned formulas (1) through (5). As a result, a D/A converter of 24 bits in total is required.
However, when the control voltage is point-symmetrical at the lower temperature side and the higher temperature side as in this modification, the bits for adjusting the constants a5, b5 and b4 are not necessary because a1, =a5, b1=b5 and b2=b4. As a result, the temperature compensation can be adjusted by a D/A converter of 14 bits in total.
Modification 4 of Embodiment 1
A fourth modification of the first embodiment will now be described with reference to the accompanying drawings.
FIGS. 19(a) and 19(b) show the temperature dependency of a control voltage output by a control circuit of a crystal oscillation device according to a fourth modification of the first embodiment, wherein FIG. 19(a) shows cubic curves f1, f2 and f3 attained by different cubic temperature coefficients Î± in the oscillation frequency of a quartz oscillator and FIG. 19(b) shows control voltages Vc1, Vc2 and Vc3 for compensating the corresponding cubic curves.
In this modification, the temperature coefficients (proportional coefficients) of the temperature characteristics of the control voltage group including the first through fifth control voltages y1 through y5 and varied in the shape of polygonal lines in accordance with the temperature are provided with predetermined proportions to one another.
Thus, in determining the various parameters such as the circuit constant of the control circuit 14, the parameter of one internal element can be designed by using the predetermined proportion to the parameter of another internal element. As a result, the memory capacity of the ROM/RAM circuit 16 can be largely decreased.
Now, optimal proportions for minimizing the approximation error between the cubic temperature coefficient Î± and the control voltages y1 through y5 will be specifically introduced. When the control voltage peculiar to a quartz oscillator is assumed to be an ideal control voltage Vci, the formula (19) is changed into the following formula (20):


 Vci=Î±(TâT i)3+Î²(TâT i)+Î³ââ(20)


With the operating temperature range of the crystal oscillation device indicated as To, the ideal control voltage Vci is separated into a linear function Vci1 represented by the formula (25) and a cubic function vci3 represented by the formula (26), both of which pass through three points represented by the following formulas (21) through (23), and the cubic function vci3 is subjected to the polygonal lines approximation:


 [T, Vci]=[(T i âT o), Vci(T i âT o)]ââ(21)




 [T, Vci]=[T i, Î³]ââ(22)




 [T, Vci]=[(T i +T o), Vci(T i +T o)]ââ(23)




 Vci=Vci 1 +Vci 3ââ(24)




 Vci 1=(Î²+Î±T o 2) (TâT i)+Î³ââ(25)




 Vci 3=Î±(TâT i)3 âÎ±T o 2(TâT i)ââ(26)


The linear function Vci1 and the cubic function Vci3 are shown in FIGS. 20(a) through 20(c). A line 1 indicates the linear function Vci1 and a curve 2 indicates the cubic function Vci3 in FIG. 20(a), merely the linear function Vci1 is shown in FIG. 20(b), and FIG. 20(c) shows the polygonal lines approximation of the cubic function Vci3 shown as the curve 2 by using a group of lines y1 through y5 corresponding to the five control voltages of the embodiment.
At this point, the approximation error in the polygonal lines approximation is minimized in each region in the following cases: In the first temperature region (TiâToâ¦T<Tiâ0.755To), it is minimized when the first control voltage y1 is:        y 1  =    - 1.46  î¢ Î± î¢  â  î¢   T o 2  î¢   (  T -  T i   )    -  1.46 î¢ Î± î¢  â  î¢  T o 3        ( 27 )       =   -   a 1  î¢   (  T -  T i   )    -  b 1       ( 28 )            
In the second temperature region (Tiâ0.755Toâ¦T<Tiâ0.398To), it is minimized when the second control voltage y2 is:        y 2  =   - 0.358  î¢ Î± î¢  â  î¢  T o 3       ( 29 )       =  -  b 2       ( 30 )            
In the third temperature region (Tiâ0.398Toâ¦T<Ti+0.398To), it is minimized when the third control voltage y3 is:        y 3  =  0.9 î¢ Î± î¢  â  î¢   T o 2  î¢   (  T -  T i   )        ( 31 )       =   a 3  î¢   (  T -  T i   )       ( 32 )            
In the fourth temperature region (Ti+0.398Toâ¦T<Ti+0.755To), it is minimized when the fourth control voltage y4 is:        y 4  =  0.358 î¢ Î± î¢  â  î¢  T o 3       ( 33 )       =  b 4      ( 34 )            
In the fifth temperature region (Ti+0.755Toâ¦Tâ¦Ti+To), it is minimized when the fifth control voltage y5 is:        y 5  =    - 1.46  î¢ Î± î¢  â  î¢   T o 2  î¢   (  T -  T i   )    +  1.46 î¢ Î± î¢  â  î¢  T o 3        ( 35 )       =   -   a 5  î¢   (  T -  T i   )    +  b 5       ( 36 )            
FIG. 21(a) shows the cubic function Vci3 of the formula (26), the first control voltage y1 of the formula (27), the second control voltage y2 of the formula (29), the third control voltage y3 of the formula (31), the fourth control voltage y4 of the formula (33), and the fifth control voltage y5 of the formula (35). FIG. 21(b) shows a difference ÎVc between the ideal control voltage Vci3 shown in FIG. 21(a) and an approximation control voltage Vcp obtained through the polygonal lines approximation using the control voltages y1 through y5.
Then, the coefficients of the approximation control voltage Vcp are collected on the left side and the coefficients of the ideal control voltage Vci are collected on the right side. When the coefficients of the formula (27) and (28) and the coefficients of the formulas (35) and (36) are compared, the following are obtained:


 a 1 =a 5=1.46Î±T o 2ââ(37)




 b 1 =b 5=1.46Î±T o 3ââ(38)


when the coefficients of the formulas (31) and (32) are compared, the following is obtained:


 a 3=0.9Î±T o 2ââ(39)


When the coefficients of the formulas (29) and (30) and the coefficients of the formulas (33) and (34) are compared, the following is obtained:


 b 2 =b 4=0.358Î±T o 3ââ(40)


By transforming the formulas (37) through (40), the formulas representing the desired proportions between the cubic temperature coefficient Î± and the proportional coefficients of the lines used for the polygonal lines approximation can be obtained as follows:


 a 1/Î±=1.46T o 2ââ(41)




 a 3/Î±=0.9T o 2ââ(42)




 a 5/Î±=1.46T o 2ââ(43)




 b 1/Î±=1.46T o 3ââ(44)




 b 2/Î±=0.358T o 3ââ(45)




 b 4/Î±=0.358T o 3ââ(46)




 b 5/Î±=1.46T o 3ââ(47)


At this point, when the inflection point temperature is assumed to be 25Â° C. and the operating temperature range To is 60 degree, the ambient temperature Ta in this modification is â35Â° C. through +85Â° C.
In this manner, even when each quartz oscillator has a different cubic coefficient Î± of the ideal control voltage Vci, the proportions of Î± are not varied respectively in a1/Î±, a3/Î±, a5/Î±, b1/Î±, b2/Î±, b4/Î± and b5/Î±.
Accordingly, in this modification, the proportional coefficients a1, a3 and a5 of the lines and the constants b1, b2, b4 and b5 of the lines are respectively provided with the proportions as is shown in the formulas (41) through (47). In this manner, in the adjustment of the cubic temperature coefficient Î± of a quartz oscillator, the circuit constants corresponding to the proportional coefficients a1, a3 and a5 and the circuit constants corresponding to the constants b1, b2, b4 and b5 can be set in a batch, and hence, the adjustment can be performed by a D/A converter of 6 bits in total as is shown in FIG. 18. Therefore, even when the memory capacity of the ROM/RAM circuit 16 is small, fluctuations of the cubic temperature coefficient and the linear temperature coefficient derived from a cut angle of the AT cut of a quartz oscillator and fluctuation of the absolute value of the oscillation frequency can be both definitely adjusted.
Embodiment 2
A second embodiment of the invention will now be described with reference to the accompanying drawings.
FIG. 22 is a functional block diagram of a function generator for the temperature compensation used in a temperature compensating crystal oscillation device according to the second embodiment. As is shown in FIG. 22, the function generator includes a MAX/MIN circuit 14A having the same configuration as the control circuit 14 of the first embodiment for receiving the outputs of a constant voltage circuit 12 and a temperature sensor circuit 13 and for generating a cubic control voltage Î±Vc corresponding to the cubic temperature characteristic parameter Î± within a predetermined temperature range in the control voltage Vc for the temperature compensation represented by the formula (19); a linear temperature characteristic generating circuit 17 for receiving the output of the temperature sensor circuit 13 and for generating a linear control voltage Î²Vc corresponding to a linear temperature characteristic parameter Î² within a predetermined temperature range in the control voltage Vc for the temperature compensation represented by the formula (19); a zero-order temperature characteristic generating circuit 18 for receiving the output of the constant voltage circuit 12 and for generating a zero-order control voltage Î³ Vc corresponding to the zero-order temperature characteristic parameter Î³ within a predetermined temperature range in the control voltage Vc for the temperature compensation represented by the formula (19), namely, independent of the temperature within a predetermined temperature; and a Ti adjusting circuit 19 for receiving the output of the temperature sensor circuit 13, adjusting the value of an inflection point temperature Ti shown in the formula (19) and outputting the adjusted value to the MAX/MIN circuit 14A and the linear temperature characteristic generating circuit 17.
In the function generator for generating the control voltage Vc for the temperature compensation of a VCXO of this embodiment, the control voltage Vc is generated by obtaining a sum of the output voltage Î± Vc of the MAX/MIN circuit 14A for performing, with the ambient temperature Ta divided into five regions, the polygonal lines approximation using a linear function in each region, the output voltage Î² Vc of the linear temperature characteristic generating circuit 17 for adjusting the linear characteristic of the temperature compensating parameter, and the output voltage Î³ Vc of the zero-order temperature characteristic generating circuit 18 for adjusting the zero-order characteristic of the temperature compensating parameter, namely, a voltage difference, independent of the ambient temperature Ta, from the voltage for attaining a reference frequency at the inflection point temperature. Accordingly, the temperature compensation of the oscillation frequency of a quartz oscillator can be definitely carried out in the entire range of the ambient temperature Ta.
FIGS. 23(a) through 23(d) are graphs for illustrating variation of the control voltage Vc through the adjustment of the temperature compensating parameters Î±, Î², and Î³ and the inflection point temperature Ti. FIG. 23(a) shows the variation derived from the cubic temperature characteristic parameter Î±, FIG. 23(b) shows the variation derived from the linear temperature characteristic parameter Î², FIG. 23(c) shows the variation derived from the zero-order temperature characteristic parameter Î³, namely, the voltage difference from the voltage for attaining the reference frequency at the inflection point temperature, and FIG. 23(d) shows the variation derived from the inflection point temperature Ti.
As is shown in FIG. 23(a), when the cubic temperature characteristic parameter Î± is changed, the absolute values at the minimum point and the maximum point are decreased, and as is shown in FIG. 23(b), when the linear temperature characteristic parameter Î² is changed, the temperature characteristic is rotated about the inflection point temperature Ti (i.e., the inflection point). Also, as is shown in FIG. 23(c), when the zero-order temperature characteristic parameter Î³ is changed, the so-called y-intercept is moved. Furthermore, as is shown in FIG. 23(d), when the inflection point temperature Ti is changed, the characteristic graph is moved in the X-axis direction.
Embodiment 3
A third embodiment of the invention will now be described with reference to the accompanying drawings.
FIG. 24 is a functional block diagram for illustrating the adjustment of an oscillation frequency in a temperature compensating crystal oscillation device according to the third embodiment. In FIG. 24, like reference numerals are used to refer to like elements shown in FIG. 1, and the description is omitted. In this embodiment, the constant voltage circuit 12, the temperature sensor circuit 13, the control circuit 14, the VCXO 15 and the ROM/RAM circuit 16 as optimizing means have the configurations equivalent to those of the first embodiment. Furthermore, as is shown in FIG. 24, the temperature compensating crystal oscillation device 10A of this embodiment is provided with a switch SW1 for connecting/disconnecting the control circuit 14 and the VCXO 15.
In general, each quartz oscillator included in the VCXO 15 has fluctuation in the AT cut angle, the frequency difference from a reference frequency at an inflection point temperature and the inflection point temperature Ti. Therefore, it is necessary to adjust the oscillation frequency of the VCXO 15 within a range of Â±2.5 ppm before shipping.
The crystal oscillation device of this embodiment has the switch SW1 between the control circuit 14 and the VCXO 15. Therefore, the crystal oscillation device can definitely cope with a RAM mode and a ROM mode as follows: In the RAM mode, externally input data including the temperature compensating parameters are input to the RAM data input circuit 161 of the ROM/RAM circuit 16 through the external data input terminal DATA and the control voltage Vc is adjusted by using the data of the RAM data input circuit 161, so as to determine an optimal voltage characteristic. In the ROM mode, data selected in the RAM mode are written in a ROM portion of the ROM/RAM circuit 16 and the ROM data are read under actual use conditions, so as to output a control voltage Vc in accordance with the ambient temperature Ta.
The method of adjusting the oscillation frequency of the temperature compensating crystal oscillation device 10A having the aforementioned configuration will now be described with reference to the accompanying drawing.
FIG. 25 is a flowchart for the method of adjusting the crystal oscillation device of this embodiment.
First, in a peculiar control voltage measuring step ST1, the switch SW1 of FIG. 24 is opened, one input terminal of a PLL circuit 51 is connected with the output terminal fout of the VCXO 15, and a predetermined frequency f0 independent of the ambient temperature is input to the other input terminal of the PLL circuit 51. Thus, an external control voltage Vcext is adjusted so that the oscillation frequency f output from the output terminal fout can be equal to the predetermined frequency f0. Then, after the crystal oscillation device 10A to be adjusted is placed in a constant temperature oven, the external control voltage Vcext is measured with the ambient temperature changed from a low temperature to a high temperature. In this manner, a peculiar control voltage Vc0, that is, an ideal control voltage at which the variation of the oscillation frequency f of the VCXO 15 caused by the temperature is 0, is obtained.
Next, in a peculiar parameter determining step ST2, on the basis of the temperature characteristic of the peculiar control voltage Vc0, parameters of a control signal corresponding to the cubic temperature coefficient, the linear temperature coefficient, the frequency difference from the reference frequency at the inflection point temperature and the inflection point temperature are calculated, and peculiar parameters are defined as Î±0, Î²0, Î³0 and Ti0, respectively.
Then, in an initial control voltage characteristic measuring step ST3, a switch SW2 is opened with the switch SW1 short-circuited and the device is set in the RAM mode. Then, the temperature characteristic of an initial control voltage Vc1 of the control circuit 14 is measured as well as change of the temperature characteristic of the initial control voltage Vc1 in accordance with change of data corresponding to the respective parameters input to the RAM is measured.
Next, in an initial parameter determining step ST4, on the basis of the temperature characteristic of the initial control voltage Vc1, parameters for initial temperature compensation of the initial control voltage Vc1 corresponding to the cubic temperature coefficient, the linear temperature coefficient, the frequency difference from the reference frequency at the inflection point temperature and the inflection point temperature of the quartz oscillator are calculated and defined as Î±1, Î²1, Î³1 and Ti1, respectively.
Subsequently, in a temperature compensating parameter change calculating step ST5, the amounts of change corresponding to 1 bit of the respective parameters as the RAM data are calculated and defined as ÎÎ±, ÎÎ², ÎÎ³, ÎTi, respectively.
Then, in apeculiar parameter/initial parameter difference calculating step ST6, differences in the corresponding parameters between Î±0, Î²0, Î³0 and Ti0 and Î±1, Î²1, Î³1 and Ti1 are calculated.
Next, in an optimal parameter determining step ST7, on the basis of ÎÎ±, ÎÎ², ÎÎ³ and ÎTi calculated in the temperature compensating parameter change calculating step ST5, optimal parameters are determined so that the differences in the parameters calculated in the peculiar parameter/initial parameter difference calculating step ST6 can be approximated to zero.
Then, in an oscillation frequency characteristic confirming step ST8, the determined optimal parameters are written in the PROM circuit 162, and the device is set in the ROM mode. Then, the crystal oscillation device 10A to be adjusted is placed in a constant temperature oven again, and the temperature characteristic of the oscillation frequency f is measured, so as to confirm that the temperature dependency is set within a predetermined range. In the case where the temperature dependency exceeds the predetermined range, the procedure returns to an appropriate upstream step, and re-adjustment is carried out.
In this manner, according to this embodiment, the adjustment for suppressing the temperature dependency of the oscillation frequency within a predetermined range can be definitely realized with regard to the fluctuation of the AT cut angle, the fluctuation of the frequency difference from the reference frequency at the inflection point temperature and the fluctuation of the inflection point temperature of a quartz oscillator.
Moreover, the procedures of the peculiar control voltage measuring step ST1, the peculiar parameter determining step ST2, the initial control voltage characteristic measuring step ST3, the initial parameter determining step ST4, the temperature compensating parameter change calculating step ST5, the peculiar parameter/initial parameter difference calculating step ST6, the optimal parameter determining step ST7 and the oscillation frequency characteristic confirming step ST8 can be automatically performed by using a personal computer or the like. Therefore, by writing optimal parameters in accordance with each quartz oscillator in the ROM and automatically confirming the oscillation frequency by using the ROM data, time required for the entire process for adjusting the crystal oscillation device can be largely decreased and the accuracy can be remarkably improved.